"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7083,1713],{41735:function(e,t,n){n.d(t,{Bw:function(){return h},Ph:function(){return l},Ql:function(){return p},i4:function(){return d},ki:function(){return u}});var r=n(57437),s=n(2265),a=n(32544),o=n(83523),i=n(62442),c=n(60345);const l=a.fC,u=(a.ZA,a.B4),d=s.forwardRef(((e,t)=>{let{className:n,children:s,...i}=e;return(0,r.jsxs)(a.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...i,children:[s,(0,r.jsx)(a.JO,{asChild:!0,children:(0,r.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})}));d.displayName=a.xz.displayName;const h=s.forwardRef(((e,t)=>{let{className:n,children:s,position:o="popper",...i}=e;return(0,r.jsx)(a.h_,{children:(0,r.jsx)(a.VY,{ref:t,className:(0,c.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===o&&"translate-y-1",n),position:o,...i,children:(0,r.jsx)(a.l_,{className:(0,c.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})}));h.displayName=a.VY.displayName;s.forwardRef(((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...s})})).displayName=a.__.displayName;const p=s.forwardRef(((e,t)=>{let{className:n,children:s,...o}=e;return(0,r.jsxs)(a.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(a.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(a.eT,{children:s})]})}));p.displayName=a.ck.displayName;s.forwardRef(((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",n),...s})})).displayName=a.Z0.displayName},47461:function(e,t,n){n.d(t,{SP:function(){return l},dr:function(){return c},mQ:function(){return i},nU:function(){return u}});var r=n(57437),s=n(2265),a=n(34522),o=n(60345);const i=a.fC,c=s.forwardRef(((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...s})}));c.displayName=a.aV.displayName;const l=s.forwardRef(((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...s})}));l.displayName=a.xz.displayName;const u=s.forwardRef(((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...s})}));u.displayName=a.VY.displayName},76746:function(e,t,n){n.d(t,{q:function(){return d}});var r=n(57437),s=(n(2265),n(10609)),a=n(20105),o=n(6599),i=n(74628),c=n(11257),l=n(40150),u=n(74056);const d=e=>{let{title:t,description:n,historicalData:d,predictedData:h,metricName:p,metricUnit:m,anomalies:f=[],timeGranularity:b="hourly"}=e;const g=e=>{const t=new Date(e);return"hourly"===b?(0,o.Z)(t,"HH:mm"):(0,o.Z)(t,"MMM dd")},x={labels:[...d.map((e=>g(e.timestamp))),...(()=>{const e=new Date(d[d.length-1].timestamp),t=[];for(let n=0;n<h.length;n++){const r="hourly"===b?(0,i.Z)(e,n+1):(0,c.Z)(e,n+1);t.push(g(r.toISOString()))}return t})()],datasets:[{label:"Historical ".concat(p),data:[...d.map((e=>e.value)),...Array(h.length).fill(null)],borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,pointRadius:3,pointBackgroundColor:"rgba(59, 130, 246, 1)",tension:.4,fill:!1},{label:"Predicted ".concat(p),data:[...Array(d.length).fill(null),...h.map((e=>e.value))],borderColor:"rgba(139, 92, 246, 1)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:2,borderDash:[5,5],pointRadius:3,pointBackgroundColor:"rgba(139, 92, 246, 1)",tension:.4,fill:!1},{label:"Upper Bound",data:[...Array(d.length).fill(null),...h.map((e=>e.upperBound||null))],borderColor:"rgba(139, 92, 246, 0.3)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:1,pointRadius:0,fill:"+1",tension:.4},{label:"Lower Bound",data:[...Array(d.length).fill(null),...h.map((e=>e.lowerBound||null))],borderColor:"rgba(139, 92, 246, 0.3)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:1,pointRadius:0,fill:!1,tension:.4},{label:"Anomalies",data:f.map((e=>{const t=[...d,...h].findIndex((t=>t.timestamp===e.timestamp));return t>=0?[...d,...h][t].value:null})),borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 1)",borderWidth:0,pointRadius:6,pointStyle:"triangle",pointRotation:180,showLine:!1}]},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,usePointStyle:!0}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){const t=e.dataset.label||"",n=null!==e.parsed.y?"".concat(e.parsed.y.toFixed(2)," ").concat(m):"No data";return"".concat(t,": ").concat(n)},afterBody:function(e){e[0].dataIndex;const t=e[0].label,n=f.find((e=>g(e.timestamp)===t));return n?["Anomaly: ".concat(n.message)]:[]}}}},scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!1,title:{display:!0,text:m},grid:{color:"rgba(156, 163, 175, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}},v=(()=>{if(!h.some((e=>e.upperBound&&e.lowerBound)))return null;const e=h.filter((e=>e.upperBound&&e.lowerBound)).map((e=>(e.upperBound-e.lowerBound)/e.value)),t=e.reduce(((e,t)=>e+t),0)/e.length,n=Math.max(0,Math.min(100,100-50*t));return Math.round(n)})();return(0,r.jsxs)(s.Zb,{children:[(0,r.jsxs)(s.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(s.ll,{children:t}),n&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:n})]}),null!==v&&(0,r.jsxs)(l.C,{variant:"outline",className:"flex items-center gap-1",children:[(0,r.jsx)(u.Z,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:["Prediction Accuracy: ",v,"%"]})]})]}),(0,r.jsxs)(s.aY,{children:[(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(a.x1,{data:x,options:y})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Insights"}),(0,r.jsxs)("div",{className:"space-y-2",children:[h.length>0&&(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Forecast: "}),h[h.length-1].value>d[d.length-1].value?"".concat(p," is predicted to increase by ").concat((100*(h[h.length-1].value/d[d.length-1].value-1)).toFixed(1),"% in the next ").concat("hourly"===b?"hours":"days","."):"".concat(p," is predicted to decrease by ").concat((100*(1-h[h.length-1].value/d[d.length-1].value)).toFixed(1),"% in the next ").concat("hourly"===b?"hours":"days",".")]}),f.length>0&&(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Anomalies: "}),"Detected ".concat(f.length," anomalies in the data.")]})]})]})]})]})}},8031:function(e,t,n){n.d(t,{LV:function(){return l},bc:function(){return i},lt:function(){return o},sO:function(){return s},wD:function(){return c},zm:function(){return a}});var r=n(2265);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{reconnect:n=!0,reconnectInterval:s=5e3,reconnectAttempts:a=5,heartbeat:o=!0,heartbeatInterval:i=3e4,queue:c=!1}=t,[l,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),b=(0,r.useRef)(null),g=(0,r.useRef)(0),x=(0,r.useRef)(null),y=(0,r.useRef)(null),v=(0,r.useRef)(null),w=(0,r.useCallback)((()=>{x.current&&(clearInterval(x.current),x.current=null),y.current&&(clearTimeout(y.current),y.current=null)}),[]),N=(0,r.useCallback)((()=>{o&&b.current&&(x.current=setInterval((()=>{var e;(null===(e=b.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&b.current.send(JSON.stringify({type:"ping"}))}),i))}),[o,i]),j=(0,r.useCallback)((()=>{try{const r="https:"===window.location.protocol?"wss:":"ws:",o=window.location.host,i=e.startsWith("/")?"".concat(r,"//").concat(o).concat(e):e;b.current=new WebSocket(i),b.current.onopen=()=>{p(!0),f(null),g.current=0,N()},b.current.onmessage=e=>{try{const n=JSON.parse(e.data);"pong"!==n.type&&(t.queue?d.enqueue(n):u(n))}catch(n){const r=e.data;t.queue?d.enqueue(r):u(r)}},b.current.onerror=e=>{f(new Error("WebSocket error"))},b.current.onclose=()=>{p(!1),w(),n&&g.current<a&&(g.current++,y.current=setTimeout((()=>{j()}),s))}}catch(r){f(r)}}),[e,n,s,a,N,w]),k=(0,r.useCallback)((e=>{var t;(null===(t=b.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&b.current.send("string"===typeof e?e:JSON.stringify(e))}),[]),C=(0,r.useCallback)((()=>{var e;w(),g.current=a,null===(e=b.current)||void 0===e||e.close()}),[a,w]),R=(0,r.useCallback)((()=>{g.current=0,C(),setTimeout(j,100)}),[C,j]);return(0,r.useEffect)((()=>(j(),c&&(v.current=d.subscribe((e=>{u(e)}))),()=>{var e;w(),null===(e=b.current)||void 0===e||e.close(),v.current&&(v.current(),v.current=null)})),[j,w,c]),{data:l,isConnected:h,error:m,send:k,close:C,reconnect:R}}function a(){return s("/api/ws/monitoring",{heartbeatInterval:2e4})}function o(){return s("/api/ws/network/topology",{heartbeatInterval:15e3,reconnectAttempts:8})}function i(){return s("/api/ws/network/bandwidth",{heartbeatInterval:5e3,reconnectAttempts:12})}function c(){return s("/api/ws/ai/predictions",{heartbeatInterval:3e4,reconnectAttempts:6})}function l(){return s("/api/ws/fabric/global",{heartbeatInterval:2e4,reconnectAttempts:10})}const u=new class{getConnection(e){if(this.connections.has(e))return this.connections.get(e)||null;if(this.connections.size>=this.maxConnections){const e=this.connections.keys().next().value,t=this.connections.get(e);t&&(t.close(),this.connections.delete(e))}try{const t=new WebSocket(e);return this.connections.set(e,t),t}catch(t){return null}}closeConnection(e){const t=this.connections.get(e);t&&(t.close(),this.connections.delete(e))}closeAllConnections(){this.connections.forEach((e=>e.close())),this.connections.clear()}constructor(){this.connections=new Map,this.maxConnections=10}};const d=new class{start(){this.processor||(this.processor=setInterval((()=>{this.processQueue()}),this.processingInterval))}stop(){this.processor&&(clearInterval(this.processor),this.processor=null)}enqueue(e){0!==this.subscribers.length&&(this.queue.push({timestamp:Date.now(),data:e}),this.queue.length>this.maxSize&&this.queue.shift())}processQueue(){if(0===this.queue.length||0===this.subscribers.length)return;this.queue.splice(0,Math.min(10,this.queue.length)).forEach((e=>{let{data:t}=e;this.subscribers.forEach((e=>e(t)))}))}subscribe(e){return this.subscribers.push(e),1!==this.subscribers.length||this.processor||this.start(),()=>{const t=this.subscribers.indexOf(e);t>-1&&this.subscribers.splice(t,1),0===this.subscribers.length&&this.stop()}}constructor(){this.queue=[],this.maxSize=1e3,this.processingInterval=100,this.processor=null,this.subscribers=[]}};window.addEventListener("beforeunload",(()=>{d.stop(),u.closeAllConnections()}))}}]);