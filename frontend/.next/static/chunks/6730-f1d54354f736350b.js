"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6730],{90926:function(e,t,l){l.d(t,{O:function(){return i}});var s=l(57437),n=(l(2265),l(10609)),c=l(6599);const r=["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],i=e=>{let{data:t,title:l,description:i,colorScale:a=r,xAxisLabel:o="Time",yAxisLabel:d="Resource"}=e;const x=Array.from(new Set(t.map((e=>e.resourceId)))).sort(),h=Array.from(new Set(t.map((e=>e.timestamp)))).sort(),f=t.map((e=>e.value)),u=Math.min(...f),m=Math.max(...f),v=e=>{const t=(e-u)/(m-u),l=Math.min(Math.floor(t*a.length),a.length-1);return a[l]},j=e=>(0,c.Z)(new Date(e),"HH:mm"),g=100/h.length;return(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:l}),i&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:i})]}),(0,s.jsx)(n.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("div",{className:"min-w-max",children:[(0,s.jsxs)("div",{className:"flex mb-2",children:[(0,s.jsx)("div",{className:"w-24 flex-shrink-0"}),(0,s.jsx)("div",{className:"flex-grow text-center text-sm font-medium text-muted-foreground",children:o})]}),(0,s.jsxs)("div",{className:"flex mb-2",children:[(0,s.jsx)("div",{className:"w-24 flex-shrink-0 text-right pr-2 text-sm font-medium text-muted-foreground",children:d}),(0,s.jsx)("div",{className:"flex-grow flex",children:h.map(((e,t)=>(0,s.jsx)("div",{className:"text-xs text-center",style:{width:"".concat(g,"%")},children:j(e)},"timestamp-".concat(t))))})]}),(0,s.jsx)("div",{children:x.map(((e,l)=>(0,s.jsxs)("div",{className:"flex mb-1",children:[(0,s.jsx)("div",{className:"w-24 flex-shrink-0 text-right pr-2 text-xs truncate",title:e,children:e}),(0,s.jsx)("div",{className:"flex-grow flex",children:h.map(((n,c)=>{const r=t.find((t=>t.resourceId===e&&t.timestamp===n)),i=r?r.value:0;return(0,s.jsx)("div",{className:"border border-gray-100 dark:border-gray-800 rounded-sm",style:{width:"".concat(g,"%"),height:"".concat(30,"px"),backgroundColor:v(i),cursor:"pointer"},title:"".concat(e,": ").concat(i.toFixed(2)," at ").concat(j(n))},"cell-".concat(l,"-").concat(c))}))})]},"resource-".concat(l))))}),(0,s.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,s.jsx)("span",{className:"text-xs mr-2",children:"Low"}),(0,s.jsx)("div",{className:"flex h-2",children:a.map(((e,t)=>(0,s.jsx)("div",{style:{backgroundColor:e,width:"20px",height:"100%"}},"legend-".concat(t))))}),(0,s.jsx)("span",{className:"text-xs ml-2",children:"High"})]})]})})})]})}},657:function(e,t,l){l.d(t,{z:function(){return i}});var s=l(57437),n=l(2265),c=l(10609),r=l(41735);const i=e=>{let{data:t,title:l="Resource Utilization",description:i,height:a=400,colorMode:o="value",valueFormat:d=(e=>"".concat(e.toFixed(1),"%")),onNodeClick:x}=e;const h=(0,n.useRef)(null),[f,u]=n.useState("usage"),m=["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],v={vm:"#4f46e5",host:"#0891b2",storage:"#7c3aed",network:"#2563eb",service:"#059669",default:"#6b7280"},j=(e,t,l)=>{const s=l>t?(e-t)/(l-t):.5,n=Math.min(Math.floor(s*m.length),m.length-1);return m[n]},g=e=>{const t=(e.id+e.name).toLowerCase();for(const[l,s]of Object.entries(v))if(t.includes(l))return s;return v.default},p=e=>{const t=[e];return e.children&&e.children.forEach((e=>{t.push(...p(e))})),t},y=(e,t,l,s,n,c,r)=>{if(!e.children||0===e.children.length)return{...e,x0:t,y0:l,x1:s,y1:n,color:e.color||("value"===o?j(e.value,c,r):g(e)),children:void 0};const i=e.children.reduce(((e,t)=>e+t.value),0),a=[...e.children].sort(((e,t)=>t.value-e.value));let d=t,x=l;const h=s-t,f=n-l,u=h>f,m=a.map((e=>{const a=e.value/i*(u?h:f);let o,m,v,j;return u?(o=d,m=l,v=d+a,j=n,d+=a):(o=t,m=x,v=s,j=x+a,x+=a),y(e,o,m,v,j,c,r)}));return{...e,x0:t,y0:l,x1:s,y1:n,children:m,color:e.color||("value"===o?j(e.value,c,r):g(e))}};return(0,n.useEffect)((()=>{if(!h.current||!t)return;const e=h.current,l=e.getContext("2d");if(!l)return;e.width=e.clientWidth,e.height=e.clientHeight;const s=p(t).map((e=>e.value)),n=Math.min(...s),c=Math.max(...s),r=y(t,0,0,e.width,e.height,n,c),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=2;l.fillStyle=e.color,l.fillRect(e.x0+s,e.y0+s,e.x1-e.x0-2*s,e.y1-e.y0-2*s),l.strokeStyle="#ffffff",l.lineWidth=1,l.strokeRect(e.x0+s,e.y0+s,e.x1-e.x0-2*s,e.y1-e.y0-2*s);const n=e.x1-e.x0,c=e.y1-e.y0;if(n>60&&c>30){const t=Math.min(14,Math.max(10,Math.floor(n/10)));l.font="".concat(t,"px sans-serif"),l.fillStyle="#ffffff",l.textAlign="center",l.textBaseline="middle";const c=(e.x0+e.x1)/2,r=(e.y0+e.y1)/2-t/2;l.fillText(e.name,c,r,n-4*s),l.font="".concat(t-2,"px sans-serif"),l.fillText(d(e.value),c,r+t,n-4*s)}e.children&&e.children.forEach((e=>{i(e,t+1)}))};l.clearRect(0,0,e.width,e.height),i(r);const a=t=>{const l=e.getBoundingClientRect(),s=t.clientX-l.left,n=t.clientY-l.top,c=e=>{if(s>=e.x0&&s<=e.x1&&n>=e.y0&&n<=e.y1){if(e.children)for(const t of e.children){const e=c(t);if(e)return e}return e}return null},i=c(r);if(i&&x){var a;const e={id:i.id,name:i.name,value:i.value,children:null===(a=i.children)||void 0===a?void 0:a.map((e=>({id:e.id,name:e.name,value:e.value})))};x(e)}};return e.addEventListener("click",a),()=>{e.removeEventListener("click",a)}}),[t,o,d,x]),(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.ll,{children:l}),i&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:i})]}),(0,s.jsxs)(r.Ph,{value:f,onValueChange:u,children:[(0,s.jsx)(r.i4,{className:"w-[180px]",children:(0,s.jsx)(r.ki,{placeholder:"Metric"})}),(0,s.jsxs)(r.Bw,{children:[(0,s.jsx)(r.Ql,{value:"usage",children:"Usage %"}),(0,s.jsx)(r.Ql,{value:"iops",children:"IOPS"}),(0,s.jsx)(r.Ql,{value:"latency",children:"Latency"})]})]})]}),(0,s.jsxs)(c.aY,{children:[(0,s.jsx)("div",{className:"relative",style:{height:"".concat(a,"px")},children:(0,s.jsx)("canvas",{ref:h,className:"w-full h-full"})}),(0,s.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-full h-2 bg-gradient-to-r from-[#f7fbff] to-[#084594] rounded mr-2",style:{width:"100px"}}),(0,s.jsx)("span",{className:"text-xs",children:"Resource Utilization"})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Click on a section to view details"})]})]})]})}}}]);