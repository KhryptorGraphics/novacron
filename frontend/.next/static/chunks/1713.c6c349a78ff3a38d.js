"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1713],{41735:function(e,t,n){n.d(t,{Bw:function(){return d},Ph:function(){return u},Ql:function(){return p},i4:function(){return h},ki:function(){return l}});var r=n(57437),s=n(2265),c=n(32544),o=n(83523),i=n(62442),a=n(60345);const u=c.fC,l=(c.ZA,c.B4),h=s.forwardRef(((e,t)=>{let{className:n,children:s,...i}=e;return(0,r.jsxs)(c.xz,{ref:t,className:(0,a.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...i,children:[s,(0,r.jsx)(c.JO,{asChild:!0,children:(0,r.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})}));h.displayName=c.xz.displayName;const d=s.forwardRef(((e,t)=>{let{className:n,children:s,position:o="popper",...i}=e;return(0,r.jsx)(c.h_,{children:(0,r.jsx)(c.VY,{ref:t,className:(0,a.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===o&&"translate-y-1",n),position:o,...i,children:(0,r.jsx)(c.l_,{className:(0,a.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})}));d.displayName=c.VY.displayName;s.forwardRef(((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(c.__,{ref:t,className:(0,a.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...s})})).displayName=c.__.displayName;const p=s.forwardRef(((e,t)=>{let{className:n,children:s,...o}=e;return(0,r.jsxs)(c.ck,{ref:t,className:(0,a.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(c.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(c.eT,{children:s})]})}));p.displayName=c.ck.displayName;s.forwardRef(((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(c.Z0,{ref:t,className:(0,a.cn)("-mx-1 my-1 h-px bg-muted",n),...s})})).displayName=c.Z0.displayName},8031:function(e,t,n){n.d(t,{LV:function(){return u},bc:function(){return i},lt:function(){return o},sO:function(){return s},wD:function(){return a},zm:function(){return c}});var r=n(2265);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{reconnect:n=!0,reconnectInterval:s=5e3,reconnectAttempts:c=5,heartbeat:o=!0,heartbeatInterval:i=3e4,queue:a=!1}=t,[u,l]=(0,r.useState)(null),[d,p]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),m=(0,r.useRef)(null),w=(0,r.useRef)(0),g=(0,r.useRef)(null),v=(0,r.useRef)(null),x=(0,r.useRef)(null),y=(0,r.useCallback)((()=>{g.current&&(clearInterval(g.current),g.current=null),v.current&&(clearTimeout(v.current),v.current=null)}),[]),N=(0,r.useCallback)((()=>{o&&m.current&&(g.current=setInterval((()=>{var e;(null===(e=m.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&m.current.send(JSON.stringify({type:"ping"}))}),i))}),[o,i]),k=(0,r.useCallback)((()=>{try{const r="https:"===window.location.protocol?"wss:":"ws:",o=window.location.host,i=e.startsWith("/")?"".concat(r,"//").concat(o).concat(e):e;m.current=new WebSocket(i),m.current.onopen=()=>{p(!0),b(null),w.current=0,N()},m.current.onmessage=e=>{try{const n=JSON.parse(e.data);"pong"!==n.type&&(t.queue?h.enqueue(n):l(n))}catch(n){const r=e.data;t.queue?h.enqueue(r):l(r)}},m.current.onerror=e=>{b(new Error("WebSocket error"))},m.current.onclose=()=>{p(!1),y(),n&&w.current<c&&(w.current++,v.current=setTimeout((()=>{k()}),s))}}catch(r){b(r)}}),[e,n,s,c,N,y]),C=(0,r.useCallback)((e=>{var t;(null===(t=m.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&m.current.send("string"===typeof e?e:JSON.stringify(e))}),[]),j=(0,r.useCallback)((()=>{var e;y(),w.current=c,null===(e=m.current)||void 0===e||e.close()}),[c,y]),S=(0,r.useCallback)((()=>{w.current=0,j(),setTimeout(k,100)}),[j,k]);return(0,r.useEffect)((()=>(k(),a&&(x.current=h.subscribe((e=>{l(e)}))),()=>{var e;y(),null===(e=m.current)||void 0===e||e.close(),x.current&&(x.current(),x.current=null)})),[k,y,a]),{data:u,isConnected:d,error:f,send:C,close:j,reconnect:S}}function c(){return s("/api/ws/monitoring",{heartbeatInterval:2e4})}function o(){return s("/api/ws/network/topology",{heartbeatInterval:15e3,reconnectAttempts:8})}function i(){return s("/api/ws/network/bandwidth",{heartbeatInterval:5e3,reconnectAttempts:12})}function a(){return s("/api/ws/ai/predictions",{heartbeatInterval:3e4,reconnectAttempts:6})}function u(){return s("/api/ws/fabric/global",{heartbeatInterval:2e4,reconnectAttempts:10})}const l=new class{getConnection(e){if(this.connections.has(e))return this.connections.get(e)||null;if(this.connections.size>=this.maxConnections){const e=this.connections.keys().next().value,t=this.connections.get(e);t&&(t.close(),this.connections.delete(e))}try{const t=new WebSocket(e);return this.connections.set(e,t),t}catch(t){return null}}closeConnection(e){const t=this.connections.get(e);t&&(t.close(),this.connections.delete(e))}closeAllConnections(){this.connections.forEach((e=>e.close())),this.connections.clear()}constructor(){this.connections=new Map,this.maxConnections=10}};const h=new class{start(){this.processor||(this.processor=setInterval((()=>{this.processQueue()}),this.processingInterval))}stop(){this.processor&&(clearInterval(this.processor),this.processor=null)}enqueue(e){0!==this.subscribers.length&&(this.queue.push({timestamp:Date.now(),data:e}),this.queue.length>this.maxSize&&this.queue.shift())}processQueue(){if(0===this.queue.length||0===this.subscribers.length)return;this.queue.splice(0,Math.min(10,this.queue.length)).forEach((e=>{let{data:t}=e;this.subscribers.forEach((e=>e(t)))}))}subscribe(e){return this.subscribers.push(e),1!==this.subscribers.length||this.processor||this.start(),()=>{const t=this.subscribers.indexOf(e);t>-1&&this.subscribers.splice(t,1),0===this.subscribers.length&&this.stop()}}constructor(){this.queue=[],this.maxSize=1e3,this.processingInterval=100,this.processor=null,this.subscribers=[]}};window.addEventListener("beforeunload",(()=>{h.stop(),l.closeAllConnections()}))}}]);