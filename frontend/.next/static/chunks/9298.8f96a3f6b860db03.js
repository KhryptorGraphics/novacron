"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9298,1713],{35157:function(e,s,t){t.d(s,{Z:function(){return a}});const a=(0,t(62898).Z)("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]])},94900:function(e,s,t){t.d(s,{Z:function(){return a}});const a=(0,t(62898).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},23086:function(e,s,t){t.d(s,{Z:function(){return a}});const a=(0,t(62898).Z)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]])},36357:function(e,s,t){t.d(s,{Z:function(){return a}});const a=(0,t(62898).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]])},31541:function(e,s,t){t.d(s,{Z:function(){return a}});const a=(0,t(62898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},19950:function(e,s,t){t.d(s,{Cd:function(){return o},X:function(){return d},bZ:function(){return i}});var a=t(57437),n=t(2265),r=t(96061),l=t(60345);const c=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=n.forwardRef(((e,s)=>{let{className:t,variant:n,...r}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(c({variant:n}),t),...r})}));i.displayName="Alert";const o=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...n})}));o.displayName="AlertTitle";const d=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...n})}));d.displayName="AlertDescription"},31472:function(e,s,t){t.d(s,{$N:function(){return f},Be:function(){return p},Vq:function(){return i},cN:function(){return h},cZ:function(){return m},fK:function(){return x},hg:function(){return o}});var a=t(57437),n=t(2265),r=t(28712),l=t(82549),c=t(60345);const i=r.fC,o=r.xz,d=r.h_,u=(r.x8,n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.aV,{ref:s,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})})));u.displayName=r.aV.displayName;const m=n.forwardRef(((e,s)=>{let{className:t,children:n,...i}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(r.VY,{ref:s,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[n,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));m.displayName=r.VY.displayName;const x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};x.displayName="DialogHeader";const h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};h.displayName="DialogFooter";const f=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.Dx,{ref:s,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})}));f.displayName=r.Dx.displayName;const p=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.dk,{ref:s,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})}));p.displayName=r.dk.displayName},6429:function(e,s,t){t.d(s,{_:function(){return o}});var a=t(57437),n=t(2265),r=t(36743),l=t(96061),c=t(60345);const i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.f,{ref:s,className:(0,c.cn)(i(),t),...n})}));o.displayName=r.f.displayName},41735:function(e,s,t){t.d(s,{Bw:function(){return m},Ph:function(){return o},Ql:function(){return x},i4:function(){return u},ki:function(){return d}});var a=t(57437),n=t(2265),r=t(32544),l=t(83523),c=t(62442),i=t(60345);const o=r.fC,d=(r.ZA,r.B4),u=n.forwardRef(((e,s)=>{let{className:t,children:n,...c}=e;return(0,a.jsxs)(r.xz,{ref:s,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...c,children:[n,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})}));u.displayName=r.xz.displayName;const m=n.forwardRef(((e,s)=>{let{className:t,children:n,position:l="popper",...c}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsx)(r.VY,{ref:s,className:(0,i.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===l&&"translate-y-1",t),position:l,...c,children:(0,a.jsx)(r.l_,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n})})})}));m.displayName=r.VY.displayName;n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.__,{ref:s,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})})).displayName=r.__.displayName;const x=n.forwardRef(((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(r.ck,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:n})]})}));x.displayName=r.ck.displayName;n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...n})})).displayName=r.Z0.displayName},47461:function(e,s,t){t.d(s,{SP:function(){return o},dr:function(){return i},mQ:function(){return c},nU:function(){return d}});var a=t(57437),n=t(2265),r=t(34522),l=t(60345);const c=r.fC,i=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.aV,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})}));i.displayName=r.aV.displayName;const o=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})}));o.displayName=r.xz.displayName;const d=n.forwardRef(((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})}));d.displayName=r.VY.displayName},54366:function(e,s,t){t.r(s),t.d(s,{default:function(){return F}});var a=t(57437),n=t(2265),r=t(10609),l=t(3089),c=t(40150),i=t(20985),o=t(47461),d=t(41735),u=t(19950),m=t(31472),x=t(6429),h=t(13008),f=t(36357),p=t(6141),j=t(62898);const v=(0,j.Z)("MoveHorizontal",[["polyline",{points:"18 8 22 12 18 16",key:"1hqrds"}],["polyline",{points:"6 8 2 12 6 16",key:"f0ernq"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}]]);var g=t(11981),N=t(29409),y=t(90998),b=t(55458),w=t(87074),k=t(35157),C=t(469),S=t(11392),Z=t(94900),z=t(23086);const A=(0,j.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),V=(0,j.Z)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);var M=t(99670),R=t(56224),P=t(35817),O=t(31541),q=t(45367),E=t(8031),U=t(39333),B=t(38227),D=t(16573),Q=t(24235),I=t(50039),Y=t(96531),_=t(82816),T=t(84051),L=t(90519),K=t(36612);var F=()=>{var e,s,t,j,F;const[G,H]=(0,n.useState)([]),[W,J]=(0,n.useState)(null),[X,$]=(0,n.useState)("all"),[ee,se]=(0,n.useState)("name"),[te,ae]=(0,n.useState)([]),[ne,re]=(0,n.useState)(""),[le,ce]=(0,n.useState)(!1),[ie,oe]=(0,n.useState)({open:!1,action:"",vm:null}),{data:de,isConnected:ue}=(0,E.sO)("/api/ws/vms");(0,n.useEffect)((()=>{de&&H(de.vms||[])}),[de]),(0,n.useEffect)((()=>{H([{id:"vm-001",name:"web-server-01",status:"running",host:"host-01",resources:{cpu:{cores:4,usage:45},memory:{allocated:8192,used:6144},disk:{allocated:100,used:45},network:{rx:1024,tx:512}},os:"Ubuntu 22.04 LTS",ipAddress:"192.168.1.101",uptime:86400,lastBackup:"2 hours ago",tags:["production","web"],alerts:0},{id:"vm-002",name:"database-01",status:"running",host:"host-02",resources:{cpu:{cores:8,usage:75},memory:{allocated:16384,used:14336},disk:{allocated:500,used:350},network:{rx:2048,tx:1024}},os:"PostgreSQL 15",ipAddress:"192.168.1.102",uptime:172800,lastBackup:"1 hour ago",tags:["production","database"],alerts:1},{id:"vm-003",name:"dev-environment",status:"stopped",host:"host-01",resources:{cpu:{cores:2,usage:0},memory:{allocated:4096,used:0},disk:{allocated:50,used:20},network:{rx:0,tx:0}},os:"Debian 11",ipAddress:"192.168.1.103",uptime:0,lastBackup:"1 day ago",tags:["development"],alerts:0}]),ae([{id:"host-02",name:"host-02.datacenter.local",available:!0,resources:{cpuAvailable:16,memoryAvailable:32768,diskAvailable:1e3},load:45},{id:"host-03",name:"host-03.datacenter.local",available:!0,resources:{cpuAvailable:8,memoryAvailable:16384,diskAvailable:500},load:30}])}),[]);const me=e=>{switch(e){case"running":return"bg-green-500";case"stopped":default:return"bg-gray-500";case"paused":return"bg-yellow-500";case"migrating":return"bg-blue-500";case"error":return"bg-red-500"}},xe=e=>{switch(e){case"running":return(0,a.jsx)(h.Z,{className:"h-4 w-4"});case"stopped":return(0,a.jsx)(f.Z,{className:"h-4 w-4"});case"paused":return(0,a.jsx)(p.Z,{className:"h-4 w-4"});case"migrating":return(0,a.jsx)(v,{className:"h-4 w-4"});case"error":return(0,a.jsx)(g.Z,{className:"h-4 w-4"});default:return null}},he=G.filter((e=>"all"===X||("running"===X?"running"===e.status:"stopped"===X?"stopped"===e.status:"alerts"!==X||e.alerts>0))).sort(((e,s)=>"name"===ee?e.name.localeCompare(s.name):"status"===ee?e.status.localeCompare(s.status):"cpu"===ee?s.resources.cpu.usage-e.resources.cpu.usage:"memory"===ee?s.resources.memory.used-e.resources.memory.used:0)),fe=[{name:"CPU",value:65,fill:"#3b82f6"},{name:"Memory",value:75,fill:"#10b981"},{name:"Disk",value:45,fill:"#f59e0b"},{name:"Network",value:30,fill:"#8b5cf6"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"VM Operations"}),(0,a.jsxs)(c.C,{variant:"outline",className:ue?"bg-green-50":"bg-red-50",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full mr-2 ".concat(ue?"bg-green-500":"bg-red-500"," animate-pulse")}),ue?"Live":"Disconnected"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(d.Ph,{value:X,onValueChange:$,children:[(0,a.jsx)(d.i4,{className:"w-[140px]",children:(0,a.jsx)(d.ki,{placeholder:"Filter"})}),(0,a.jsxs)(d.Bw,{children:[(0,a.jsx)(d.Ql,{value:"all",children:"All VMs"}),(0,a.jsx)(d.Ql,{value:"running",children:"Running"}),(0,a.jsx)(d.Ql,{value:"stopped",children:"Stopped"}),(0,a.jsx)(d.Ql,{value:"alerts",children:"With Alerts"})]})]}),(0,a.jsxs)(d.Ph,{value:ee,onValueChange:se,children:[(0,a.jsx)(d.i4,{className:"w-[140px]",children:(0,a.jsx)(d.ki,{placeholder:"Sort by"})}),(0,a.jsxs)(d.Bw,{children:[(0,a.jsx)(d.Ql,{value:"name",children:"Name"}),(0,a.jsx)(d.Ql,{value:"status",children:"Status"}),(0,a.jsx)(d.Ql,{value:"cpu",children:"CPU Usage"}),(0,a.jsx)(d.Ql,{value:"memory",children:"Memory Usage"})]})]}),(0,a.jsx)(l.z,{variant:"outline",size:"icon",children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total VMs"}),(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:G.length}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[G.filter((e=>"running"===e.status)).length," running"]})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"CPU Usage"}),(0,a.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:"65%"}),(0,a.jsx)(i.E,{value:65,className:"h-2 mt-2"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Memory Usage"}),(0,a.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:"75%"}),(0,a.jsx)(i.E,{value:75,className:"h-2 mt-2"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Active Alerts"}),(0,a.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:G.reduce(((e,s)=>e+s.alerts),0)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Across ",G.filter((e=>e.alerts>0)).length," VMs"]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2 space-y-4",children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Virtual Machines"}),(0,a.jsx)(r.SZ,{children:"Manage and monitor your VM fleet"})]}),(0,a.jsx)(r.aY,{className:"space-y-4",children:he.map((e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:bg-accent cursor-pointer transition-colors ".concat((null===W||void 0===W?void 0:W.id)===e.id?"ring-2 ring-primary":""),onClick:()=>J(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),(0,a.jsxs)(c.C,{variant:"outline",className:"".concat(me(e.status)," text-white"),children:[xe(e.status),(0,a.jsx)("span",{className:"ml-1",children:e.status})]}),e.alerts>0&&(0,a.jsxs)(c.C,{variant:"destructive",children:[e.alerts," Alert",e.alerts>1?"s":""]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"CPU"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.resources.cpu.usage,"%"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Memory"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(w.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"font-medium",children:[(e.resources.memory.used/1024).toFixed(1),"GB"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Disk"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(C.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.resources.disk.used,"GB"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Network"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"font-medium",children:["\u2193",e.resources.network.rx," \u2191",e.resources.network.tx]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:e.os}),(0,a.jsx)("span",{children:e.ipAddress}),(0,a.jsxs)("span",{children:["Host: ",e.host]})]}),(0,a.jsx)("div",{className:"flex gap-1",children:e.tags.map((e=>(0,a.jsx)(c.C,{variant:"secondary",className:"text-xs",children:e},e)))})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:["stopped"===e.status?(0,a.jsx)(l.z,{size:"icon",variant:"ghost",onClick:s=>{s.stopPropagation(),oe({open:!0,action:"start",vm:e})},children:(0,a.jsx)(Z.Z,{className:"h-4 w-4"})}):(0,a.jsx)(l.z,{size:"icon",variant:"ghost",onClick:s=>{s.stopPropagation(),oe({open:!0,action:"stop",vm:e})},children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})}),(0,a.jsx)(l.z,{size:"icon",variant:"ghost",onClick:s=>{s.stopPropagation(),oe({open:!0,action:"restart",vm:e})},children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})}),(0,a.jsx)(l.z,{size:"icon",variant:"ghost",onClick:s=>{s.stopPropagation(),oe({open:!0,action:"migrate",vm:e})},children:(0,a.jsx)(v,{className:"h-4 w-4"})}),(0,a.jsx)(l.z,{size:"icon",variant:"ghost",children:(0,a.jsx)(A,{className:"h-4 w-4"})})]})]})},e.id)))})]})}),(0,a.jsx)("div",{className:"space-y-4",children:W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"VM Details"}),(0,a.jsx)(r.SZ,{children:W.name})]}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)(o.mQ,{defaultValue:"overview",children:[(0,a.jsxs)(o.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(o.SP,{value:"overview",children:"Overview"}),(0,a.jsx)(o.SP,{value:"performance",children:"Performance"}),(0,a.jsx)(o.SP,{value:"actions",children:"Actions"})]}),(0,a.jsxs)(o.nU,{value:"overview",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Status"}),(0,a.jsx)(c.C,{className:me(W.status),children:W.status})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Operating System"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:W.os})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"IP Address"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:W.ipAddress})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Host"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:W.host})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Uptime"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[Math.floor(W.uptime/86400),"d ",Math.floor(W.uptime%86400/3600),"h"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Last Backup"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:W.lastBackup})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold",children:"Resources"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsxs)("span",{children:["CPU (",W.resources.cpu.cores," cores)"]}),(0,a.jsxs)("span",{children:[W.resources.cpu.usage,"%"]})]}),(0,a.jsx)(i.E,{value:W.resources.cpu.usage,className:"h-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{children:"Memory"}),(0,a.jsxs)("span",{children:[(W.resources.memory.used/1024).toFixed(1),"/",(W.resources.memory.allocated/1024).toFixed(1),"GB"]})]}),(0,a.jsx)(i.E,{value:W.resources.memory.used/W.resources.memory.allocated*100,className:"h-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{children:"Disk"}),(0,a.jsxs)("span",{children:[W.resources.disk.used,"/",W.resources.disk.allocated,"GB"]})]}),(0,a.jsx)(i.E,{value:W.resources.disk.used/W.resources.disk.allocated*100,className:"h-2"})]})]})]})]}),(0,a.jsx)(o.nU,{value:"performance",children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Resource Usage (24h)"}),(0,a.jsx)(U.h,{width:"100%",height:200,children:(0,a.jsxs)(B.w,{data:[{time:"00:00",cpu:20,memory:40,network:10},{time:"04:00",cpu:35,memory:45,network:15},{time:"08:00",cpu:65,memory:60,network:45},{time:"12:00",cpu:80,memory:75,network:60},{time:"16:00",cpu:70,memory:70,network:50},{time:"20:00",cpu:45,memory:55,network:30},{time:"24:00",cpu:30,memory:45,network:20}],children:[(0,a.jsx)(D.q,{strokeDasharray:"3 3"}),(0,a.jsx)(Q.K,{dataKey:"time"}),(0,a.jsx)(I.B,{}),(0,a.jsx)(Y.u,{}),(0,a.jsx)(_.x,{type:"monotone",dataKey:"cpu",stroke:"#3b82f6",name:"CPU"}),(0,a.jsx)(_.x,{type:"monotone",dataKey:"memory",stroke:"#10b981",name:"Memory"}),(0,a.jsx)(_.x,{type:"monotone",dataKey:"network",stroke:"#f59e0b",name:"Network"})]})})]})})}),(0,a.jsxs)(o.nU,{value:"actions",className:"space-y-2",children:[(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(V,{className:"mr-2 h-4 w-4"}),"Open Console"]}),(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"View Logs"]}),(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),"Clone VM"]}),(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(P.Z,{className:"mr-2 h-4 w-4"}),"Create Snapshot"]}),(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),"Restore Snapshot"]}),(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",className:"text-red-600",children:[(0,a.jsx)(q.Z,{className:"mr-2 h-4 w-4"}),"Delete VM"]})]})]})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{className:"text-sm",children:"Resource Distribution"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)(U.h,{width:"100%",height:200,children:(0,a.jsxs)(T.u,{children:[(0,a.jsx)(L.b,{data:fe,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:e=>{let{name:s,percent:t}=e;return"".concat(s," ").concat((100*t).toFixed(0),"%")},children:fe.map(((e,s)=>(0,a.jsx)(K.b,{fill:e.fill},"cell-".concat(s))))}),(0,a.jsx)(Y.u,{})]})})})]})]}):(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"flex items-center justify-center h-[400px] text-muted-foreground",children:"Select a VM to view details"})})})]}),(0,a.jsx)(m.Vq,{open:ie.open,onOpenChange:e=>oe({...ie,open:e}),children:(0,a.jsxs)(m.cZ,{children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsx)(m.$N,{children:"migrate"===ie.action?"Migrate VM":"Confirm ".concat(ie.action)}),(0,a.jsx)(m.Be,{children:"migrate"===ie.action?"Select target host for ".concat(null===(e=ie.vm)||void 0===e?void 0:e.name):"Are you sure you want to ".concat(ie.action," ").concat(null===(s=ie.vm)||void 0===s?void 0:s.name,"?")})]}),"migrate"===ie.action&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{children:"Target Host"}),(0,a.jsxs)(d.Ph,{value:ne,onValueChange:re,children:[(0,a.jsx)(d.i4,{children:(0,a.jsx)(d.ki,{placeholder:"Select target host"})}),(0,a.jsx)(d.Bw,{children:te.map((e=>(0,a.jsx)(d.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)(c.C,{variant:"outline",className:"ml-2",children:[e.load,"% load"]})]})},e.id)))})]})]}),ne&&te.find((e=>e.id===ne))&&(0,a.jsx)(u.bZ,{children:(0,a.jsx)(u.X,{children:(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsx)("p",{children:"Available Resources:"}),(0,a.jsxs)("p",{children:["\u2022 CPU: ",null===(t=te.find((e=>e.id===ne)))||void 0===t?void 0:t.resources.cpuAvailable," cores"]}),(0,a.jsxs)("p",{children:["\u2022 Memory: ",((null===(j=te.find((e=>e.id===ne)))||void 0===j?void 0:j.resources.memoryAvailable)||0)/1024,"GB"]}),(0,a.jsxs)("p",{children:["\u2022 Disk: ",null===(F=te.find((e=>e.id===ne)))||void 0===F?void 0:F.resources.diskAvailable,"GB"]})]})})})]}),(0,a.jsxs)(m.cN,{children:[(0,a.jsx)(l.z,{variant:"outline",onClick:()=>oe({open:!1,action:"",vm:null}),children:"Cancel"}),(0,a.jsx)(l.z,{onClick:()=>{ie.vm&&("migrate"===ie.action?(async(e,s)=>{ce(!0);try{(await fetch("/api/vms/".concat(e.id,"/migrate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetHost:s})})).ok&&H((s=>s.map((s=>s.id===e.id?{...s,status:"migrating"}:s))))}catch(t){}finally{ce(!1),oe({open:!1,action:"",vm:null})}})(ie.vm,ne):(async(e,s)=>{ce(!0);try{(await fetch("/api/vms/".concat(s.id,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"}})).ok&&H((t=>t.map((t=>t.id===s.id?{...t,status:"start"===e?"running":"stop"===e?"stopped":t.status}:t))))}catch(t){}finally{ce(!1),oe({open:!1,action:"",vm:null})}})(ie.action,ie.vm))},disabled:"migrate"===ie.action&&!ne,children:le?"Processing...":"Confirm"})]})]})})]})}},8031:function(e,s,t){t.d(s,{LV:function(){return o},bc:function(){return c},lt:function(){return l},sO:function(){return n},wD:function(){return i},zm:function(){return r}});var a=t(2265);function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{reconnect:t=!0,reconnectInterval:n=5e3,reconnectAttempts:r=5,heartbeat:l=!0,heartbeatInterval:c=3e4,queue:i=!1}=s,[o,d]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),p=(0,a.useRef)(null),j=(0,a.useRef)(0),v=(0,a.useRef)(null),g=(0,a.useRef)(null),N=(0,a.useRef)(null),y=(0,a.useCallback)((()=>{v.current&&(clearInterval(v.current),v.current=null),g.current&&(clearTimeout(g.current),g.current=null)}),[]),b=(0,a.useCallback)((()=>{l&&p.current&&(v.current=setInterval((()=>{var e;(null===(e=p.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&p.current.send(JSON.stringify({type:"ping"}))}),c))}),[l,c]),w=(0,a.useCallback)((()=>{try{const a="https:"===window.location.protocol?"wss:":"ws:",l=window.location.host,c=e.startsWith("/")?"".concat(a,"//").concat(l).concat(e):e;p.current=new WebSocket(c),p.current.onopen=()=>{x(!0),f(null),j.current=0,b()},p.current.onmessage=e=>{try{const t=JSON.parse(e.data);"pong"!==t.type&&(s.queue?u.enqueue(t):d(t))}catch(t){const a=e.data;s.queue?u.enqueue(a):d(a)}},p.current.onerror=e=>{f(new Error("WebSocket error"))},p.current.onclose=()=>{x(!1),y(),t&&j.current<r&&(j.current++,g.current=setTimeout((()=>{w()}),n))}}catch(a){f(a)}}),[e,t,n,r,b,y]),k=(0,a.useCallback)((e=>{var s;(null===(s=p.current)||void 0===s?void 0:s.readyState)===WebSocket.OPEN&&p.current.send("string"===typeof e?e:JSON.stringify(e))}),[]),C=(0,a.useCallback)((()=>{var e;y(),j.current=r,null===(e=p.current)||void 0===e||e.close()}),[r,y]),S=(0,a.useCallback)((()=>{j.current=0,C(),setTimeout(w,100)}),[C,w]);return(0,a.useEffect)((()=>(w(),i&&(N.current=u.subscribe((e=>{d(e)}))),()=>{var e;y(),null===(e=p.current)||void 0===e||e.close(),N.current&&(N.current(),N.current=null)})),[w,y,i]),{data:o,isConnected:m,error:h,send:k,close:C,reconnect:S}}function r(){return n("/api/ws/monitoring",{heartbeatInterval:2e4})}function l(){return n("/api/ws/network/topology",{heartbeatInterval:15e3,reconnectAttempts:8})}function c(){return n("/api/ws/network/bandwidth",{heartbeatInterval:5e3,reconnectAttempts:12})}function i(){return n("/api/ws/ai/predictions",{heartbeatInterval:3e4,reconnectAttempts:6})}function o(){return n("/api/ws/fabric/global",{heartbeatInterval:2e4,reconnectAttempts:10})}const d=new class{getConnection(e){if(this.connections.has(e))return this.connections.get(e)||null;if(this.connections.size>=this.maxConnections){const e=this.connections.keys().next().value,s=this.connections.get(e);s&&(s.close(),this.connections.delete(e))}try{const s=new WebSocket(e);return this.connections.set(e,s),s}catch(s){return null}}closeConnection(e){const s=this.connections.get(e);s&&(s.close(),this.connections.delete(e))}closeAllConnections(){this.connections.forEach((e=>e.close())),this.connections.clear()}constructor(){this.connections=new Map,this.maxConnections=10}};const u=new class{start(){this.processor||(this.processor=setInterval((()=>{this.processQueue()}),this.processingInterval))}stop(){this.processor&&(clearInterval(this.processor),this.processor=null)}enqueue(e){0!==this.subscribers.length&&(this.queue.push({timestamp:Date.now(),data:e}),this.queue.length>this.maxSize&&this.queue.shift())}processQueue(){if(0===this.queue.length||0===this.subscribers.length)return;this.queue.splice(0,Math.min(10,this.queue.length)).forEach((e=>{let{data:s}=e;this.subscribers.forEach((e=>e(s)))}))}subscribe(e){return this.subscribers.push(e),1!==this.subscribers.length||this.processor||this.start(),()=>{const s=this.subscribers.indexOf(e);s>-1&&this.subscribers.splice(s,1),0===this.subscribers.length&&this.stop()}}constructor(){this.queue=[],this.maxSize=1e3,this.processingInterval=100,this.processor=null,this.subscribers=[]}};window.addEventListener("beforeunload",(()=>{u.stop(),d.closeAllConnections()}))},99808:function(e,s,t){var a=t(2265);var n="function"===typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e===1/s)||e!==e&&s!==s},r=a.useState,l=a.useEffect,c=a.useLayoutEffect,i=a.useDebugValue;function o(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!n(e,t)}catch(a){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),a=r({inst:{value:t,getSnapshot:s}}),n=a[0].inst,d=a[1];return c((function(){n.value=t,n.getSnapshot=s,o(n)&&d({inst:n})}),[e,t,s]),l((function(){return o(n)&&d({inst:n}),e((function(){o(n)&&d({inst:n})}))}),[e]),i(t),t};s.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},26272:function(e,s,t){e.exports=t(99808)}}]);