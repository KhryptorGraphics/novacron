"use strict";exports.id=7478,exports.ids=[7478],exports.modules={7478:(e,t,a)=>{a.d(t,{q:()=>c});var l=a(30784),r=(a(9885),a(97040)),n=a(43223),o=a(18381),s=a(68571),i=a(73709),d=a(17133),u=a(34253);const c=({title:e,description:t,historicalData:a,predictedData:c,metricName:m,metricUnit:h,anomalies:p=[],timeGranularity:b="hourly"})=>{const g=e=>{const t=new Date(e);return"hourly"===b?(0,o.Z)(t,"HH:mm"):(0,o.Z)(t,"MMM dd")},x={labels:[...a.map((e=>g(e.timestamp))),...(()=>{const e=new Date(a[a.length-1].timestamp),t=[];for(let a=0;a<c.length;a++){const l="hourly"===b?(0,s.Z)(e,a+1):(0,i.Z)(e,a+1);t.push(g(l.toISOString()))}return t})()],datasets:[{label:`Historical ${m}`,data:[...a.map((e=>e.value)),...Array(c.length).fill(null)],borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,pointRadius:3,pointBackgroundColor:"rgba(59, 130, 246, 1)",tension:.4,fill:!1},{label:`Predicted ${m}`,data:[...Array(a.length).fill(null),...c.map((e=>e.value))],borderColor:"rgba(139, 92, 246, 1)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:2,borderDash:[5,5],pointRadius:3,pointBackgroundColor:"rgba(139, 92, 246, 1)",tension:.4,fill:!1},{label:"Upper Bound",data:[...Array(a.length).fill(null),...c.map((e=>e.upperBound||null))],borderColor:"rgba(139, 92, 246, 0.3)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:1,pointRadius:0,fill:"+1",tension:.4},{label:"Lower Bound",data:[...Array(a.length).fill(null),...c.map((e=>e.lowerBound||null))],borderColor:"rgba(139, 92, 246, 0.3)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:1,pointRadius:0,fill:!1,tension:.4},{label:"Anomalies",data:p.map((e=>{const t=[...a,...c].findIndex((t=>t.timestamp===e.timestamp));return t>=0?[...a,...c][t].value:null})),borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 1)",borderWidth:0,pointRadius:6,pointStyle:"triangle",pointRotation:180,showLine:!1}]},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,usePointStyle:!0}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){return`${e.dataset.label||""}: ${null!==e.parsed.y?`${e.parsed.y.toFixed(2)} ${h}`:"No data"}`},afterBody:function(e){e[0].dataIndex;const t=e[0].label,a=p.find((e=>g(e.timestamp)===t));return a?[`Anomaly: ${a.message}`]:[]}}}},scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!1,title:{display:!0,text:h},grid:{color:"rgba(156, 163, 175, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}},f=(()=>{if(!c.some((e=>e.upperBound&&e.lowerBound)))return null;const e=c.filter((e=>e.upperBound&&e.lowerBound)).map((e=>(e.upperBound-e.lowerBound)/e.value)),t=e.reduce(((e,t)=>e+t),0)/e.length,a=Math.max(0,Math.min(100,100-50*t));return Math.round(a)})();return(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsxs)("div",{children:[l.jsx(r.ll,{children:e}),t&&l.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),null!==f&&(0,l.jsxs)(d.C,{variant:"outline",className:"flex items-center gap-1",children:[l.jsx(u.Z,{className:"h-3 w-3"}),(0,l.jsxs)("span",{children:["Prediction Accuracy: ",f,"%"]})]})]}),(0,l.jsxs)(r.aY,{children:[l.jsx("div",{className:"h-80",children:l.jsx(n.x1,{data:x,options:y})}),(0,l.jsxs)("div",{className:"mt-4",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Insights"}),(0,l.jsxs)("div",{className:"space-y-2",children:[c.length>0&&(0,l.jsxs)("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:"Forecast: "}),c[c.length-1].value>a[a.length-1].value?`${m} is predicted to increase by ${(100*(c[c.length-1].value/a[a.length-1].value-1)).toFixed(1)}% in the next ${"hourly"===b?"hours":"days"}.`:`${m} is predicted to decrease by ${(100*(1-c[c.length-1].value/a[a.length-1].value)).toFixed(1)}% in the next ${"hourly"===b?"hours":"days"}.`]}),p.length>0&&(0,l.jsxs)("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:"Anomalies: "}),`Detected ${p.length} anomalies in the data.`]})]})]})]})]})}}};