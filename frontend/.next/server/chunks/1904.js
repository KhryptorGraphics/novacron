"use strict";exports.id=1904,exports.ids=[1904],exports.modules={91904:(t,e,s)=>{s.d(e,{R1:()=>a,sg:()=>i,x1:()=>r});const r=new class{constructor(){this.token=null,this.baseURL=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8090",this.wsURL=process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8091"}setToken(t){this.token=t}clearToken(){this.token=null}async request(t,e={}){const s=`${this.baseURL}${t}`,r={"Content-Type":"application/json",...e.headers||{}};this.token&&(r.Authorization=`Bearer ${this.token}`);const n=await fetch(s,{...e,headers:r});if(!n.ok){const t=await n.text();throw new Error(`API Error: ${n.status} - ${t}`)}return 204===n.status?{}:n.json()}async get(t){return this.request(t,{method:"GET"})}async post(t,e){return this.request(t,{method:"POST",body:e?JSON.stringify(e):null})}async put(t,e){return this.request(t,{method:"PUT",body:e?JSON.stringify(e):null})}async delete(t){return this.request(t,{method:"DELETE"})}connectWebSocket(t){try{const e=`${this.wsURL}${t}`,s=new WebSocket(e);return this.token&&s.addEventListener("open",(()=>{s.send(JSON.stringify({type:"auth",token:this.token}))})),s}catch(e){return null}}},n=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8090/api/v1";class o extends Error{constructor(t,e,s,r){super(s),this.status=t,this.code=e,this.url=r}}async function a(t,e,s){try{const r=function(t,e){const s=new URL(t,n),r=new URLSearchParams;if(e)for(const[n,o]of Object.entries(e))void 0!==o&&null!==o&&""!==o&&r.set(n,String(o));return s.search=r.toString(),s.toString()}(t,e),a=s?.role??"viewer",i=await fetch(r,{method:"GET",headers:{Accept:"application/json","X-Role":a},credentials:"include"});if(!i.ok)return{data:null,error:{code:`HTTP_${i.status}`,message:i.statusText}};const c=await i.json(),u=function(t){const e=t.headers.get("X-Pagination");if(e)try{return JSON.parse(e)}catch{return}}(i);if(u&&(c.pagination=u),c.error)throw new o(i.status,c.error.code,c.error.message,r);return c}catch(r){return{data:null,error:{code:"FETCH_ERROR",message:r instanceof Error?r.message:"Unknown error"}}}}async function i(t,e,s){const r=new URL(t,n).toString(),a=s?.role??"viewer",i=await fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Role":a},body:void 0!==e?JSON.stringify(e):void 0,credentials:"include"}),c=await i.json();if(c.error)throw new o(i.status,c.error.code,c.error.message,r);return c}}};