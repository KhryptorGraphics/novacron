"use strict";exports.id=1904,exports.ids=[1904],exports.modules={91904:(t,e,r)=>{r.d(e,{R1:()=>a,sg:()=>i,x1:()=>s});const s=new class{constructor(){this.token=null,this.baseURL=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8090",this.wsURL=process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8091"}setToken(t){this.token=t}clearToken(){this.token=null}async request(t,e={}){const r=`${this.baseURL}${t}`,s={"Content-Type":"application/json",...e.headers||{}};this.token&&(s.Authorization=`Bearer ${this.token}`);const n=await fetch(r,{...e,headers:s});if(!n.ok){const t=await n.text();throw new Error(`API Error: ${n.status} - ${t}`)}return 204===n.status?{}:n.json()}async get(t){return this.request(t,{method:"GET"})}async post(t,e){return this.request(t,{method:"POST",body:e?JSON.stringify(e):null})}async put(t,e){return this.request(t,{method:"PUT",body:e?JSON.stringify(e):null})}async delete(t){return this.request(t,{method:"DELETE"})}connectWebSocket(t){try{const e=`${this.wsURL}${t}`,r=new WebSocket(e);return this.token&&r.addEventListener("open",(()=>{r.send(JSON.stringify({type:"auth",token:this.token}))})),r}catch(e){return console.error("Failed to create WebSocket connection:",e),null}}},n=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8090/api/v1";class o extends Error{constructor(t,e,r,s){super(r),this.status=t,this.code=e,this.url=s}}async function a(t,e,r){try{const s=function(t,e){const r=new URL(t,n),s=new URLSearchParams;if(e)for(const[n,o]of Object.entries(e))void 0!==o&&null!==o&&""!==o&&s.set(n,String(o));return r.search=s.toString(),r.toString()}(t,e),a=r?.role??"viewer",i=await fetch(s,{method:"GET",headers:{Accept:"application/json","X-Role":a},credentials:"include"});if(!i.ok)return{data:null,error:{code:`HTTP_${i.status}`,message:i.statusText}};const c=await i.json(),u=function(t){const e=t.headers.get("X-Pagination");if(e)try{return JSON.parse(e)}catch{return}}(i);if(u&&(c.pagination=u),c.error)throw new o(i.status,c.error.code,c.error.message,s);return c}catch(s){return{data:null,error:{code:"FETCH_ERROR",message:s instanceof Error?s.message:"Unknown error"}}}}async function i(t,e,r){const s=new URL(t,n).toString(),a=r?.role??"viewer",i=await fetch(s,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Role":a},body:void 0!==e?JSON.stringify(e):void 0,credentials:"include"}),c=await i.json();if(c.error)throw new o(i.status,c.error.code,c.error.message,s);return c}}};