"use strict";exports.id=1920,exports.ids=[1920],exports.modules={21920:(e,t,s)=>{s.r(t),s.d(t,{NetworkTopology:()=>f});var i=s(30784),n=s(9885),r=s.n(n),a=s(97040),c=s(7950),l=s(17133),o=s(45304),h=s(63712),d=s(86078),x=s(89815),u=s(83475);const f=({data:e,title:t="Network Topology",description:s,height:f=400,showDistributed:m=!1,showBandwidth:g=!1,showPerformanceMetrics:y=!1,autoRefresh:p=!0,refreshInterval:v=5e3,onNodeClick:M,onEdgeClick:w,onClusterClick:b})=>{const j=(0,n.useRef)(null),N=(0,n.useRef)(),[k,E]=r().useState("force"),[S,C]=r().useState(null),[P,I]=r().useState(null),[L,z]=r().useState(!0),[W,D]=r().useState("medium"),[H,O]=r().useState(new Set),[T,A]=r().useState(m),[B,F]=r().useState(g),[q,Q]=r().useState(y);(0,n.useEffect)((()=>A(m)),[m]),(0,n.useEffect)((()=>F(g)),[g]),(0,n.useEffect)((()=>Q(y)),[y]);const{data:R,isConnected:$}=T?(0,h.lt)():{data:null,isConnected:!1},U=r().useMemo((()=>R&&T?R:e||{nodes:[],edges:[],clusters:[]}),[R,e,T]);return(0,n.useEffect)((()=>{if(!j.current||!U.nodes.length)return;const e=j.current,t=e.getContext("2d");if(!t)return;const s=()=>{const s=window.devicePixelRatio||1;e.width=Math.floor(e.clientWidth*s),e.height=Math.floor(e.clientHeight*s),e.style.width=e.clientWidth+"px",e.style.height=e.clientHeight+"px",t.scale(s,s)};window.addEventListener("resize",s),s();const i=new Map;(()=>{const t=e.clientWidth,s=e.clientHeight;U.nodes.forEach(((e,n)=>{let r,a;switch(k){case"circular":const i=n/U.nodes.length*2*Math.PI,c=.3*Math.min(t,s);r=t/2+Math.cos(i)*c,a=s/2+Math.sin(i)*c;break;case"hierarchical":new Map;let l=0;l="cluster"===e.type?0:"host"===e.type?1:"vm"===e.type?2:3;const o=U.nodes.filter((e=>{let t=0;return t="cluster"===e.type?0:"host"===e.type?1:"vm"===e.type?2:3,t===l})),h=o.findIndex((t=>t.id===e.id));r=t/(o.length+1)*(h+1),a=s/5*(l+1);break;case"geographic":const d={"us-east-1":{x:.8*t,y:.3*s},"us-west-2":{x:.2*t,y:.4*s},"eu-west-1":{x:.6*t,y:.2*s},"ap-southeast-1":{x:.9*t,y:.7*s}}[e.region];r=d?.x||Math.random()*t,a=d?.y||Math.random()*s;break;case"clustered":if(e.clusterId&&U.clusters){const i=U.clusters.find((t=>t.id===e.clusterId));i?.bounds?(r=i.bounds.x+Math.random()*i.bounds.width,a=i.bounds.y+Math.random()*i.bounds.height):(r=Math.random()*t,a=Math.random()*s)}else r=Math.random()*t,a=Math.random()*s;break;default:r=Math.random()*t,a=Math.random()*s}i.set(e.id,{x:r,y:a,vx:0,vy:0})}))})();const n={vm:"#4f46e5",host:"#0891b2",storage:"#7c3aed",network:"#2563eb",service:"#059669",cluster:"#f59e0b",federation:"#ec4899"},r={healthy:"#10b981",warning:"#f59e0b",error:"#ef4444",unknown:"#6b7280"},a={network:"rgba(37, 99, 235, 0.5)",storage:"rgba(124, 58, 237, 0.5)",dependency:"rgba(156, 163, 175, 0.5)",cluster:"rgba(245, 158, 11, 0.5)",federation:"rgba(236, 72, 153, 0.5)",migration:"rgba(34, 197, 94, 0.5)"},c=e=>{if(!B||!e.metrics?.bandwidth)return 1;const t=Math.max(1,Math.min(8,e.metrics.bandwidth/10));return e.metrics.utilization?t*(e.metrics.utilization/100):t},l=e=>{if(!e.bounds||!T)return;const{x:s,y:i,width:n,height:r}=e.bounds;t.strokeStyle="rgba(245, 158, 11, 0.3)",t.lineWidth=2,t.setLineDash([5,5]),t.strokeRect(s,i,n,r),t.setLineDash([]),t.font="12px sans-serif",t.fillStyle="#f59e0b",t.textAlign="left",t.fillText(`${e.name} (${e.region})`,s+5,i-5);const a={healthy:"#10b981",degraded:"#f59e0b",error:"#ef4444"}[e.status];t.fillStyle=a,t.beginPath(),t.arc(s+n-10,i+10,5,0,2*Math.PI),t.fill()},o=(e,s)=>{const i="host"===e.type||"cluster"===e.type?15:10;t.beginPath(),t.arc(s.x,s.y,i,0,2*Math.PI),t.fillStyle=n[e.type],t.fill(),t.beginPath(),t.arc(s.x,s.y,i+3,0,2*Math.PI),t.strokeStyle=r[e.status],t.lineWidth=2,t.stroke(),L&&(t.font="10px sans-serif",t.fillStyle="#ffffff",t.textAlign="center",t.textBaseline="middle",t.fillText(e.name.substring(0,2),s.x,s.y),t.font="10px sans-serif",t.fillStyle="#374151",t.textAlign="center",t.textBaseline="top",t.fillText(e.name,s.x,s.y+i+5)),q&&e.metrics&&"low"!==W&&(t.font="9px sans-serif",t.fillStyle="#6b7280",t.textAlign="center",void 0!==e.metrics.cpuUsage&&t.fillText(`CPU: ${e.metrics.cpuUsage}%`,s.x,s.y+i+18),void 0!==e.metrics.memoryUsage&&"high"===W&&t.fillText(`Mem: ${e.metrics.memoryUsage}%`,s.x,s.y+i+28)),"migrating"===e.status&&(t.strokeStyle="rgba(34, 197, 94, 0.8)",t.lineWidth=3,t.setLineDash([2,2]),t.beginPath(),t.arc(s.x,s.y,i+6,0,2*Math.PI),t.stroke(),t.setLineDash([]))},h=(e,s,i)=>{const n=B&&e.metrics?.utilization?(r=e.metrics.utilization)?r>80?"rgba(239, 68, 68, 0.7)":r>60?"rgba(245, 158, 11, 0.7)":"rgba(34, 197, 94, 0.7)":a.network:a[e.type];var r;if(t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(i.x,i.y),t.strokeStyle=n,t.lineWidth=c(e),"dependency"===e.type?t.setLineDash([5,3]):t.setLineDash([]),t.stroke(),t.setLineDash([]),q&&e.metrics&&"low"!==W){const n=(s.x+i.x)/2,r=(s.y+i.y)/2;t.font="9px sans-serif",t.fillStyle="#6b7280",t.textAlign="center",t.textBaseline="middle";const a=[];if(e.metrics.latency&&a.push(`${e.metrics.latency.toFixed(1)}ms`),B&&e.metrics.bandwidth&&a.push(`${e.metrics.bandwidth}Mbps`),e.metrics.utilization&&"high"===W&&a.push(`${e.metrics.utilization}%`),a.length>0&&t.fillText(a.join(" | "),n,r-8),e.metrics.qos){const s={high:"#10b981",medium:"#f59e0b",low:"#ef4444"}[e.metrics.qos];t.fillStyle=s,t.beginPath(),t.arc(n,r+8,3,0,2*Math.PI),t.fill()}}if(e.animated||"migration"===e.type){const e=t.createLinearGradient(s.x,s.y,i.x,i.y);e.addColorStop(0,"rgba(34, 197, 94, 0)"),e.addColorStop(.5,"rgba(34, 197, 94, 0.8)"),e.addColorStop(1,"rgba(34, 197, 94, 0)"),t.strokeStyle=e,t.lineWidth=2,t.stroke()}};class d{constructor(e,t,s,i){this.x=e,this.y=t,this.width=s,this.height=i,this.nodes=[],this.centerOfMass={x:0,y:0},this.totalMass=0,this.children=[]}insert(e,t){if(!this.contains(t.x,t.y))return!1;if(0===this.nodes.length&&0===this.children.length)return this.nodes.push({node:e,position:t}),this.updateCenterOfMass(),!0;if(0===this.children.length){this.subdivide();for(const e of this.nodes)for(const t of this.children)if(t.insert(e.node,e.position))break;this.nodes=[]}for(const s of this.children)if(s.insert(e,t))return this.updateCenterOfMass(),!0;return!1}contains(e,t){return e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}subdivide(){const e=this.width/2,t=this.height/2;this.children.push(new d(this.x,this.y,e,t),new d(this.x+e,this.y,e,t),new d(this.x,this.y+t,e,t),new d(this.x+e,this.y+t,e,t))}updateCenterOfMass(){let e=0,t=0,s=0;for(const{position:i}of this.nodes)e+=i.x,t+=i.y,s+=1;for(const i of this.children)e+=i.centerOfMass.x*i.totalMass,t+=i.centerOfMass.y*i.totalMass,s+=i.totalMass;s>0&&(this.centerOfMass.x=e/s,this.centerOfMass.y=t/s),this.totalMass=s}calculateForce(e,t=.5){if(0===this.totalMass)return{fx:0,fy:0};const s=this.centerOfMass.x-e.x,i=this.centerOfMass.y-e.y,n=Math.sqrt(s*s+i*i);if(0===n)return{fx:0,fy:0};const r=Math.max(this.width,this.height);if(0===this.children.length||r/n<t){const e=1e3/(n*n);return{fx:s/n*e,fy:i/n*e}}let a=0,c=0;for(const l of this.children){const s=l.calculateForce(e,t);a+=s.fx,c+=s.fy}return{fx:a,fy:c}}}const x=()=>{t.clearRect(0,0,e.width,e.height),U.clusters&&T&&U.clusters.forEach((e=>{const t=U.nodes.filter((t=>t.clusterId===e.id));if(t.length>0){const s=t.map((e=>i.get(e.id))).filter(Boolean);if(s.length>0){const t=Math.min(...s.map((e=>e.x)))-50,i=Math.max(...s.map((e=>e.x)))+50,n=Math.min(...s.map((e=>e.y)))-50,r=Math.max(...s.map((e=>e.y)))+50;e.bounds={x:t,y:n,width:i-t,height:r-n}}}l(e)}));const s=U.nodes.length>100?3:10,n=U.nodes.length>100;for(let t=0;t<s;t++){if(n){const t=new d(0,0,e.clientWidth,e.clientHeight);U.nodes.forEach((e=>{const s=i.get(e.id);s&&t.insert(e,s)})),U.nodes.forEach((e=>{const s=i.get(e.id);if(s){const e=t.calculateForce(s);s.vx-=e.fx,s.vy-=e.fy}}))}else U.nodes.forEach((e=>{U.nodes.forEach((t=>{if(e.id===t.id)return;const s=i.get(e.id),n=i.get(t.id),r=n.x-s.x,a=n.y-s.y,c=Math.sqrt(r*r+a*a);if(0===c)return;const l=1e3/(c*c),o=r/c*l,h=a/c*l;s.vx-=o,s.vy-=h,n.vx+=o,n.vy+=h}))}));U.edges.forEach((e=>{const t=i.get(e.source),s=i.get(e.target);if(!t||!s)return;const n=s.x-t.x,r=s.y-t.y,a=Math.sqrt(n*n+r*r);if(0===a)return;const c=.01*(a-100),l=n/a*c,o=r/a*c;t.vx+=l,t.vy+=o,s.vx-=l,s.vy-=o})),i.forEach((t=>{t.x+=.1*t.vx,t.y+=.1*t.vy,t.vx*=.9,t.vy*=.9,t.x=Math.max(50,Math.min(e.clientWidth-50,t.x)),t.y=Math.max(50,Math.min(e.clientHeight-50,t.y))}))}U.edges.forEach((e=>{const t=i.get(e.source),s=i.get(e.target);t&&s&&h(e,t,s)})),U.nodes.forEach((e=>{const t=i.get(e.id);t&&o(e,t)})),"force"===k&&(N.current=requestAnimationFrame(x))};(()=>{if(N.current&&cancelAnimationFrame(N.current),"force"===k)x();else{let s;switch(k){case"circular":s=(()=>{const t=e.clientWidth,s=e.clientHeight,i=.3*Math.min(t,s),n=new Map;return U.nodes.forEach(((e,r)=>{const a=r/U.nodes.length*2*Math.PI,c=t/2+Math.cos(a)*i,l=s/2+Math.sin(a)*i;n.set(e.id,{x:c,y:l,vx:0,vy:0})})),n})();break;case"hierarchical":s=(()=>{const t=e.clientWidth,s=e.clientHeight,i=new Map,n=new Map;return U.nodes.forEach((e=>{let t=0;t="cluster"===e.type?0:"host"===e.type?1:"vm"===e.type?2:3,n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n.entries()).forEach((([e,n])=>{const r=s/5*(e+1);n.forEach(((e,s)=>{const a=t/(n.length+1)*(s+1);i.set(e.id,{x:a,y:r,vx:0,vy:0})}))})),i})();break;case"geographic":s=(()=>{const t=e.clientWidth,s=e.clientHeight,i=new Map,n={"us-east-1":{x:.8*t,y:.3*s},"us-west-2":{x:.2*t,y:.4*s},"eu-west-1":{x:.6*t,y:.2*s},"ap-southeast-1":{x:.9*t,y:.7*s}};return U.nodes.forEach((e=>{const r=n[e.region],a=r?.x||Math.random()*t,c=r?.y||Math.random()*s;i.set(e.id,{x:a,y:c,vx:0,vy:0})})),i})();break;case"clustered":s=(()=>{const t=e.clientWidth,s=e.clientHeight,i=new Map;return U.nodes.forEach((e=>{let n,r;if(e.clusterId&&U.clusters){const i=U.clusters.find((t=>t.id===e.clusterId));i?.bounds?(n=i.bounds.x+Math.random()*i.bounds.width,r=i.bounds.y+Math.random()*i.bounds.height):(n=Math.random()*t,r=Math.random()*s)}else n=Math.random()*t,r=Math.random()*s;i.set(e.id,{x:n,y:r,vx:0,vy:0})})),i})();break;default:s=new Map}s.forEach(((e,t)=>{i.set(t,e)})),t.clearRect(0,0,e.width,e.height),U.clusters&&T&&U.clusters.forEach((e=>{const t=U.nodes.filter((t=>t.clusterId===e.id));if(t.length>0){const s=t.map((e=>i.get(e.id))).filter(Boolean);if(s.length>0){const t=Math.min(...s.map((e=>e.x)))-50,i=Math.max(...s.map((e=>e.x)))+50,n=Math.min(...s.map((e=>e.y)))-50,r=Math.max(...s.map((e=>e.y)))+50;e.bounds={x:t,y:n,width:i-t,height:r-n}}}l(e)})),U.edges.forEach((e=>{const t=i.get(e.source),s=i.get(e.target);t&&s&&h(e,t,s)})),U.nodes.forEach((e=>{const t=i.get(e.id);t&&o(e,t)}))}})();let u=null;p&&v>0&&(u=setInterval((()=>{}),v));const f=t=>{const s=e.getBoundingClientRect(),n=t.clientX-s.left,r=t.clientY-s.top;for(const e of U.nodes){const t=i.get(e.id);if(!t)continue;const s="host"===e.type||"cluster"===e.type?15:10;if(Math.sqrt(Math.pow(t.x-n,2)+Math.pow(t.y-r,2))<=s+3)return void(M&&M(e))}if(U.clusters&&T)for(const e of U.clusters)if(e.bounds){const{x:t,y:s,width:i,height:a}=e.bounds;if(n>=t&&n<=t+i&&r>=s&&r<=s+a){b&&b(e);const t=H.has(e.id),s=new Set(H);return t?s.delete(e.id):s.add(e.id),void O(s)}}for(const e of U.edges){const t=i.get(e.source),s=i.get(e.target);if(!t||!s)continue;const a=n-t.x,l=r-t.y,o=s.x-t.x,h=s.y-t.y,d=a*o+l*h,x=o*o+h*h;let u,f,m=-1;0!==x&&(m=d/x),m<0?(u=t.x,f=t.y):m>1?(u=s.x,f=s.y):(u=t.x+m*o,f=t.y+m*h);const g=n-u,y=r-f;if(Math.sqrt(g*g+y*y)<=c(e)+2)return void(w&&w(e))}};return e.addEventListener("click",f),()=>{e.removeEventListener("click",f),window.removeEventListener("resize",s),N.current&&cancelAnimationFrame(N.current),u&&clearInterval(u)}}),[U,k,T,B,q,L,W,p,v,M,w,b,H]),(0,i.jsxs)(a.Zb,{children:[(0,i.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsxs)("div",{children:[i.jsx(a.ll,{children:t}),s&&i.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),(0,i.jsxs)(c.Ph,{value:k,onValueChange:E,children:[i.jsx(c.i4,{className:"w-[180px]",children:i.jsx(c.ki,{placeholder:"Layout Type"})}),(0,i.jsxs)(c.Bw,{children:[i.jsx(c.Ql,{value:"force",children:"Force-Directed"}),i.jsx(c.Ql,{value:"circular",children:"Circular"}),i.jsx(c.Ql,{value:"hierarchical",children:"Hierarchical"}),i.jsx(c.Ql,{value:"geographic",children:"Geographic"}),i.jsx(c.Ql,{value:"clustered",children:"Clustered"})]})]})]}),(0,i.jsxs)(a.aY,{children:[(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,i.jsxs)(o.z,{size:"sm",variant:T?"default":"outline",onClick:()=>A(!T),children:[i.jsx(d.Z,{className:"h-4 w-4 mr-1"}),"Distributed View"]}),(0,i.jsxs)(o.z,{size:"sm",variant:B?"default":"outline",onClick:()=>F(!B),children:[i.jsx(x.Z,{className:"h-4 w-4 mr-1"}),"Bandwidth"]}),(0,i.jsxs)(o.z,{size:"sm",variant:q?"default":"outline",onClick:()=>Q(!q),children:[i.jsx(u.Z,{className:"h-4 w-4 mr-1"}),"Metrics"]}),(0,i.jsxs)(c.Ph,{value:W,onValueChange:e=>D(e),children:[i.jsx(c.i4,{className:"w-[120px] h-8",children:i.jsx(c.ki,{})}),(0,i.jsxs)(c.Bw,{children:[i.jsx(c.Ql,{value:"low",children:"Low Detail"}),i.jsx(c.Ql,{value:"medium",children:"Medium Detail"}),i.jsx(c.Ql,{value:"high",children:"High Detail"})]})]}),T&&$&&(0,i.jsxs)(l.C,{variant:"outline",className:"ml-auto",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live Updates"]})]}),i.jsx("div",{className:"relative",style:{height:`${f}px`},children:i.jsx("canvas",{ref:j,className:"w-full h-full",style:{touchAction:"none"}})}),(0,i.jsxs)("div",{className:"flex justify-center mt-4 space-x-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-[#4f46e5] mr-2"}),i.jsx("span",{className:"text-xs",children:"VM"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-[#0891b2] mr-2"}),i.jsx("span",{className:"text-xs",children:"Host"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-[#7c3aed] mr-2"}),i.jsx("span",{className:"text-xs",children:"Storage"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-[#2563eb] mr-2"}),i.jsx("span",{className:"text-xs",children:"Network"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-[#059669] mr-2"}),i.jsx("span",{className:"text-xs",children:"Service"})]}),T&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-[#f59e0b] mr-2"}),i.jsx("span",{className:"text-xs",children:"Cluster"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-[#ec4899] mr-2"}),i.jsx("span",{className:"text-xs",children:"Federation"})]})]})]})]})]})}}};