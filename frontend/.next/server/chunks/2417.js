"use strict";exports.id=2417,exports.ids=[2417],exports.modules={2417:(t,e,s)=>{s.d(e,{OC:()=>a,tq:()=>i,cD:()=>c});new class{constructor(){this.token=null,this.baseURL=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8090",this.wsURL=process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8091"}setToken(t){this.token=t}clearToken(){this.token=null}async request(t,e={}){const s=`${this.baseURL}${t}`,r={"Content-Type":"application/json",...e.headers||{}};this.token&&(r.Authorization=`Bearer ${this.token}`);const n=await fetch(s,{...e,headers:r});if(!n.ok){const t=await n.text();throw new Error(`API Error: ${n.status} - ${t}`)}return 204===n.status?{}:n.json()}async get(t){return this.request(t,{method:"GET"})}async post(t,e){return this.request(t,{method:"POST",body:e?JSON.stringify(e):void 0})}async put(t,e){return this.request(t,{method:"PUT",body:e?JSON.stringify(e):void 0})}async delete(t){return this.request(t,{method:"DELETE"})}connectWebSocket(t){try{const e=`${this.wsURL}${t}`,s=new WebSocket(e);return this.token&&s.addEventListener("open",(()=>{s.send(JSON.stringify({type:"auth",token:this.token}))})),s}catch(e){return null}}};const r=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8090/api/v1";class n extends Error{constructor(t,e,s,r){super(s),this.status=t,this.code=e,this.url=r}}async function o(t,e,s){try{const o=function(t,e){const s=new URL(t,r),n=new URLSearchParams;if(e)for(const[r,o]of Object.entries(e))void 0!==o&&null!==o&&""!==o&&n.set(r,String(o));return s.search=n.toString(),s.toString()}(t,e),i=s?.role??"viewer",a=await fetch(o,{method:"GET",headers:{Accept:"application/json","X-Role":i},credentials:"include"});if(!a.ok)return{data:null,error:{code:`HTTP_${a.status}`,message:a.statusText}};const c=await a.json(),h=function(t){const e=t.headers.get("X-Pagination");if(e)try{return JSON.parse(e)}catch{return}}(a);if(h&&(c.pagination=h),c.error)throw new n(a.status,c.error.code,c.error.message,o);return c}catch(o){return{data:null,error:{code:"FETCH_ERROR",message:o instanceof Error?o.message:"Unknown error"}}}}const i=t=>o("/vms",t),a=t=>o(`/vms/${t}`),c=(t,e,s)=>async function(t,e,s){const o=new URL(t,r).toString(),i=s?.role??"viewer",a=await fetch(o,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Role":i},body:void 0!==e?JSON.stringify(e):void 0,credentials:"include"}),c=await a.json();if(c.error)throw new n(a.status,c.error.code,c.error.message,o);return c}(`/vms/${t}/${e}`,void 0,s)}};