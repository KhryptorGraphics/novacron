(()=>{var e={id:3,ids:[3,7950,5319,3215,7133,9748,6589,3712,1904,8013,6715,4536,7202]};e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},95866:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]])},35256:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3514:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},39546:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},11210:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},7382:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},76733:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},71063:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},52995:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},83475:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},26303:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},71817:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},50007:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},55642:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});const a=(0,t(3528).Z)("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]])},54102:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var a=t(67096),r=t(16132),i=t(37284),n=t.n(i),l=t(32564),c={};for(const h in l)["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(h)<0&&(c[h]=()=>l[h]);t.d(s,c);const o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,90881)),"/home/kp/novacron/frontend/src/app/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,39862)),"/home/kp/novacron/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,35519)),"/home/kp/novacron/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/home/kp/novacron/frontend/src/app/admin/page.tsx"],m="/admin/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},73968:(e,s,t)=>{Promise.resolve().then(t.bind(t,4588)),Promise.resolve().then(t.bind(t,10345)),Promise.resolve().then(t.bind(t,24510)),Promise.resolve().then(t.bind(t,22813)),Promise.resolve().then(t.bind(t,81362))},50998:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,13724,23)),Promise.resolve().then(t.t.bind(t,35365,23)),Promise.resolve().then(t.t.bind(t,44900,23)),Promise.resolve().then(t.t.bind(t,44714,23)),Promise.resolve().then(t.t.bind(t,45392,23)),Promise.resolve().then(t.t.bind(t,8898,23))},37939:(e,s,t)=>{Promise.resolve().then(t.bind(t,69614))},35303:()=>{},69614:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_s,dynamic:()=>Cs});var a=t(30784),r=t(9885),i=t.n(r),n=t(57114),l=t(99748),c=t(94409),o=t(20644),d=t(11210),m=t(3528);const u=(0,m.Z)("ChevronUp",[["polyline",{points:"18 15 12 9 6 15",key:"1uugdp"}]]);var x=t(19458),h=t(45304);function p({error:e,errorInfo:s,resetError:t,showDetails:r,toggleDetails:i}){const l=(0,n.useRouter)();return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"max-w-2xl w-full",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center text-center mb-6",children:[a.jsx("div",{className:"h-20 w-20 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mb-4",children:a.jsx(c.Z,{className:"h-10 w-10 text-red-600 dark:text-red-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Oops! Something went wrong"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We encountered an unexpected error. Don't worry, your data is safe."})]}),e&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg",children:a.jsx("p",{className:"text-sm font-mono text-red-800 dark:text-red-300",children:e.message||"An unknown error occurred"})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[(0,a.jsxs)(h.z,{onClick:t,className:"flex-1",variant:"default",children:[a.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Try Again"]}),(0,a.jsxs)(h.z,{onClick:()=>l.push("/"),className:"flex-1",variant:"outline",children:[a.jsx(d.Z,{className:"mr-2 h-4 w-4"}),"Go to Home"]})]}),a.jsx("button",{onClick:i,className:"w-full text-left text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Technical Details"}),r?a.jsx(u,{className:"h-4 w-4"}):a.jsx(x.Z,{className:"h-4 w-4"})]})}),r&&s&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-900 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stack Trace:"}),a.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 overflow-auto max-h-48",children:s.componentStack}),e?.stack&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mt-4 mb-2",children:"Error Stack:"}),a.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 overflow-auto max-h-48",children:e.stack})]})]})]}),a.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-6",children:"If this problem persists, please contact support with the error details above."})]})})}class g extends i().Component{constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:null,errorInfo:null,showDetails:!1})},this.toggleDetails=()=>{this.setState((e=>({showDetails:!e.showDetails})))},this.state={hasError:!1,error:null,errorInfo:null,showDetails:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){this.props.onError?.(e,s),this.setState({errorInfo:s})}componentDidUpdate(e){const{resetKeys:s,resetOnPropsChange:t}=this.props,{hasError:a}=this.state;if(a&&s){s.some(((s,t)=>s!==e.resetKeys?.[t]))&&this.resetError()}a&&t&&e!==this.props&&this.resetError()}render(){const{hasError:e,error:s,errorInfo:t,showDetails:r}=this.state,{children:i,fallback:n=p}=this.props;return e?a.jsx(n,{error:s,errorInfo:t,resetError:this.resetError,showDetails:r,toggleDetails:this.toggleDetails}):i}}var f=t(80467);function j(){return a.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",children:"Skip to main content"})}const y=(0,m.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),v=(0,m.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var b=t(76733),N=t(71072),w=t(55794),k=t(30569),S=t(94571);function C(){const{theme:e,setTheme:s}=(0,N.F)(),[t,i]=r.useState(!1);return r.useEffect((()=>{i(!0)}),[]),t?(0,a.jsxs)(w.h_,{children:[a.jsx(w.$F,{asChild:!0,children:(0,a.jsxs)(h.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,a.jsxs)(k.M,{mode:"wait",children:["light"===e&&a.jsx(S.E.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:a.jsx(y,{className:"h-5 w-5"})},"light"),"dark"===e&&a.jsx(S.E.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:a.jsx(v,{className:"h-5 w-5"})},"dark"),"system"===e&&a.jsx(S.E.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:a.jsx(b.Z,{className:"h-5 w-5"})},"system")]}),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(w.AW,{align:"end",children:[(0,a.jsxs)(w.Xi,{onClick:()=>s("light"),children:[a.jsx(y,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Light"})]}),(0,a.jsxs)(w.Xi,{onClick:()=>s("dark"),children:[a.jsx(v,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Dark"})]}),(0,a.jsxs)(w.Xi,{onClick:()=>s("system"),children:[a.jsx(b.Z,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"System"})]})]})]}):a.jsx(h.z,{variant:"ghost",size:"icon",disabled:!0,children:a.jsx(y,{className:"h-5 w-5"})})}var _=t(11440),Z=t.n(_),A=t(83475),E=t(89815),T=t(82875),R=t(88012),M=t(44901),U=t(35256),z=t(91672),P=t(5987),O=t(56206),D=t(7382),L=t(11922);const I=(0,m.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),q=[{name:"Dashboard",href:"/dashboard",icon:d.Z,description:"Overview and metrics"},{name:"VMs",href:"/vms",icon:A.Z,description:"Virtual machine management"},{name:"Core VMs",href:"/core/vms",icon:A.Z,description:"Core-mode VM list"},{name:"Monitoring",href:"/monitoring",icon:E.Z,description:"Real-time system monitoring"},{name:"Storage",href:"/storage",icon:T.Z,description:"Storage management"},{name:"Network",href:"/network",icon:R.Z,description:"Network configuration"},{name:"Security",href:"/security",icon:M.Z,description:"Security settings"},{name:"Analytics",href:"/analytics",icon:U.Z,description:"Performance analytics"},{name:"Users",href:"/users",icon:z.Z,description:"User management"},{name:"Settings",href:"/settings",icon:P.Z,description:"System settings"},{name:"Admin",href:"/admin",icon:M.Z,description:"Admin panel"}];function $({user:e,onLogout:s}){const[t,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),o=(0,n.usePathname)();(0,r.useEffect)((()=>{i(!1)}),[o]),(0,r.useEffect)((()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"})),[t]);const d=()=>{c(!l),document.documentElement.setAttribute("data-theme",l?"light":"dark")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 items-center gap-4 border-b bg-white px-4 dark:bg-gray-900 dark:border-gray-800 lg:hidden",children:[a.jsx(h.z,{variant:"ghost",size:"icon",onClick:()=>i(!t),className:"lg:hidden","aria-label":"Toggle menu",children:t?a.jsx(O.Z,{className:"h-6 w-6"}):a.jsx(D.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,a.jsxs)(Z(),{href:"/",className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),a.jsx("span",{className:"font-semibold text-lg",children:"NovaCron"})]}),a.jsx(h.z,{variant:"ghost",size:"icon",onClick:d,"aria-label":"Toggle dark mode",children:l?a.jsx(y,{className:"h-5 w-5"}):a.jsx(v,{className:"h-5 w-5"})})]})]}),a.jsx(k.M,{children:t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(S.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>i(!1)}),a.jsx(S.E.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-y-0 left-0 z-50 w-72 bg-white dark:bg-gray-900 shadow-xl lg:hidden",children:(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)("div",{className:"flex h-16 items-center gap-4 border-b px-4 dark:border-gray-800",children:[(0,a.jsxs)(Z(),{href:"/",className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),a.jsx("span",{className:"font-semibold text-lg",children:"NovaCron"})]}),a.jsx(h.z,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"ml-auto","aria-label":"Close menu",children:a.jsx(O.Z,{className:"h-5 w-5"})})]}),e&&a.jsx("div",{className:"border-b px-4 py-4 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.email})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto px-2 py-4",children:a.jsx("div",{className:"space-y-1",children:q.map((e=>{const s=e.icon,t=o===e.href;return(0,a.jsxs)(Z(),{href:e.href,className:(0,f.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-all","hover:bg-gray-100 dark:hover:bg-gray-800",t?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-700 dark:text-gray-300"),children:[a.jsx(s,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]}),t&&a.jsx(L.Z,{className:"h-4 w-4 flex-shrink-0"})]},e.name)}))})}),a.jsx("div",{className:"border-t px-4 py-4 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h.z,{variant:"outline",className:"w-full justify-start",onClick:d,children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(y,{className:"mr-2 h-4 w-4"}),"Light Mode"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(v,{className:"mr-2 h-4 w-4"}),"Dark Mode"]})}),s&&(0,a.jsxs)(h.z,{variant:"ghost",className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:s,children:[a.jsx(I,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})})]})})]})}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 flex h-16 items-center justify-around border-t bg-white px-2 dark:bg-gray-900 dark:border-gray-800 sm:hidden",children:q.slice(0,5).map((e=>{const s=e.icon,t=o===e.href;return(0,a.jsxs)(Z(),{href:e.href,className:(0,f.cn)("flex flex-col items-center justify-center gap-1 p-2 rounded-lg transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800",t?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"),children:[a.jsx(s,{className:"h-5 w-5"}),a.jsx("span",{className:"text-xs font-medium",children:e.name})]},e.name)}))})]})}function V({user:e,collapsed:s=!1,onCollapse:t}){const r=(0,n.usePathname)();return(0,a.jsxs)("aside",{className:(0,f.cn)("hidden lg:flex lg:flex-col","fixed inset-y-0 left-0 z-30","border-r bg-white dark:bg-gray-900 dark:border-gray-800","transition-all duration-300",s?"w-16":"w-64"),children:[(0,a.jsxs)("div",{className:"flex h-16 items-center gap-4 border-b px-4 dark:border-gray-800",children:[(0,a.jsxs)(Z(),{href:"/",className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),!s&&a.jsx("span",{className:"font-semibold text-lg",children:"NovaCron"})]}),a.jsx(h.z,{variant:"ghost",size:"icon",onClick:()=>t?.(!s),className:"ml-auto","aria-label":"Toggle sidebar",children:a.jsx(D.Z,{className:"h-4 w-4"})})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto px-2 py-4",children:a.jsx("div",{className:"space-y-1",children:q.map((e=>{const t=e.icon,i=r===e.href;return(0,a.jsxs)(Z(),{href:e.href,className:(0,f.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-all","hover:bg-gray-100 dark:hover:bg-gray-800",i?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-700 dark:text-gray-300",s&&"justify-center px-2"),title:s?e.name:void 0,children:[a.jsx(t,{className:"h-5 w-5 flex-shrink-0"}),!s&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"flex-1 font-medium",children:e.name}),i&&a.jsx(L.Z,{className:"h-4 w-4 flex-shrink-0"})]})]},e.name)}))})}),e&&!s&&a.jsx("div",{className:"border-t px-4 py-4 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.email})]})]})})]})}var F=t(17133);function B({tabs:e,defaultTab:s,className:t,onTabChange:i}){const[n,l]=(0,r.useState)(s||e[0]?.id),[c,o]=(0,r.useState)(new Set([n])),[d,m]=(0,r.useState)({}),u=e.find((e=>e.id===n));return(0,a.jsxs)("div",{className:t,children:[a.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg",children:e.map((s=>(0,a.jsxs)("button",{onClick:()=>(async s=>{if(l(s),i?.(s),!c.has(s)){const t=e.find((e=>e.id===s));if(t&&"function"===typeof t.content){const e=await t.content();m((t=>({...t,[s]:e})))}o((e=>new Set([...e,s])))}})(s.id),className:(0,f.cn)("flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500",n===s.id?"bg-white dark:bg-gray-700 shadow-sm":"hover:bg-gray-200 dark:hover:bg-gray-700"),children:[s.icon,a.jsx("span",{className:"font-medium",children:s.label}),s.badge&&a.jsx(F.C,{variant:"secondary",className:"ml-1",children:s.badge})]},s.id)))}),a.jsx("div",{className:"mt-4",children:a.jsx(k.M,{mode:"wait",children:a.jsx(S.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:u&&("function"===typeof u.content?d[n]||a.jsx("div",{children:"Loading..."}):u.content)},n)})})]})}var Q=t(80087);function Y(){return(0,a.jsxs)("div",{className:"space-y-6 animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:6}).map(((e,s)=>a.jsx("div",{className:"h-32 bg-gray-200 rounded"},s)))}),a.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}function W({isRefreshing:e=!1,size:s=16}){return a.jsx(o.Z,{className:"h-4 w-4 "+(e?"animate-spin":"")})}function K({state:e="loading",size:s="default"}){const t=(()=>{switch(s){case"small":return"h-4 w-4";case"large":return"h-8 w-8";default:return"h-6 w-6"}})();switch(e){case"loading":return a.jsx(Q.Z,{className:`${t} animate-spin`});case"success":return a.jsx("div",{className:`${t} text-green-500 flex items-center justify-center`,children:"\u2713"});case"error":return a.jsx("div",{className:`${t} text-red-500 flex items-center justify-center`,children:"\u2717"});default:return null}}var J=t(5171);const G=(0,m.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var H=t(39546),X=t(3514),ee=t(97040),se=t(96589),te=t(7950),ae=t(57505),re=t(58013),ie=t(85574),ne=t(6315),le=t(22385),ce=t(69518),oe=t(52995),de=t(24149),me=t(26303);const ue=[{name:"users",rows:1247,size:"24.3 MB",description:"User accounts and profiles"},{name:"organizations",rows:89,size:"2.1 MB",description:"Organization entities"},{name:"vms",rows:2341,size:"45.7 MB",description:"Virtual machine configurations"},{name:"schedules",rows:5432,size:"12.8 MB",description:"Scheduled job definitions"},{name:"migrations",rows:876,size:"156.2 MB",description:"VM migration history"},{name:"audit_logs",rows:98765,size:"234.5 MB",description:"System audit trail"},{name:"sessions",rows:456,size:"3.4 MB",description:"User session data"},{name:"configurations",rows:123,size:"890 KB",description:"System configuration settings"}],xe=[{id:1,email:"john@example.com",name:"John Doe",role:"user",status:"active",created_at:"2024-01-15",last_login:"2024-08-20"},{id:2,email:"admin@novacron.io",name:"System Admin",role:"admin",status:"active",created_at:"2024-01-01",last_login:"2024-08-24"},{id:3,email:"jane@company.com",name:"Jane Smith",role:"moderator",status:"suspended",created_at:"2024-02-10",last_login:"2024-08-18"}];function he(){const[e,s]=(0,r.useState)("users"),[t,i]=(0,r.useState)(xe),[n,l]=(0,r.useState)(""),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),j=t.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(n.toLowerCase()))))),y=e=>{switch(e){case"active":return"bg-green-500";case"suspended":return"bg-red-500";case"pending":return"bg-yellow-500";default:return"bg-gray-500"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(T.Z,{className:"h-6 w-6"}),"Database Editor"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Direct database table management with CRUD operations"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(h.z,{variant:"outline",size:"sm",children:[a.jsx(ie.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsxs)(h.z,{variant:"outline",size:"sm",children:[a.jsx(ne.Z,{className:"h-4 w-4 mr-2"}),"Import"]})]})]}),a.jsx(ee.Zb,{className:"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950",children:a.jsx(ee.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-orange-800 dark:text-orange-200",children:[a.jsx(c.Z,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Warning: Direct database editing can affect system integrity. Use with caution."})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[a.jsx(ee.ll,{className:"text-lg",children:"Database Tables"}),a.jsx(ee.SZ,{children:"Select a table to view and edit"})]}),a.jsx(ee.aY,{className:"p-0",children:a.jsx("div",{className:"space-y-1",children:ue.map((t=>(0,a.jsxs)("button",{onClick:()=>s(t.name),className:(0,f.cn)("w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",e===t.name&&"bg-blue-50 dark:bg-blue-950 border-r-2 border-blue-500"),children:[a.jsx("div",{className:"font-medium",children:t.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.rows.toLocaleString()," rows \u2022 ",t.size]})]},t.name)))})})]})}),(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-4",children:[(0,a.jsxs)(ee.Zb,{children:[a.jsx(ee.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(ee.ll,{className:"capitalize",children:[e," Table"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(h.z,{onClick:()=>{m({id:null,data:{email:"",name:"",role:"user",status:"active",created_at:(new Date).toISOString().split("T")[0],last_login:""}})},disabled:!!d,size:"sm",children:[a.jsx(le.Z,{className:"h-4 w-4 mr-2"}),"Add New"]}),(0,a.jsxs)(h.z,{variant:"outline",size:"sm",children:[a.jsx(o.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})}),(0,a.jsxs)(ee.aY,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(ce.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ae.I,{placeholder:"Search records...",value:n,onChange:e=>l(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(F.C,{variant:"outline",children:[j.length," records"]})]}),a.jsx("div",{className:"border rounded-md",children:(0,a.jsxs)(se.iA,{children:[a.jsx(se.xD,{children:(0,a.jsxs)(se.SC,{children:[a.jsx(se.ss,{children:"ID"}),a.jsx(se.ss,{children:"Email"}),a.jsx(se.ss,{children:"Name"}),a.jsx(se.ss,{children:"Role"}),a.jsx(se.ss,{children:"Status"}),a.jsx(se.ss,{children:"Created"}),a.jsx(se.ss,{children:"Last Login"}),a.jsx(se.ss,{children:"Actions"})]})}),(0,a.jsxs)(se.RM,{children:[d&&(0,a.jsxs)(se.SC,{className:"bg-blue-50 dark:bg-blue-950",children:[a.jsx(se.pj,{children:d.id||"New"}),a.jsx(se.pj,{children:a.jsx(ae.I,{value:d.data.email,onChange:e=>m((s=>s&&{...s,data:{...s.data,email:e.target.value}})),className:"h-8"})}),a.jsx(se.pj,{children:a.jsx(ae.I,{value:d.data.name,onChange:e=>m((s=>s&&{...s,data:{...s.data,name:e.target.value}})),className:"h-8"})}),a.jsx(se.pj,{children:(0,a.jsxs)(te.Ph,{value:d.data.role,onValueChange:e=>m((s=>s&&{...s,data:{...s.data,role:e}})),children:[a.jsx(te.i4,{className:"h-8",children:a.jsx(te.ki,{})}),(0,a.jsxs)(te.Bw,{children:[a.jsx(te.Ql,{value:"user",children:"User"}),a.jsx(te.Ql,{value:"moderator",children:"Moderator"}),a.jsx(te.Ql,{value:"admin",children:"Admin"})]})]})}),a.jsx(se.pj,{children:(0,a.jsxs)(te.Ph,{value:d.data.status,onValueChange:e=>m((s=>s&&{...s,data:{...s.data,status:e}})),children:[a.jsx(te.i4,{className:"h-8",children:a.jsx(te.ki,{})}),(0,a.jsxs)(te.Bw,{children:[a.jsx(te.Ql,{value:"active",children:"Active"}),a.jsx(te.Ql,{value:"suspended",children:"Suspended"}),a.jsx(te.Ql,{value:"pending",children:"Pending"})]})]})}),a.jsx(se.pj,{children:a.jsx(ae.I,{type:"date",value:d.data.created_at,onChange:e=>m((s=>s&&{...s,data:{...s.data,created_at:e.target.value}})),className:"h-8"})}),a.jsx(se.pj,{children:a.jsx(ae.I,{type:"date",value:d.data.last_login,onChange:e=>m((s=>s&&{...s,data:{...s.data,last_login:e.target.value}})),className:"h-8"})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(h.z,{size:"sm",onClick:async()=>{if(d){if(g(!0),await new Promise((e=>setTimeout(e,1e3))),d.id)i((e=>e.map((e=>e.id===d.id?{...d.data}:e))));else{const e=Math.max(...t.map((e=>e.id)))+1;i((s=>[...s,{...d.data,id:e}]))}m(null),g(!1)}},disabled:p,children:a.jsx(oe.Z,{className:"h-3 w-3"})}),a.jsx(h.z,{size:"sm",variant:"outline",onClick:()=>{m(null)},children:a.jsx(O.Z,{className:"h-3 w-3"})})]})})]}),j.map((e=>(0,a.jsxs)(se.SC,{children:[a.jsx(se.pj,{className:"font-medium",children:e.id}),a.jsx(se.pj,{children:e.email}),a.jsx(se.pj,{children:e.name}),a.jsx(se.pj,{children:a.jsx(F.C,{variant:"outline",className:"capitalize",children:e.role})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:(0,f.cn)("h-2 w-2 rounded-full",y(e.status))}),a.jsx("span",{className:"capitalize",children:e.status})]})}),a.jsx(se.pj,{children:e.created_at}),a.jsx(se.pj,{children:e.last_login||"Never"}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>(e=>{m({id:e.id,data:{...e}})})(e),disabled:!!d,children:a.jsx(de.Z,{className:"h-3 w-3"})}),a.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>(async e=>{confirm("Are you sure you want to delete this record? This action cannot be undone.")&&(g(!0),await new Promise((e=>setTimeout(e,1e3))),i((s=>s.filter((s=>s.id!==e)))),g(!1))})(e.id),disabled:!!d||p,className:"text-red-600 hover:text-red-700",children:a.jsx(me.Z,{className:"h-3 w-3"})})]})})]},e.id)))]})]})})]})]}),(0,a.jsxs)(ee.Zb,{className:"border-red-200",children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[a.jsx(c.Z,{className:"h-5 w-5"}),a.jsx(ee.ll,{children:"Danger Zone"})]}),a.jsx(re.r,{checked:u,onCheckedChange:x})]}),a.jsx(ee.SZ,{children:"Destructive actions that cannot be undone"})]}),u&&a.jsx(ee.aY,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(h.z,{variant:"destructive",size:"sm",children:[a.jsx(me.Z,{className:"h-4 w-4 mr-2"}),"Truncate Table"]}),(0,a.jsxs)(h.z,{variant:"destructive",size:"sm",children:[a.jsx(me.Z,{className:"h-4 w-4 mr-2"}),"Drop Table"]}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"These actions require additional confirmation"})]})})]})]})]})]})}var pe=t(92032),ge=t(95866),fe=t(15441),je=t(51831),ye=t(97018),ve=t(59490),be=t(28626);const Ne=[{id:1,name:"John Doe",email:"john@example.com",role:"user",status:"active",created_at:"2024-01-15T10:30:00Z",last_login:"2024-08-23T14:22:00Z",login_count:45,organization:"ACME Corp",two_factor:!0,email_verified:!0},{id:2,name:"Jane Smith",email:"jane@company.com",role:"moderator",status:"suspended",created_at:"2024-02-10T09:15:00Z",last_login:"2024-08-18T16:45:00Z",login_count:123,organization:"Tech Solutions",two_factor:!1,email_verified:!0},{id:3,name:"Bob Wilson",email:"bob@startup.io",role:"admin",status:"active",created_at:"2024-01-01T08:00:00Z",last_login:"2024-08-24T12:10:00Z",login_count:289,organization:"Startup Inc",two_factor:!0,email_verified:!0},{id:4,name:"Alice Johnson",email:"alice.johnson@email.com",role:"user",status:"pending",created_at:"2024-08-20T13:45:00Z",last_login:null,login_count:0,organization:"New Company",two_factor:!1,email_verified:!1}],we={total:1247,active:892,suspended:23,pending:45,admins:12,moderators:34,twoFactorEnabled:756};function ke(){const[e,s]=(0,r.useState)(Ne),[t,i]=(0,r.useState)(""),[n,l]=(0,r.useState)("all"),[c,o]=(0,r.useState)("all"),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),f=e.filter((e=>{const s=e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.organization.toLowerCase().includes(t.toLowerCase()),a="all"===n||e.status===n,r="all"===c||e.role===c;return s&&a&&r})),j=async(e,t)=>{g(!0),await new Promise((e=>setTimeout(e,1e3))),s((s=>s.map((s=>{if(s.id===e)switch(t){case"activate":return{...s,status:"active"};case"suspend":return{...s,status:"suspended"};case"approve":return{...s,status:"active",email_verified:!0};default:return s}return s})))),g(!1)},y=e=>{switch(e){case"active":return a.jsx(pe.Z,{className:"h-4 w-4 text-green-600"});case"suspended":return a.jsx(ge.Z,{className:"h-4 w-4 text-red-600"});case"pending":return a.jsx(fe.Z,{className:"h-4 w-4 text-yellow-600"});default:return a.jsx(je.Z,{className:"h-4 w-4 text-gray-600"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(z.Z,{className:"h-6 w-6"}),"User Management"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage user accounts, roles, and permissions"})]}),(0,a.jsxs)(h.z,{children:[a.jsx(ye.Z,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(J.Uo,{delay:.1,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold",children:we.total.toLocaleString()})]}),a.jsx(z.Z,{className:"h-8 w-8 text-blue-600"})]})})})}),a.jsx(J.Uo,{delay:.2,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:we.active})]}),a.jsx(pe.Z,{className:"h-8 w-8 text-green-600"})]})})})}),a.jsx(J.Uo,{delay:.3,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Approval"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:we.pending})]}),a.jsx(fe.Z,{className:"h-8 w-8 text-yellow-600"})]})})})}),a.jsx(J.Uo,{delay:.4,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"2FA Enabled"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:we.twoFactorEnabled})]}),a.jsx(M.Z,{className:"h-8 w-8 text-purple-600"})]})})})})]}),a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(ce.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ae.I,{placeholder:"Search users by name, email, or organization...",value:t,onChange:e=>i(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(te.Ph,{value:n,onValueChange:l,children:[a.jsx(te.i4,{className:"w-[180px]",children:a.jsx(te.ki,{placeholder:"Filter by status"})}),(0,a.jsxs)(te.Bw,{children:[a.jsx(te.Ql,{value:"all",children:"All Statuses"}),a.jsx(te.Ql,{value:"active",children:"Active"}),a.jsx(te.Ql,{value:"suspended",children:"Suspended"}),a.jsx(te.Ql,{value:"pending",children:"Pending"})]})]}),(0,a.jsxs)(te.Ph,{value:c,onValueChange:o,children:[a.jsx(te.i4,{className:"w-[180px]",children:a.jsx(te.ki,{placeholder:"Filter by role"})}),(0,a.jsxs)(te.Bw,{children:[a.jsx(te.Ql,{value:"all",children:"All Roles"}),a.jsx(te.Ql,{value:"admin",children:"Admin"}),a.jsx(te.Ql,{value:"moderator",children:"Moderator"}),a.jsx(te.Ql,{value:"user",children:"User"})]})]})]})})}),a.jsx(J.Uo,{delay:.5,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{children:["Users (",f.length,")"]}),a.jsx(ee.SZ,{children:"Manage user accounts and their permissions"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)(se.iA,{children:[a.jsx(se.xD,{children:(0,a.jsxs)(se.SC,{children:[a.jsx(se.ss,{children:"User"}),a.jsx(se.ss,{children:"Organization"}),a.jsx(se.ss,{children:"Role"}),a.jsx(se.ss,{children:"Status"}),a.jsx(se.ss,{children:"Last Login"}),a.jsx(se.ss,{children:"Security"}),a.jsx(se.ss,{children:"Actions"})]})}),a.jsx(se.RM,{children:f.map((e=>{return(0,a.jsxs)(se.SC,{children:[a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:e.name}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.email})]})}),a.jsx(se.pj,{children:e.organization}),a.jsx(se.pj,{children:a.jsx(F.C,{variant:"admin"===e.role?"destructive":"moderator"===e.role?"secondary":"outline",className:"capitalize",children:e.role})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[y(e.status),a.jsx("span",{className:"capitalize",children:e.status})]})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[(s=e.last_login,s?new Date(s).toLocaleDateString()+" "+new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Never"),(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.login_count," total logins"]})]})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[a.jsx(ve.Z,{className:"h-3 w-3"}),a.jsx("span",{className:e.email_verified?"text-green-600":"text-red-600",children:e.email_verified?"Verified":"Unverified"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[a.jsx(M.Z,{className:"h-3 w-3"}),a.jsx("span",{className:e.two_factor?"text-green-600":"text-gray-600",children:e.two_factor?"2FA On":"2FA Off"})]})]})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["pending"===e.status&&a.jsx(h.z,{size:"sm",onClick:()=>j(e.id,"approve"),disabled:p,className:"text-xs px-2 h-7",children:"Approve"}),"active"===e.status&&a.jsx(h.z,{size:"sm",variant:"outline",onClick:()=>j(e.id,"suspend"),disabled:p,className:"text-xs px-2 h-7",children:"Suspend"}),"suspended"===e.status&&a.jsx(h.z,{size:"sm",variant:"outline",onClick:()=>j(e.id,"activate"),disabled:p,className:"text-xs px-2 h-7",children:"Activate"}),a.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>m(e),className:"h-7 w-7 p-0",children:a.jsx(be.Z,{className:"h-3 w-3"})}),a.jsx(h.z,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",children:a.jsx(de.Z,{className:"h-3 w-3"})})]})})]},e.id);var s}))})]})})})]})}),(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[a.jsx(ee.ll,{children:"Bulk Actions"}),a.jsx(ee.SZ,{children:"Perform actions on multiple users at once"})]}),a.jsx(ee.aY,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(h.z,{variant:"outline",size:"sm",children:[a.jsx(ve.Z,{className:"h-4 w-4 mr-2"}),"Send Welcome Email"]}),(0,a.jsxs)(h.z,{variant:"outline",size:"sm",children:[a.jsx(M.Z,{className:"h-4 w-4 mr-2"}),"Enable 2FA Reminder"]}),(0,a.jsxs)(h.z,{variant:"outline",size:"sm",children:[a.jsx(G,{className:"h-4 w-4 mr-2"}),"Bulk Role Assignment"]}),(0,a.jsxs)(h.z,{variant:"outline",size:"sm",className:"text-red-600",children:[a.jsx(ge.Z,{className:"h-4 w-4 mr-2"}),"Bulk Suspension"]})]})})]})]})}var Se=t(64536),Ce=t(57550),_e=t(71063);const Ze=[{id:"general",title:"General Settings",description:"Basic system configuration and preferences",icon:a.jsx(P.Z,{className:"h-5 w-5"}),settings:[{key:"system_name",label:"System Name",description:"Display name for the NovaCron system",type:"string",value:"NovaCron Production"},{key:"maintenance_mode",label:"Maintenance Mode",description:"Enable maintenance mode to restrict access",type:"boolean",value:!1},{key:"debug_mode",label:"Debug Mode",description:"Enable debug logging and error details",type:"boolean",value:!1},{key:"session_timeout",label:"Session Timeout",description:"User session timeout in minutes",type:"slider",value:[30],min:5,max:480,unit:"minutes"},{key:"timezone",label:"System Timezone",description:"Default timezone for the system",type:"select",value:"UTC",options:[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Chicago",label:"Central Time"},{value:"America/Denver",label:"Mountain Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"}]}]},{id:"security",title:"Security Settings",description:"Authentication, authorization, and security policies",icon:a.jsx(M.Z,{className:"h-5 w-5"}),settings:[{key:"require_2fa",label:"Require Two-Factor Authentication",description:"Force all users to enable 2FA",type:"boolean",value:!0},{key:"password_min_length",label:"Minimum Password Length",description:"Minimum required password length",type:"slider",value:[8],min:6,max:32,unit:"characters"},{key:"login_attempts",label:"Max Login Attempts",description:"Maximum failed login attempts before lockout",type:"slider",value:[5],min:3,max:10,unit:"attempts"},{key:"jwt_secret",label:"JWT Secret Key",description:"Secret key for JWT token signing",type:"string",value:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",sensitive:!0},{key:"api_rate_limit",label:"API Rate Limit",description:"Requests per minute per user",type:"slider",value:[1e3],min:100,max:1e4,unit:"req/min"}]},{id:"database",title:"Database Settings",description:"Database connection and performance configuration",icon:a.jsx(T.Z,{className:"h-5 w-5"}),settings:[{key:"db_pool_size",label:"Connection Pool Size",description:"Maximum database connections",type:"slider",value:[50],min:10,max:200,unit:"connections"},{key:"query_timeout",label:"Query Timeout",description:"Maximum query execution time",type:"slider",value:[30],min:5,max:300,unit:"seconds"},{key:"enable_query_logging",label:"Query Logging",description:"Log all database queries for debugging",type:"boolean",value:!1},{key:"backup_retention",label:"Backup Retention",description:"Number of days to keep backups",type:"slider",value:[30],min:7,max:365,unit:"days"}]},{id:"vm",title:"VM Management",description:"Virtual machine and resource management settings",icon:a.jsx(A.Z,{className:"h-5 w-5"}),settings:[{key:"max_concurrent_migrations",label:"Max Concurrent Migrations",description:"Maximum number of simultaneous VM migrations",type:"slider",value:[3],min:1,max:10,unit:"migrations"},{key:"migration_bandwidth_limit",label:"Migration Bandwidth Limit",description:"Bandwidth limit for VM migrations",type:"slider",value:[1e3],min:100,max:1e4,unit:"MB/s"},{key:"vm_snapshot_retention",label:"Snapshot Retention",description:"Number of VM snapshots to retain",type:"slider",value:[10],min:3,max:50,unit:"snapshots"},{key:"auto_scaling_enabled",label:"Auto Scaling",description:"Automatically scale resources based on demand",type:"boolean",value:!0}]},{id:"notifications",title:"Notifications",description:"Email and alert notification settings",icon:a.jsx(X.Z,{className:"h-5 w-5"}),settings:[{key:"smtp_server",label:"SMTP Server",description:"Email server hostname",type:"string",value:"smtp.novacron.io"},{key:"smtp_port",label:"SMTP Port",description:"Email server port",type:"number",value:587},{key:"email_notifications",label:"Email Notifications",description:"Send email notifications for system events",type:"boolean",value:!0},{key:"notification_frequency",label:"Notification Frequency",description:"How often to send digest notifications",type:"select",value:"daily",options:[{value:"immediate",label:"Immediate"},{value:"hourly",label:"Hourly"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"}]}]}];function Ae(){const[e,s]=(0,r.useState)((()=>{const e={};return Ze.forEach((s=>{s.settings.forEach((s=>{e[s.key]=s.value}))})),e})),[t,i]=(0,r.useState)("general"),[n,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),m=(e,t)=>{s((s=>({...s,[e]:t}))),l(!0)},u=s=>{const t=e[s.key];switch(s.type){case"boolean":return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("label",{className:"text-sm font-medium",children:s.label}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:s.description})]}),a.jsx(re.r,{checked:t,onCheckedChange:e=>m(s.key,e)})]});case"string":return(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:s.label}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-2",children:s.description}),a.jsx(ae.I,{type:s.sensitive?"password":"text",value:t,onChange:e=>m(s.key,e.target.value),className:"w-full"})]});case"number":return(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:s.label}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-2",children:s.description}),a.jsx(ae.I,{type:"number",value:t,onChange:e=>m(s.key,parseInt(e.target.value)),className:"w-full",min:s.min,max:s.max})]});case"slider":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-sm font-medium",children:s.label}),(0,a.jsxs)(F.C,{variant:"outline",children:[Array.isArray(t)?t[0]:t," ",s.unit]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:s.description}),a.jsx(Se.i,{value:Array.isArray(t)?t:[t],onValueChange:e=>m(s.key,e),min:s.min,max:s.max,step:1,className:"w-full"})]});case"select":return(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:s.label}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-2",children:s.description}),(0,a.jsxs)(te.Ph,{value:t,onValueChange:e=>m(s.key,e),children:[a.jsx(te.i4,{children:a.jsx(te.ki,{})}),a.jsx(te.Bw,{children:s.options?.map((e=>a.jsx(te.Ql,{value:e.value,children:e.label},e.value)))})]})]});case"textarea":return(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:s.label}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-2",children:s.description}),a.jsx(Ce.g,{value:t,onChange:e=>m(s.key,e.target.value),className:"w-full",rows:3})]});default:return null}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(P.Z,{className:"h-6 w-6"}),"System Configuration"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage system settings and preferences"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[n&&(0,a.jsxs)(F.C,{variant:"secondary",children:[a.jsx(c.Z,{className:"h-3 w-3 mr-1"}),"Unsaved Changes"]}),(0,a.jsxs)(h.z,{variant:"outline",onClick:()=>{const e={};Ze.forEach((s=>{s.settings.forEach((s=>{e[s.key]=s.value}))})),s(e),l(!1)},disabled:!n||o,children:[a.jsx(_e.Z,{className:"h-4 w-4 mr-2"}),"Reset"]}),(0,a.jsxs)(h.z,{onClick:async()=>{d(!0),await new Promise((e=>setTimeout(e,2e3))),l(!1),d(!1)},disabled:!n||o,children:[a.jsx(oe.Z,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)(ee.Zb,{children:[a.jsx(ee.Ol,{children:a.jsx(ee.ll,{className:"text-lg",children:"Settings Categories"})}),a.jsx(ee.aY,{className:"p-0",children:a.jsx("div",{className:"space-y-1",children:Ze.map((e=>(0,a.jsxs)("button",{onClick:()=>i(e.id),className:(0,f.cn)("w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3",t===e.id&&"bg-blue-50 dark:bg-blue-950 border-r-2 border-blue-500"),children:[e.icon,(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:e.title}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]},e.id)))})})]})}),(0,a.jsxs)("div",{className:"lg:col-span-3",children:[Ze.filter((e=>e.id===t)).map((e=>a.jsx(J.Uo,{children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[e.icon,e.title]}),a.jsx(ee.SZ,{children:e.description})]}),a.jsx(ee.aY,{className:"space-y-6",children:e.settings.map((e=>a.jsx("div",{className:"p-4 border rounded-lg",children:u(e)},e.key)))})]})},e.id))),(0,a.jsxs)(ee.Zb,{className:"mt-6",children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(H.Z,{className:"h-5 w-5"}),"Configuration Management"]}),a.jsx(ee.SZ,{children:"Export or import system configuration"})]}),a.jsx(ee.aY,{children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(h.z,{variant:"outline",children:[a.jsx(ne.Z,{className:"h-4 w-4 mr-2"}),"Export Config"]}),(0,a.jsxs)(h.z,{variant:"outline",children:[a.jsx(ne.Z,{className:"h-4 w-4 mr-2"}),"Import Config"]})]})})]})]})]})]})}var Ee=t(91904),Te=t(63712),Re=t(86847),Me=t(81057),Ue=t(93680),ze=t(86078),Pe=t(55642);function Oe(){const[e,s]=(0,r.useState)("overview"),[t,i]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null),[m,u]=(0,r.useState)({threatLevel:"low",totalAlerts:0,activeThreats:0,blockedAttacks:0,securityScore:100,vulnerabilities:{critical:0,high:0,medium:0,low:0}}),[x,p]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),{data:N,isConnected:w}=(0,Te.sO)("/api/security/events/stream");(0,r.useEffect)((()=>{(async()=>{try{l(!0),d(null);const[e,s,t,a,r]=await Promise.all([Ee.x1.get("/api/security/threats"),Ee.x1.get("/api/security/vulnerabilities"),Ee.x1.get("/api/security/compliance"),Ee.x1.get("/api/security/incidents"),Ee.x1.get("/api/security/audit/statistics")]),i=e.data||[],n=s.data||[],c=t.data||{},o=a.data||[],m=r.data||{};u({threatLevel:i.length>10?"high":i.length>5?"medium":"low",totalAlerts:i.length+o.length,activeThreats:i.filter((e=>"active"===e.status)).length,blockedAttacks:i.filter((e=>"blocked"===e.status)).length,securityScore:c.score||m.overallScore||85,vulnerabilities:{critical:n.filter((e=>"critical"===e.severity)).length,high:n.filter((e=>"high"===e.severity)).length,medium:n.filter((e=>"medium"===e.severity)).length,low:n.filter((e=>"low"===e.severity)).length}}),p([...i,...o].slice(0,10));const[x]=await Promise.all([Ee.x1.get("/api/security/events")]),h=(x.data||[]).filter((e=>"session"===e.type||"login"===e.type));j(h.map((e=>({id:e.id,user:e.user||e.actor||"Unknown",ip:e.source_ip||e.ip||"Unknown",location:e.location||"Unknown",device:e.user_agent||e.device||"Unknown",started:e.timestamp||(new Date).toISOString(),lastActivity:e.timestamp||(new Date).toISOString(),risk:e.risk_level||"low"}))).slice(0,10));const g=[...i,...o].filter((e=>"blocked"===e.status));v(g.map((e=>({ip:e.source_ip||e.source||"Unknown",reason:e.description||e.title||"Security violation",blockedAt:e.timestamp||(new Date).toISOString(),attempts:e.attempt_count||1,status:e.block_type||"temporary"}))).slice(0,10))}catch(e){d("Failed to load security data"),j([]),v([])}finally{l(!1)}})()}),[]),(0,r.useEffect)((()=>{N&&("threat_detected"===N.type&&(u((e=>({...e,totalAlerts:e.totalAlerts+1,activeThreats:e.activeThreats+1}))),p((e=>[N,...e].slice(0,10)))),"threat_resolved"===N.type&&u((e=>({...e,activeThreats:Math.max(0,e.activeThreats-1),blockedAttacks:e.blockedAttacks+1}))),"vulnerability_found"===N.type&&u((e=>({...e,vulnerabilities:{...e.vulnerabilities,[N.severity]:e.vulnerabilities[N.severity]+1}}))))}),[N]);const k=e=>{switch(e){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-blue-500";default:return"bg-gray-500"}},S=e=>{switch(e){case"critical":case"high":return"destructive";case"medium":return"secondary";default:return"outline"}},C=e=>{switch(e){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}},_=e=>{const s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/1e3/60);return a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:`${Math.floor(a/1440)}d ago`};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(M.Z,{className:"h-6 w-6"}),"Security Dashboard"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor security events, threats, and system protection"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(F.C,{variant:"high"===m.threatLevel?"destructive":"secondary",className:"capitalize",children:[m.threatLevel," Threat Level"]}),(0,a.jsxs)(h.z,{variant:"outline",children:[a.jsx(H.Z,{className:"h-4 w-4 mr-2"}),"Security Report"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(J.Uo,{delay:.1,children:a.jsx(ee.Zb,{children:(0,a.jsxs)(ee.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Security Score"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[m.securityScore,"%"]})]}),a.jsx(M.Z,{className:"h-8 w-8 text-green-600"})]}),a.jsx(Re.E,{value:m.securityScore,className:"mt-3"})]})})}),a.jsx(J.Uo,{delay:.2,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Threats"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.activeThreats})]}),a.jsx(c.Z,{className:"h-8 w-8 text-red-600"})]})})})}),a.jsx(J.Uo,{delay:.3,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Blocked Attacks"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.blockedAttacks})]}),a.jsx(ge.Z,{className:"h-8 w-8 text-blue-600"})]})})})}),a.jsx(J.Uo,{delay:.4,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Alerts"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m.totalAlerts})]}),a.jsx(E.Z,{className:"h-8 w-8 text-orange-600"})]})})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(J.Uo,{delay:.5,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-5 w-5"}),"Security Alerts"]}),a.jsx(ee.SZ,{children:"Recent security events requiring attention"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"space-y-4",children:x.map((e=>(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:()=>i(e),children:[a.jsx("div",{className:(0,f.cn)("h-3 w-3 rounded-full mt-2",k(e.severity))}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[a.jsx("h4",{className:"font-medium text-sm",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx(F.C,{variant:S(e.severity),children:e.severity}),a.jsx("span",{className:"text-xs text-gray-500",children:_(e.timestamp)})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Source: ",e.source]}),(0,a.jsxs)("span",{children:["User: ",e.user]}),a.jsx(F.C,{variant:"outline",className:(0,f.cn)("text-xs","active"===e.status?"text-red-600":"blocked"===e.status?"text-blue-600":"resolved"===e.status?"text-green-600":"text-gray-600"),children:e.status})]})]})]},e.id)))})})]})})}),a.jsx("div",{children:a.jsx(J.Uo,{delay:.6,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(Me.Z,{className:"h-5 w-5"}),"Vulnerabilities"]}),a.jsx(ee.SZ,{children:"Security vulnerabilities by severity"})]}),(0,a.jsxs)(ee.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-3 w-3 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-sm",children:"Critical"})]}),a.jsx(F.C,{variant:"destructive",children:m.vulnerabilities.critical})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-3 w-3 bg-orange-500 rounded-full"}),a.jsx("span",{className:"text-sm",children:"High"})]}),a.jsx(F.C,{variant:"destructive",children:m.vulnerabilities.high})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-3 w-3 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-sm",children:"Medium"})]}),a.jsx(F.C,{variant:"secondary",children:m.vulnerabilities.medium})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-3 w-3 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-sm",children:"Low"})]}),a.jsx(F.C,{variant:"outline",children:m.vulnerabilities.low})]}),(0,a.jsxs)(h.z,{className:"w-full mt-4",variant:"outline",children:[a.jsx(ie.Z,{className:"h-4 w-4 mr-2"}),"Vulnerability Report"]})]})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(J.Uo,{delay:.7,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(Ue.Z,{className:"h-5 w-5"}),"Active Sessions"]}),a.jsx(ee.SZ,{children:"Currently active user sessions"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"space-y-4",children:g.map((e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm",children:e.user}),(0,a.jsxs)(F.C,{variant:"outline",className:C(e.risk),children:[e.risk," risk"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(ze.Z,{className:"h-3 w-3"}),e.ip," \u2022 ",e.location]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(b.Z,{className:"h-3 w-3"}),e.device]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(fe.Z,{className:"h-3 w-3"}),"Active: ",_(e.lastActivity)]})]})]}),a.jsx(h.z,{size:"sm",variant:"outline",className:"ml-2",children:a.jsx(ge.Z,{className:"h-3 w-3"})})]},e.id)))})})]})}),a.jsx(J.Uo,{delay:.8,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(ge.Z,{className:"h-5 w-5"}),"Blocked IP Addresses"]}),a.jsx(ee.SZ,{children:"Recently blocked suspicious IP addresses"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"space-y-4",children:y.map(((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono text-sm",children:e.ip}),a.jsx(F.C,{variant:"permanent"===e.status?"destructive":"secondary",children:e.status})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[(0,a.jsxs)("div",{children:["Reason: ",e.reason]}),(0,a.jsxs)("div",{children:["Attempts: ",e.attempts," \u2022 Blocked: ",_(e.blockedAt)]})]})]}),a.jsx(h.z,{size:"sm",variant:"ghost",className:"ml-2",children:a.jsx(Pe.Z,{className:"h-3 w-3"})})]},s)))})})]})})]})]})}var De=t(50007),Le=t(71817);const Ie=(0,m.Z)("Minus",[["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]);function qe({title:e,value:s,unit:t,change:r,changeLabel:i,status:n="neutral",icon:l,className:c}){return(0,a.jsxs)(ee.Zb,{className:(0,f.cn)("relative overflow-hidden",c),children:[(0,a.jsxs)(ee.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ee.ll,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e}),l&&a.jsx("div",{className:(0,f.cn)("p-2 rounded-lg",{success:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",error:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",neutral:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}[n]),children:l})]}),(0,a.jsxs)(ee.aY,{children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold",children:s}),t&&a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]}),(void 0!==r||i)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[void 0!==r&&(0,a.jsxs)("div",{className:(0,f.cn)("flex items-center gap-1",r?"success"===n?r>0?"text-green-600":"text-red-600":"error"===n?r>0?"text-red-600":"text-green-600":r>0?"text-blue-600":"text-orange-600":"text-gray-500"),children:[r?r>0?a.jsx(De.Z,{className:"h-4 w-4"}):r<0?a.jsx(Le.Z,{className:"h-4 w-4"}):a.jsx(Ie,{className:"h-4 w-4"}):null,(0,a.jsxs)("span",{className:"text-sm font-medium",children:[Math.abs(r),"%"]})]}),i&&a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:i})]}),"neutral"!==n&&a.jsx("div",{className:(0,f.cn)("absolute bottom-0 left-0 right-0 h-1","success"===n&&"bg-green-500","warning"===n&&"bg-yellow-500","error"===n&&"bg-red-500")})]})]})}const $e={total:1247,active:892,pending:23,suspended:12,growth:8.5},Ve={loginAttempts:15432,failedLogins:234,sessions:167,alerts:5},Fe={uptime:"99.97%",diskUsage:67,memoryUsage:73,cpuUsage:45,networkThroughput:2.4},Be={connections:45,maxConnections:100,queryTime:12.3,slowQueries:3},Qe=[{service:"Authentication Service",status:"healthy",uptime:"99.98%",responseTime:"45ms"},{service:"Database Cluster",status:"healthy",uptime:"99.95%",responseTime:"12ms"},{service:"VM Management",status:"warning",uptime:"99.87%",responseTime:"156ms"},{service:"Storage Backend",status:"healthy",uptime:"99.99%",responseTime:"23ms"},{service:"Network Overlay",status:"healthy",uptime:"99.94%",responseTime:"8ms"}],Ye=[{id:1,type:"security",severity:"high",message:"Multiple failed login attempts detected",time:"2 min ago"},{id:2,type:"performance",severity:"medium",message:"VM migration queue exceeding threshold",time:"15 min ago"},{id:3,type:"system",severity:"low",message:"Scheduled maintenance reminder",time:"1 hour ago"},{id:4,type:"security",severity:"high",message:"Unusual API access pattern detected",time:"2 hours ago"}];function We(){const[e,s]=(0,r.useState)(!1),t=e=>{switch(e){case"high":return"destructive";case"medium":return"secondary";default:return"outline"}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"System Overview"}),a.jsx(h.z,{variant:"outline",onClick:async()=>{s(!0),await new Promise((e=>setTimeout(e,1500))),s(!1)},disabled:e,children:e?"Refreshing...":"Refresh Metrics"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(J.Uo,{delay:.1,children:a.jsx(qe,{title:"Total Users",value:a.jsx(J.f,{value:$e.total}),change:$e.growth,changeLabel:"vs last month",status:"success",icon:a.jsx(z.Z,{className:"h-5 w-5"})})}),a.jsx(J.Uo,{delay:.2,children:a.jsx(qe,{title:"System Uptime",value:Fe.uptime,change:.02,changeLabel:"vs last month",status:"success",icon:a.jsx(fe.Z,{className:"h-5 w-5"})})}),a.jsx(J.Uo,{delay:.3,children:a.jsx(qe,{title:"Security Alerts",value:a.jsx(J.f,{value:Ve.alerts}),change:-15,changeLabel:"vs last week",status:"warning",icon:a.jsx(M.Z,{className:"h-5 w-5"})})}),a.jsx(J.Uo,{delay:.4,children:a.jsx(qe,{title:"DB Connections",value:`${Be.connections}/${Be.maxConnections}`,change:8,changeLabel:"active sessions",status:"success",icon:a.jsx(T.Z,{className:"h-5 w-5"})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(J.Uo,{delay:.5,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(G,{className:"h-5 w-5"}),"User Statistics"]}),a.jsx(ee.SZ,{children:"Active user engagement and account status"})]}),(0,a.jsxs)(ee.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Active Users"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:$e.active}),a.jsx(De.Z,{className:"h-4 w-4 text-green-600"})]})]}),a.jsx(Re.E,{value:$e.active/$e.total*100,className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Pending Approvals"}),a.jsx(F.C,{variant:"secondary",children:$e.pending})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Suspended Accounts"}),a.jsx(F.C,{variant:"destructive",children:$e.suspended})]})]})]})}),a.jsx(J.Uo,{delay:.6,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(A.Z,{className:"h-5 w-5"}),"System Resources"]}),a.jsx(ee.SZ,{children:"Current system resource utilization"})]}),(0,a.jsxs)(ee.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{children:"CPU Usage"}),(0,a.jsxs)("span",{className:"font-semibold",children:[Fe.cpuUsage,"%"]})]}),a.jsx(Re.E,{value:Fe.cpuUsage,className:"h-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{children:"Memory Usage"}),(0,a.jsxs)("span",{className:"font-semibold",children:[Fe.memoryUsage,"%"]})]}),a.jsx(Re.E,{value:Fe.memoryUsage,className:"h-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{children:"Disk Usage"}),(0,a.jsxs)("span",{className:"font-semibold",children:[Fe.diskUsage,"%"]})]}),a.jsx(Re.E,{value:Fe.diskUsage,className:"h-2"})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(J.Uo,{delay:.7,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(E.Z,{className:"h-5 w-5"}),"Service Health"]}),a.jsx(ee.SZ,{children:"Status of critical system services"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"space-y-3",children:Qe.map(((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-3 w-3 rounded-full "+("healthy"===e.status?"bg-green-500":"warning"===e.status?"bg-yellow-500":"bg-red-500")}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:e.service}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.uptime," uptime \u2022 ",e.responseTime]})]})]}),a.jsx(F.C,{variant:"healthy"===e.status?"secondary":"destructive",children:e.status})]},s)))})})]})}),a.jsx(J.Uo,{delay:.8,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-5 w-5"}),"Recent Alerts"]}),a.jsx(ee.SZ,{children:"Latest system alerts and notifications"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"space-y-3",children:Ye.map((e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(F.C,{variant:t(e.severity),className:"shrink-0",children:e.severity}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:e.message}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.time})]})]}),a.jsx(h.z,{variant:"ghost",size:"sm",children:a.jsx(be.Z,{className:"h-4 w-4"})})]},e.id)))})})]})})]})]})}var Ke=t(23294);const Je=(0,m.Z)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ge=[{id:1,timestamp:"2024-08-24T14:30:15Z",user:"admin@novacron.io",action:"USER_LOGIN",resource:"Authentication System",resourceId:"session_12345",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",details:"Successful login with 2FA",category:"authentication",severity:"info"},{id:2,timestamp:"2024-08-24T14:28:42Z",user:"manager@company.com",action:"VM_CREATED",resource:"Virtual Machine",resourceId:"vm_web_server_03",ip:"203.0.113.42",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",status:"success",details:"Created new VM: web-server-03 with 4GB RAM, 2 vCPUs",category:"vm_management",severity:"info"},{id:3,timestamp:"2024-08-24T14:25:18Z",user:"operator@startup.io",action:"CONFIG_CHANGED",resource:"System Configuration",resourceId:"config_security_settings",ip:"198.51.100.75",userAgent:"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36",status:"success",details:"Updated password policy: minimum length changed from 8 to 12 characters",category:"system_config",severity:"warning"},{id:4,timestamp:"2024-08-24T14:20:33Z",user:"hacker@malicious.com",action:"LOGIN_FAILED",resource:"Authentication System",resourceId:null,ip:"192.0.2.100",userAgent:"curl/7.68.0",status:"failed",details:"Failed login attempt: invalid credentials (attempt 15/5)",category:"authentication",severity:"critical"},{id:5,timestamp:"2024-08-24T14:18:07Z",user:"admin@novacron.io",action:"USER_SUSPENDED",resource:"User Account",resourceId:"user_suspicious_activity",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",details:"Suspended user account due to suspicious activity patterns",category:"user_management",severity:"warning"},{id:6,timestamp:"2024-08-24T14:15:22Z",user:"data-analyst@company.com",action:"DATA_EXPORTED",resource:"Database",resourceId:"export_user_data_q3_2024",ip:"10.0.0.45",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",details:"Exported 15,432 user records for Q3 2024 analysis",category:"data_access",severity:"info"},{id:7,timestamp:"2024-08-24T14:12:55Z",user:"vm-operator@datacenter.net",action:"VM_MIGRATED",resource:"Virtual Machine",resourceId:"vm_database_primary",ip:"172.16.0.25",userAgent:"NovaCron-CLI/2.1.0",status:"success",details:"Migrated VM from node-01 to node-03, migration time: 4m 23s",category:"vm_management",severity:"info"},{id:8,timestamp:"2024-08-24T14:10:10Z",user:"security-admin@novacron.io",action:"IP_BLOCKED",resource:"Security System",resourceId:"block_rule_automated_001",ip:"192.168.1.50",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",details:"Automatically blocked IP 192.0.2.100 after 25 failed login attempts",category:"security",severity:"warning"}],He=[{value:"all",label:"All Categories"},{value:"authentication",label:"Authentication"},{value:"user_management",label:"User Management"},{value:"vm_management",label:"VM Management"},{value:"system_config",label:"System Configuration"},{value:"data_access",label:"Data Access"},{value:"security",label:"Security Events"}],Xe=[{value:"all",label:"All Severities"},{value:"critical",label:"Critical"},{value:"warning",label:"Warning"},{value:"info",label:"Info"}];function es(){const[e,s]=(0,r.useState)(Ge),[t,i]=(0,r.useState)(""),[n,l]=(0,r.useState)("all"),[c,o]=(0,r.useState)("all"),[d,m]=(0,r.useState)("all"),[u,x]=(0,r.useState)(null),p=e.filter((e=>{const s=e.user.toLowerCase().includes(t.toLowerCase())||e.action.toLowerCase().includes(t.toLowerCase())||e.resource.toLowerCase().includes(t.toLowerCase())||e.details.toLowerCase().includes(t.toLowerCase())||e.ip.includes(t),a="all"===n||e.category===n,r="all"===c||e.severity===c,i="all"===d||e.status===d;return s&&a&&r&&i})),g=e=>{switch(e){case"USER_LOGIN":return a.jsx(Ke.Z,{className:"h-4 w-4 text-blue-600"});case"LOGIN_FAILED":return a.jsx(Me.Z,{className:"h-4 w-4 text-red-600"});case"USER_CREATED":return a.jsx(ye.Z,{className:"h-4 w-4 text-green-600"});case"USER_SUSPENDED":return a.jsx(Je,{className:"h-4 w-4 text-orange-600"});case"VM_CREATED":return a.jsx(A.Z,{className:"h-4 w-4 text-green-600"});case"VM_MIGRATED":return a.jsx(E.Z,{className:"h-4 w-4 text-blue-600"});case"CONFIG_CHANGED":return a.jsx(P.Z,{className:"h-4 w-4 text-orange-600"});case"DATA_EXPORTED":return a.jsx(ie.Z,{className:"h-4 w-4 text-purple-600"});case"IP_BLOCKED":return a.jsx(M.Z,{className:"h-4 w-4 text-red-600"});default:return a.jsx(H.Z,{className:"h-4 w-4 text-gray-600"})}},j=e=>{switch(e){case"critical":return"destructive";case"warning":return"secondary";default:return"outline"}},y=e=>{switch(e){case"success":return a.jsx(pe.Z,{className:"h-4 w-4 text-green-600"});case"failed":return a.jsx(Me.Z,{className:"h-4 w-4 text-red-600"});default:return a.jsx(fe.Z,{className:"h-4 w-4 text-gray-600"})}},v=e=>{const s=new Date(e);return{date:s.toLocaleDateString(),time:s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(H.Z,{className:"h-6 w-6"}),"Audit Logs"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track system events and user activities"})]}),(0,a.jsxs)(h.z,{onClick:()=>{const e=["Timestamp,User,Action,Resource,IP,Status,Severity,Details",...p.map((e=>`"${e.timestamp}","${e.user}","${e.action}","${e.resource}","${e.ip}","${e.status}","${e.severity}","${e.details}"`))].join("\n"),s=new Blob([e],{type:"text/csv"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`audit_logs_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},children:[a.jsx(ie.Z,{className:"h-4 w-4 mr-2"}),"Export Logs"]})]}),a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(ce.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ae.I,{placeholder:"Search logs...",value:t,onChange:e=>i(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(te.Ph,{value:n,onValueChange:l,children:[a.jsx(te.i4,{children:a.jsx(te.ki,{placeholder:"Category"})}),a.jsx(te.Bw,{children:He.map((e=>a.jsx(te.Ql,{value:e.value,children:e.label},e.value)))})]}),(0,a.jsxs)(te.Ph,{value:c,onValueChange:o,children:[a.jsx(te.i4,{children:a.jsx(te.ki,{placeholder:"Severity"})}),a.jsx(te.Bw,{children:Xe.map((e=>a.jsx(te.Ql,{value:e.value,children:e.label},e.value)))})]}),(0,a.jsxs)(te.Ph,{value:d,onValueChange:m,children:[a.jsx(te.i4,{children:a.jsx(te.ki,{placeholder:"Status"})}),(0,a.jsxs)(te.Bw,{children:[a.jsx(te.Ql,{value:"all",children:"All Statuses"}),a.jsx(te.Ql,{value:"success",children:"Success"}),a.jsx(te.Ql,{value:"failed",children:"Failed"})]})]}),a.jsx("div",{className:"flex items-center justify-center",children:(0,a.jsxs)(F.C,{variant:"outline",children:[p.length," entries"]})})]})})}),a.jsx(J.Uo,{children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[a.jsx(ee.ll,{children:"System Audit Trail"}),a.jsx(ee.SZ,{children:"Chronological record of all system activities and events"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)(se.iA,{children:[a.jsx(se.xD,{children:(0,a.jsxs)(se.SC,{children:[a.jsx(se.ss,{children:"Timestamp"}),a.jsx(se.ss,{children:"User"}),a.jsx(se.ss,{children:"Action"}),a.jsx(se.ss,{children:"Resource"}),a.jsx(se.ss,{children:"Status"}),a.jsx(se.ss,{children:"Severity"}),a.jsx(se.ss,{children:"Source IP"}),a.jsx(se.ss,{children:"Actions"})]})}),a.jsx(se.RM,{children:p.map((e=>{const s=v(e.timestamp);return(0,a.jsxs)(se.SC,{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:s.date}),a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:s.time})]})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(Ue.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"font-mono text-sm",children:e.user})]})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[g(e.action),a.jsx("span",{className:"font-medium text-sm",children:e.action.replace(/_/g," ")})]})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:e.resource}),e.resourceId&&a.jsx("div",{className:"text-gray-600 dark:text-gray-400 font-mono text-xs",children:e.resourceId})]})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[y(e.status),a.jsx("span",{className:(0,f.cn)("capitalize text-sm font-medium","success"===e.status?"text-green-600":"text-red-600"),children:e.status})]})}),a.jsx(se.pj,{children:a.jsx(F.C,{variant:j(e.severity),children:e.severity})}),a.jsx(se.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(ze.Z,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"font-mono text-sm",children:e.ip})]})}),a.jsx(se.pj,{children:a.jsx(h.z,{size:"sm",variant:"ghost",onClick:()=>x(e),className:"h-7 w-7 p-0",children:a.jsx(be.Z,{className:"h-3 w-3"})})})]},e.id)}))})]})})})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(ee.Zb,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsx(ee.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[g(u.action),"Log Entry Details"]}),a.jsx(h.z,{variant:"ghost",size:"sm",onClick:()=>x(null),children:a.jsx(Me.Z,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(ee.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Timestamp:"}),(0,a.jsxs)("div",{className:"mt-1",children:[v(u.timestamp).date," ",v(u.timestamp).time]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"User:"}),a.jsx("div",{className:"mt-1 font-mono",children:u.user})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Action:"}),a.jsx("div",{className:"mt-1",children:u.action.replace(/_/g," ")})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Status:"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[y(u.status),a.jsx("span",{className:"capitalize",children:u.status})]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Resource:"}),a.jsx("div",{className:"mt-1",children:u.resource})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Severity:"}),a.jsx("div",{className:"mt-1",children:a.jsx(F.C,{variant:j(u.severity),children:u.severity})})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Source IP:"}),a.jsx("div",{className:"mt-1 font-mono",children:u.ip})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Category:"}),a.jsx("div",{className:"mt-1 capitalize",children:u.category.replace(/_/g," ")})]})]}),u.resourceId&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Resource ID:"}),a.jsx("div",{className:"mt-1 font-mono text-sm bg-gray-100 dark:bg-gray-800 p-2 rounded",children:u.resourceId})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Details:"}),a.jsx("div",{className:"mt-1 text-sm bg-gray-100 dark:bg-gray-800 p-3 rounded",children:u.details})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"User Agent:"}),a.jsx("div",{className:"mt-1 text-xs font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded break-all",children:u.userAgent})]})]})]})})]})}var ss=t(17202);const ts=[{id:"user_management",name:"User Management",icon:a.jsx(z.Z,{className:"h-4 w-4"}),permissions:[{id:"users.view",name:"View Users",description:"View user profiles and information"},{id:"users.create",name:"Create Users",description:"Add new user accounts"},{id:"users.edit",name:"Edit Users",description:"Modify user profiles and settings"},{id:"users.delete",name:"Delete Users",description:"Remove user accounts"},{id:"users.suspend",name:"Suspend Users",description:"Suspend or activate user accounts"},{id:"users.roles",name:"Manage User Roles",description:"Assign and modify user roles"}]},{id:"vm_management",name:"VM Management",icon:a.jsx(A.Z,{className:"h-4 w-4"}),permissions:[{id:"vms.view",name:"View VMs",description:"View virtual machine information"},{id:"vms.create",name:"Create VMs",description:"Create new virtual machines"},{id:"vms.edit",name:"Edit VMs",description:"Modify VM configurations"},{id:"vms.delete",name:"Delete VMs",description:"Remove virtual machines"},{id:"vms.migrate",name:"Migrate VMs",description:"Perform VM migrations"},{id:"vms.snapshots",name:"Manage Snapshots",description:"Create and manage VM snapshots"}]},{id:"system_admin",name:"System Administration",icon:a.jsx(P.Z,{className:"h-4 w-4"}),permissions:[{id:"system.config",name:"System Configuration",description:"Modify system settings"},{id:"system.logs",name:"View System Logs",description:"Access system and audit logs"},{id:"system.backup",name:"Backup Management",description:"Manage system backups"},{id:"system.maintenance",name:"Maintenance Mode",description:"Enable/disable maintenance mode"},{id:"system.updates",name:"System Updates",description:"Apply system updates and patches"}]},{id:"database",name:"Database Access",icon:a.jsx(T.Z,{className:"h-4 w-4"}),permissions:[{id:"db.view",name:"View Database",description:"Read database tables and records"},{id:"db.edit",name:"Edit Database",description:"Modify database records"},{id:"db.schema",name:"Schema Management",description:"Modify database structure"},{id:"db.backup",name:"Database Backup",description:"Create and restore database backups"}]},{id:"reporting",name:"Reports & Analytics",icon:a.jsx(U.Z,{className:"h-4 w-4"}),permissions:[{id:"reports.view",name:"View Reports",description:"Access system reports and analytics"},{id:"reports.create",name:"Create Reports",description:"Generate custom reports"},{id:"reports.export",name:"Export Data",description:"Export data and reports"},{id:"reports.schedule",name:"Schedule Reports",description:"Schedule automated reports"}]}],as=[{id:1,name:"Super Admin",description:"Full system access with all permissions",color:"red",builtin:!0,users:2,permissions:ts.flatMap((e=>e.permissions.map((e=>e.id))))},{id:2,name:"Administrator",description:"System administration with limited database access",color:"orange",builtin:!0,users:5,permissions:["users.view","users.create","users.edit","users.suspend","users.roles","vms.view","vms.create","vms.edit","vms.migrate","vms.snapshots","system.config","system.logs","system.backup","reports.view","reports.create","reports.export"]},{id:3,name:"VM Manager",description:"Virtual machine management and operations",color:"blue",builtin:!0,users:12,permissions:["users.view","vms.view","vms.create","vms.edit","vms.migrate","vms.snapshots","reports.view","reports.create"]},{id:4,name:"Read Only",description:"View-only access to system resources",color:"green",builtin:!0,users:45,permissions:["users.view","vms.view","reports.view"]}];function rs(){const[e,s]=(0,r.useState)(as),[t,i]=(0,r.useState)(null),[n,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)("roles"),u=e=>{e.builtin||(l({...e}),o(!1))},x=e=>e.permissions.length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(G,{className:"h-6 w-6"}),"Roles & Permissions"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage user roles and access permissions"})]}),(0,a.jsxs)(h.z,{onClick:()=>{const e={id:Date.now(),name:"New Role",description:"",color:"gray",builtin:!1,users:0,permissions:[]};l(e),o(!0)},disabled:!!n,children:[a.jsx(le.Z,{className:"h-4 w-4 mr-2"}),"Create Role"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{children:["Roles (",e.length,")"]}),a.jsx(ee.SZ,{children:"System roles and their permissions"})]}),a.jsx(ee.aY,{className:"p-0",children:a.jsx("div",{className:"space-y-2",children:e.map((r=>a.jsx("div",{onClick:()=>i(r),className:(0,f.cn)("p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors border-l-4",t?.id===r.id&&"bg-blue-50 dark:bg-blue-950","red"===r.color&&"border-red-500","orange"===r.color&&"border-orange-500","blue"===r.color&&"border-blue-500","green"===r.color&&"border-green-500","purple"===r.color&&"border-purple-500","gray"===r.color&&"border-gray-500"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"font-medium",children:r.name}),r.builtin&&(0,a.jsxs)(F.C,{variant:"outline",className:"text-xs",children:[a.jsx(Ke.Z,{className:"h-3 w-3 mr-1"}),"Built-in"]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:r.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[r.users," users"]}),(0,a.jsxs)("span",{children:[x(r)," permissions"]})]})]}),!r.builtin&&(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[a.jsx(h.z,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),u(r)},className:"h-7 w-7 p-0",children:a.jsx(de.Z,{className:"h-3 w-3"})}),a.jsx(h.z,{size:"sm",variant:"ghost",onClick:a=>{a.stopPropagation(),(a=>{const r=e.find((e=>e.id===a));r&&!r.builtin&&confirm(`Are you sure you want to delete the role "${r.name}"?`)&&(s((e=>e.filter((e=>e.id!==a)))),t?.id===a&&i(null))})(r.id)},className:"h-7 w-7 p-0 text-red-600",children:a.jsx(me.Z,{className:"h-3 w-3"})})]})]})},r.id)))})})]})}),a.jsx("div",{className:"lg:col-span-2",children:n?a.jsx(J.Uo,{children:(0,a.jsxs)(ee.Zb,{children:[a.jsx(ee.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(ee.ll,{children:c?"Create New Role":"Edit Role"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(h.z,{variant:"outline",onClick:()=>{l(null),o(!1)},children:[a.jsx(O.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,a.jsxs)(h.z,{onClick:()=>{n&&(s(c?e=>[...e,n]:e=>e.map((e=>e.id===n.id?n:e))),l(null),o(!1))},children:[a.jsx(oe.Z,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),(0,a.jsxs)(ee.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Role Name"}),a.jsx(ae.I,{value:n.name,onChange:e=>l({...n,name:e.target.value}),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Color"}),(0,a.jsxs)(te.Ph,{value:n.color,onValueChange:e=>l({...n,color:e}),children:[a.jsx(te.i4,{className:"mt-1",children:a.jsx(te.ki,{})}),(0,a.jsxs)(te.Bw,{children:[a.jsx(te.Ql,{value:"red",children:"Red"}),a.jsx(te.Ql,{value:"orange",children:"Orange"}),a.jsx(te.Ql,{value:"blue",children:"Blue"}),a.jsx(te.Ql,{value:"green",children:"Green"}),a.jsx(te.Ql,{value:"purple",children:"Purple"}),a.jsx(te.Ql,{value:"gray",children:"Gray"})]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description"}),a.jsx(Ce.g,{value:n.description,onChange:e=>l({...n,description:e.target.value}),className:"mt-1",rows:2})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium mb-4",children:"Permissions"}),a.jsx("div",{className:"space-y-6",children:ts.map((e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("h5",{className:"font-medium flex items-center gap-2 mb-3",children:[e.icon,e.name]}),a.jsx("div",{className:"space-y-3",children:e.permissions.map((e=>(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(ss.X,{checked:n.permissions.includes(e.id),onCheckedChange:s=>((e,s)=>{if(!n)return;const t=s?[...n.permissions,e]:n.permissions.filter((s=>s!==e));l({...n,permissions:t})})(e.id,s),className:"mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm",children:e.name}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]})]},e.id)))})]},e.id)))})]})]})]})}):t?a.jsx(J.Uo,{children:(0,a.jsxs)(ee.Zb,{children:[a.jsx(ee.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2",children:[t.name,t.builtin&&(0,a.jsxs)(F.C,{variant:"outline",children:[a.jsx(Ke.Z,{className:"h-3 w-3 mr-1"}),"Built-in"]})]}),a.jsx(ee.SZ,{children:t.description})]}),!t.builtin&&(0,a.jsxs)(h.z,{variant:"outline",onClick:()=>u(t),children:[a.jsx(de.Z,{className:"h-4 w-4 mr-2"}),"Edit Role"]})]})}),(0,a.jsxs)(ee.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:t.users}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Assigned Users"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[x(t),"/",ts.reduce(((e,s)=>e+s.permissions.length),0)]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Permissions"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium mb-4",children:"Assigned Permissions"}),a.jsx("div",{className:"space-y-4",children:ts.map((e=>{const s=e.permissions.filter((e=>t.permissions.includes(e.id)));return 0===s.length?null:(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("h5",{className:"font-medium flex items-center gap-2 mb-3",children:[e.icon,e.name,(0,a.jsxs)(F.C,{variant:"outline",children:[s.length,"/",e.permissions.length]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.map((e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),e.name]},e.id)))})]},e.id)}))})]})]})]})}):a.jsx(ee.Zb,{children:(0,a.jsxs)(ee.aY,{className:"p-12 text-center",children:[a.jsx(M.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a Role"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose a role from the list to view its details and permissions"})]})})})]})]})}var is=t(33657),ns=t(212),ls=t(74676);const cs=()=>{const e=(0,ns.NL)(),{connectionState:s,subscribeToChannel:t,unsubscribeFromChannel:a}=(()=>{const{toast:e}=(0,l.p)(),s=(0,ns.NL)(),[t,a]=(0,r.useState)({isConnected:!1,connectionState:is.kQ.UNINSTANTIATED,lastMessage:null,reconnectAttempts:0,error:null}),i=(0,r.useRef)(),n=`${process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8091"}/admin/ws`,{sendMessage:c,lastMessage:o,readyState:d,getWebSocket:m}=(0,is.ZP)(n,{onOpen:()=>{a((e=>({...e,isConnected:!0,connectionState:d,error:null,reconnectAttempts:0})));const e=localStorage.getItem("novacron_token");e&&c(JSON.stringify({type:"auth",token:e})),c(JSON.stringify({type:"subscribe",channels:["system_metrics","security_alerts","user_activity","vm_status","audit_logs","config_changes"]}))},onClose:e=>{if(a((s=>({...s,isConnected:!1,connectionState:d,error:e.reason||"Connection closed"}))),1e3!==e.code){const e=t.reconnectAttempts+1,s=Math.min(1e3*Math.pow(2,e),3e4);a((s=>({...s,reconnectAttempts:e}))),i.current=setTimeout((()=>{m()?.close()}),s)}},onError:e=>{a((e=>({...e,error:"Connection error occurred"})))},onMessage:e=>{try{const s=JSON.parse(e.data);u(s),a((e=>({...e,lastMessage:s})))}catch(s){}},shouldReconnect:e=>1e3!==e.code&&4001!==e.code,reconnectInterval:e=>Math.min(1e3*Math.pow(2,e),3e4),reconnectAttempts:10,heartbeat:{message:JSON.stringify({type:"ping"}),returnMessage:JSON.stringify({type:"pong"}),timeout:6e4,interval:3e4}}),u=(0,r.useCallback)((t=>{switch(t.type){case"system_metrics":s.setQueryData(ls.rS.SYSTEM_METRICS,(e=>e?[...e.slice(-49),t.data]:[t.data]));break;case"security_alert":s.setQueryData(ls.rS.SECURITY_ALERTS,(e=>e?{...e,alerts:[t.data,...e.alerts],total:e.total+1}:{alerts:[t.data],total:1})),["high","critical"].includes(t.data.severity)&&e({title:"Security Alert",description:t.data.title,variant:"critical"===t.data.severity?"destructive":"default"});break;case"user_activity":s.invalidateQueries({queryKey:ls.rS.USERS}),"login_failed"===t.data.action&&t.data.count>5&&e({title:"Suspicious Activity",description:`Multiple failed login attempts detected for ${t.data.email}`,variant:"destructive"});break;case"vm_status":s.setQueryData(["vms"],(e=>e?{...e,vms:e.vms?.map((e=>e.id===t.data.id?{...e,...t.data}:e))}:e)),t.data.previous_status&&t.data.status!==t.data.previous_status&&e({title:"VM Status Changed",description:`${t.data.name}: ${t.data.previous_status} \u2192 ${t.data.status}`});break;case"audit_log":s.setQueryData(ls.rS.AUDIT_LOGS,(e=>e?{...e,logs:[t.data,...e.logs.slice(0,99)],total:e.total+1}:{logs:[t.data],total:1}));break;case"config_change":s.invalidateQueries({queryKey:ls.rS.SYSTEM_CONFIG}),e({title:"Configuration Updated",description:`${t.data.key} has been changed by ${t.data.updated_by}`})}}),[s,e]);(0,r.useEffect)((()=>{a((e=>({...e,connectionState:d,isConnected:d===is.kQ.OPEN})))}),[d]),(0,r.useEffect)((()=>()=>{i.current&&clearTimeout(i.current)}),[]);const x=(0,r.useCallback)((e=>{d===is.kQ.OPEN&&c(JSON.stringify({type:"subscribe",channel:e}))}),[d,c]),h=(0,r.useCallback)((e=>{d===is.kQ.OPEN&&c(JSON.stringify({type:"unsubscribe",channel:e}))}),[d,c]),p=(0,r.useCallback)((()=>{d===is.kQ.OPEN&&c(JSON.stringify({type:"request_snapshot",data_type:"system_metrics"}))}),[d,c]),g=(0,r.useCallback)(((e,s)=>{d===is.kQ.OPEN&&c(JSON.stringify({type:"command",command:e,data:s}))}),[d,c]);return{connectionState:t,lastMessage:t.lastMessage,sendMessage:c,subscribeToChannel:x,unsubscribeFromChannel:h,requestMetricsSnapshot:p,sendCommand:g}})(),[i,n]=(0,r.useState)([]),[c,o]=(0,r.useState)([]);return(0,r.useEffect)((()=>(t("system_metrics"),t("security_alerts"),t("user_activity"),()=>{a("system_metrics"),a("security_alerts"),a("user_activity")})),[t,a]),(0,r.useEffect)((()=>e.getQueryCache().subscribe((e=>{if("updated"===e.type&&("admin"===e.query.queryKey[0]&&"system-metrics"===e.query.queryKey[1]&&n(e.query.state.data||[]),"admin"===e.query.queryKey[0]&&"security-alerts"===e.query.queryKey[1])){const s=e.query.state.data;o(s?.alerts||[])}}))),[e]),{isConnected:s.isConnected,metrics:i,alerts:c,connectionState:s.connectionState,error:s.error}};var os=t(14172),ds=t(50257),ms=t(63647),us=t(34707),xs=t(24300),hs=t(35522),ps=t(24025),gs=t(40086),fs=t(7501),js=t(84753),ys=t(53937),vs=t(82150),bs=t(26826),Ns=t(8081);const ws=()=>({timestamp:(new Date).toISOString(),cpu_usage:Math.floor(30*Math.random())+40,memory_usage:Math.floor(25*Math.random())+55,disk_usage:Math.floor(15*Math.random())+60,network_in:5*Math.random()+1,network_out:3*Math.random()+.5,active_connections:Math.floor(100*Math.random())+150,response_time:Math.floor(50*Math.random())+25}),ks=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00"],Ss=()=>{const{isConnected:e,metrics:s,alerts:t,connectionState:i,error:n}=cs(),[l,d]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0);(0,r.useEffect)((()=>{if(m){const e=setInterval((()=>{d((e=>[...e,ws()].slice(-20)))}),2e3);return()=>clearInterval(e)}}),[m]),(0,r.useEffect)((()=>{const e=Array.from({length:10},(()=>ws()));d(e)}),[]);const x=(e=>{switch(e){case is.kQ.CONNECTING:return{status:"Connecting...",color:"text-yellow-600",icon:"\u26a1"};case is.kQ.OPEN:return{status:"Connected",color:"text-green-600",icon:"\ud83d\udfe2"};case is.kQ.CLOSING:return{status:"Disconnecting...",color:"text-yellow-600",icon:"\u26a0\ufe0f"};case is.kQ.CLOSED:return{status:"Disconnected",color:"text-red-600",icon:"\ud83d\udd34"};default:return{status:"Unknown",color:"text-gray-600",icon:"\u2753"}}})(i),p=l[l.length-1],g=p?Math.round((100-p.cpu_usage+(100-p.memory_usage)+(100-p.disk_usage))/3):0,j=(e,s)=>e>s?a.jsx(De.Z,{className:"h-3 w-3 text-red-500"}):e<s?a.jsx(Le.Z,{className:"h-3 w-3 text-green-500"}):a.jsx(Ie,{className:"h-3 w-3 text-gray-500"}),y=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e?a.jsx(os.Z,{className:"h-5 w-5 text-green-600"}):a.jsx(ds.Z,{className:"h-5 w-5 text-red-600"}),a.jsx("span",{className:(0,f.cn)("text-sm font-medium",x.color),children:x.status})]}),n&&a.jsx(F.C,{variant:"destructive",className:"text-xs",children:n})]}),a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>u(!m),className:(0,f.cn)("flex items-center gap-2",m&&"bg-green-50 border-green-200 text-green-700"),children:[a.jsx(o.Z,{className:(0,f.cn)("h-4 w-4",m&&"animate-spin")}),m?"Auto-Refresh On":"Auto-Refresh Off"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(J.Uo,{delay:.1,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"System Health"}),(0,a.jsxs)("p",{className:(0,f.cn)("text-xl font-bold",(v=g,v>=80?"text-green-600":v>=60?"text-yellow-600":"text-red-600")),children:[g,"%"]}),l.length>1&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[j(g,75),a.jsx("span",{className:"text-xs text-gray-600",children:"vs previous"})]})]}),a.jsx(E.Z,{className:"h-6 w-6 text-blue-600"})]})})})}),a.jsx(J.Uo,{delay:.2,children:a.jsx(ee.Zb,{children:(0,a.jsxs)(ee.aY,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"CPU Usage"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:[p?.cpu_usage||0,"%"]}),l.length>1&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[j(p?.cpu_usage||0,l[l.length-2]?.cpu_usage||0),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.abs((p?.cpu_usage||0)-(l[l.length-2]?.cpu_usage||0)).toFixed(1),"%"]})]})]}),a.jsx(A.Z,{className:"h-6 w-6 text-purple-600"})]}),a.jsx("div",{className:"mt-2",children:a.jsx(Re.E,{value:p?.cpu_usage||0,className:"h-1"})})]})})}),a.jsx(J.Uo,{delay:.3,children:a.jsx(ee.Zb,{children:(0,a.jsxs)(ee.aY,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Memory Usage"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:[p?.memory_usage||0,"%"]}),l.length>1&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[j(p?.memory_usage||0,l[l.length-2]?.memory_usage||0),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.abs((p?.memory_usage||0)-(l[l.length-2]?.memory_usage||0)).toFixed(1),"%"]})]})]}),a.jsx(T.Z,{className:"h-6 w-6 text-green-600"})]}),a.jsx("div",{className:"mt-2",children:a.jsx(Re.E,{value:p?.memory_usage||0,className:"h-1"})})]})})}),a.jsx(J.Uo,{delay:.4,children:a.jsx(ee.Zb,{children:a.jsx(ee.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Active Connections"}),a.jsx("p",{className:"text-xl font-bold",children:p?.active_connections||0}),l.length>1&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[j(p?.active_connections||0,l[l.length-2]?.active_connections||0),a.jsx("span",{className:"text-xs text-gray-600",children:Math.abs((p?.active_connections||0)-(l[l.length-2]?.active_connections||0))})]})]}),a.jsx(z.Z,{className:"h-6 w-6 text-orange-600"})]})})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(J.Uo,{delay:.5,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2 text-base",children:[a.jsx(E.Z,{className:"h-4 w-4"}),"System Resources (Live)"]}),a.jsx(ee.SZ,{children:"Real-time CPU, Memory, and Disk usage"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"h-48",children:a.jsx(ms.h,{width:"100%",height:"100%",children:(0,a.jsxs)(us.w,{data:l,children:[a.jsx(xs.q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),a.jsx(hs.K,{dataKey:"timestamp",tick:{fontSize:10},tickFormatter:y,interval:"preserveStartEnd"}),a.jsx(ps.Q,{tick:{fontSize:10},domain:[0,100]}),a.jsx(gs.u,{labelFormatter:e=>y(e),formatter:(e,s)=>[`${e.toFixed(1)}%`,s.replace("_"," ").toUpperCase()]}),a.jsx(fs.x,{type:"monotone",dataKey:"cpu_usage",stroke:"#8b5cf6",strokeWidth:2,dot:!1,name:"CPU"}),a.jsx(fs.x,{type:"monotone",dataKey:"memory_usage",stroke:"#10b981",strokeWidth:2,dot:!1,name:"Memory"}),a.jsx(fs.x,{type:"monotone",dataKey:"disk_usage",stroke:"#f59e0b",strokeWidth:2,dot:!1,name:"Disk"})]})})})})]})}),a.jsx(J.Uo,{delay:.6,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2 text-base",children:[a.jsx(R.Z,{className:"h-4 w-4"}),"Network Traffic (Live)"]}),a.jsx(ee.SZ,{children:"Real-time network throughput monitoring"})]}),a.jsx(ee.aY,{children:a.jsx("div",{className:"h-48",children:a.jsx(ms.h,{width:"100%",height:"100%",children:(0,a.jsxs)(js.T,{data:l,children:[a.jsx(xs.q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),a.jsx(hs.K,{dataKey:"timestamp",tick:{fontSize:10},tickFormatter:y,interval:"preserveStartEnd"}),a.jsx(ps.Q,{tick:{fontSize:10}}),a.jsx(gs.u,{labelFormatter:e=>y(e),formatter:(e,s)=>[`${e.toFixed(2)} MB/s`,s.replace("_"," ").replace("network ","Network ").toUpperCase()]}),a.jsx(ys.uN,{type:"monotone",dataKey:"network_in",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,name:"Inbound"}),a.jsx(ys.uN,{type:"monotone",dataKey:"network_out",stackId:"1",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,name:"Outbound"})]})})})})]})})]}),a.jsx(J.Uo,{delay:.7,children:(0,a.jsxs)(ee.Zb,{children:[(0,a.jsxs)(ee.Ol,{children:[(0,a.jsxs)(ee.ll,{className:"flex items-center gap-2 text-base",children:[a.jsx(c.Z,{className:"h-4 w-4"}),"Live System Alerts"]}),a.jsx(ee.SZ,{children:"Real-time security and system alerts"})]}),a.jsx(ee.aY,{children:0===t.length?a.jsx("div",{className:"flex items-center justify-center py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(pe.Z,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-green-600 mb-2",children:"All Systems Normal"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No active alerts at this time"})]})}):(0,a.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[t.slice(0,5).map(((e,s)=>(0,a.jsxs)("div",{className:(0,f.cn)("flex items-start gap-3 p-3 rounded-lg border","critical"===e.severity&&"bg-red-50 border-red-200 dark:bg-red-950/50 dark:border-red-800","high"===e.severity&&"bg-orange-50 border-orange-200 dark:bg-orange-950/50 dark:border-orange-800","medium"===e.severity&&"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/50 dark:border-yellow-800","low"===e.severity&&"bg-blue-50 border-blue-200 dark:bg-blue-950/50 dark:border-blue-800"),children:[a.jsx(c.Z,{className:(0,f.cn)("h-4 w-4 mt-0.5","critical"===e.severity&&"text-red-600","high"===e.severity&&"text-orange-600","medium"===e.severity&&"text-yellow-600","low"===e.severity&&"text-blue-600")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("p",{className:"font-medium text-sm",children:e.title||"System Alert"}),a.jsx(F.C,{variant:"critical"===e.severity||"high"===e.severity?"destructive":"medium"===e.severity?"secondary":"outline",className:"text-xs",children:e.severity})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:e.description||"No description available"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.timestamp?y(e.timestamp):"Just now"})]})]},e.id||s))),t.length>5&&a.jsx("div",{className:"text-center pt-2",children:(0,a.jsxs)(h.z,{variant:"ghost",size:"sm",children:["View All ",t.length," Alerts"]})})]})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx(J.Uo,{delay:.8,children:(0,a.jsxs)(ee.Zb,{children:[a.jsx(ee.Ol,{children:a.jsx(ee.ll,{className:"text-base",children:"Response Time"})}),(0,a.jsxs)(ee.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold mb-2",children:[p?.response_time||0,"ms"]}),a.jsx("div",{className:"h-16",children:a.jsx(ms.h,{width:"100%",height:"100%",children:a.jsx(us.w,{data:l.slice(-10),children:a.jsx(fs.x,{type:"monotone",dataKey:"response_time",stroke:"#10b981",strokeWidth:2,dot:!1})})})})]})]})}),a.jsx(J.Uo,{delay:.9,children:(0,a.jsxs)(ee.Zb,{children:[a.jsx(ee.Ol,{children:a.jsx(ee.ll,{className:"text-base",children:"Resource Distribution"})}),a.jsx(ee.aY,{children:a.jsx("div",{className:"h-32",children:a.jsx(ms.h,{width:"100%",height:"100%",children:(0,a.jsxs)(vs.u,{children:[a.jsx(bs.b,{data:[{name:"CPU",value:p?.cpu_usage||0},{name:"Memory",value:p?.memory_usage||0},{name:"Disk",value:p?.disk_usage||0}],cx:"50%",cy:"50%",outerRadius:45,fill:"#8884d8",dataKey:"value",children:[{name:"CPU",value:p?.cpu_usage||0},{name:"Memory",value:p?.memory_usage||0},{name:"Disk",value:p?.disk_usage||0}].map(((e,s)=>a.jsx(Ns.b,{fill:ks[s%ks.length]},`cell-${s}`)))}),a.jsx(gs.u,{formatter:e=>`${e.toFixed(1)}%`})]})})})})]})}),a.jsx(J.Uo,{delay:1,children:(0,a.jsxs)(ee.Zb,{children:[a.jsx(ee.Ol,{children:a.jsx(ee.ll,{className:"text-base",children:"System Status"})}),(0,a.jsxs)(ee.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"WebSocket"}),a.jsx(F.C,{variant:e?"secondary":"destructive",children:e?"Connected":"Disconnected"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Auto-refresh"}),a.jsx(F.C,{variant:m?"secondary":"outline",children:m?"Active":"Paused"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Data points"}),a.jsx(F.C,{variant:"outline",children:l.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Last update"}),a.jsx("span",{className:"text-xs text-gray-600",children:p?y(p.timestamp):"Never"})]})]})]})})]})]});var v},Cs="force-dynamic";function _s(){const[e,s]=(0,r.useState)(!1),[t,i]=(0,r.useState)(5),[o,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(new Date),[x,p]=(0,r.useState)({isLoading:!0,isError:!1,isSuccess:!1,message:""}),y={name:"System Administrator",email:"admin@novacron.io",role:"admin"},v=(0,n.useRouter)(),{toast:b}=(0,l.p)();(0,r.useEffect)((()=>{const e=setTimeout((()=>{p({isLoading:!1,isError:!1,isSuccess:!0,message:""})}),1e3);return()=>clearTimeout(e)}),[]);const N=[{id:"overview",label:"Overview",icon:a.jsx(U.Z,{className:"h-4 w-4"}),content:a.jsx(J.Uo,{children:a.jsx(We,{})})},{id:"realtime",label:"Real-time Monitor",icon:a.jsx(Activity,{className:"h-4 w-4"}),content:a.jsx(J.Uo,{delay:.1,children:a.jsx(Ss,{})})},{id:"users",label:"User Management",icon:a.jsx(z.Z,{className:"h-4 w-4"}),badge:3,content:a.jsx(J.Uo,{delay:.1,children:a.jsx(ke,{})})},{id:"database",label:"Database Editor",icon:a.jsx(T.Z,{className:"h-4 w-4"}),content:a.jsx(J.Uo,{delay:.2,children:a.jsx(he,{})})},{id:"security",label:"Security",icon:a.jsx(M.Z,{className:"h-4 w-4"}),badge:2,content:a.jsx(J.Uo,{delay:.3,children:a.jsx(Oe,{})})},{id:"permissions",label:"Roles & Permissions",icon:a.jsx(G,{className:"h-4 w-4"}),content:a.jsx(J.Uo,{delay:.4,children:a.jsx(rs,{})})},{id:"audit",label:"Audit Logs",icon:a.jsx(H.Z,{className:"h-4 w-4"}),content:a.jsx(J.Uo,{delay:.5,children:a.jsx(es,{})})},{id:"settings",label:"System Config",icon:a.jsx(P.Z,{className:"h-4 w-4"}),content:a.jsx(J.Uo,{delay:.6,children:a.jsx(Ae,{})})}];return a.jsx(g,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(j,{}),a.jsx($,{user:y,onLogout:()=>{try{localStorage.removeItem("authToken")}catch{}b({title:"Logged out"}),v.push("/auth/login")}}),a.jsx(V,{user:y,collapsed:e,onCollapse:s}),(0,a.jsxs)("main",{id:"main-content",className:(0,f.cn)("transition-all duration-300","lg:ml-64",e&&"lg:ml-16","pb-16 sm:pb-0"),children:[a.jsx("header",{className:"sticky top-0 z-30 bg-white dark:bg-gray-900 border-b dark:border-gray-800",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:"Admin Dashboard"}),(0,a.jsxs)(F.C,{variant:"destructive",className:"animate-pulse",children:[a.jsx(c.Z,{className:"h-3 w-3 mr-1"}),"Elevated Access"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(W,{isRefreshing:o,onRefresh:async()=>{d(!0),await new Promise((e=>setTimeout(e,2e3))),u(new Date),d(!1)},lastUpdated:m}),(0,a.jsxs)(h.z,{variant:"ghost",size:"icon",className:"relative",children:[a.jsx(X.Z,{className:"h-5 w-5"}),t>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center",children:t})]}),a.jsx(C,{})]})]})})}),a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:a.jsx(K,{state:x,loadingComponent:a.jsx(Y,{}),children:a.jsx(B,{tabs:N,defaultTab:"realtime",className:"w-full"})})})]})]})})}},24510:(e,s,t)=>{"use strict";t.r(s),t.d(s,{ThemeProvider:()=>i});var a=t(30784),r=(t(9885),t(71072));function i({children:e,...s}){return a.jsx(r.f,{...s,children:e})}},17133:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var a=t(30784),r=(t(9885),t(91971)),i=t(80467);const n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return a.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},45304:(e,s,t)=>{"use strict";t.d(s,{z:()=>o});var a=t(30784),r=t(9885),i=t(71085),n=t(91971),l=t(80467);const c=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md",success:"bg-success text-success-foreground hover:bg-success/90 shadow-sm hover:shadow-md",warning:"bg-warning text-warning-foreground hover:bg-warning/90 shadow-sm hover:shadow-md",info:"bg-info text-info-foreground hover:bg-info/90 shadow-sm hover:shadow-md",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-accent-foreground/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground hover:scale-105",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80",nova:"bg-gradient-to-r from-nova-500 to-nova-600 text-white hover:from-nova-600 hover:to-nova-700 shadow-md hover:shadow-lg"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((({className:e,variant:s,size:t,asChild:r=!1,...n},o)=>{const d=r?i.g7:"button";return a.jsx(d,{className:(0,l.cn)(c({variant:s,size:t,className:e})),ref:o,...n})}));o.displayName="Button"},97040:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>l,SZ:()=>o,Zb:()=>n,aY:()=>d,eW:()=>m,ll:()=>c});var a=t(30784),r=t(9885),i=t(80467);const n=r.forwardRef((({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s})));n.displayName="Card";const l=r.forwardRef((({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s})));l.displayName="CardHeader";const c=r.forwardRef((({className:e,...s},t)=>a.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s})));c.displayName="CardTitle";const o=r.forwardRef((({className:e,...s},t)=>a.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s})));o.displayName="CardDescription";const d=r.forwardRef((({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s})));d.displayName="CardContent";const m=r.forwardRef((({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})));m.displayName="CardFooter"},17202:(e,s,t)=>{"use strict";t.d(s,{X:()=>c});var a=t(30784),r=t(9885),i=t(17585),n=t(1264),l=t(80467);const c=r.forwardRef((({className:e,...s},t)=>a.jsx(i.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:a.jsx(n.Z,{className:"h-4 w-4"})})})));c.displayName=i.fC.displayName},55794:(e,s,t)=>{"use strict";t.d(s,{$F:()=>m,AW:()=>u,Ju:()=>h,VD:()=>p,Xi:()=>x,h_:()=>d});var a=t(30784),r=t(9885),i=t(24742),n=t(11922),l=t(1264),c=t(74151),o=t(80467);const d=i.fC,m=i.xz;i.ZA,i.Uv,i.Tr,i.Ee;r.forwardRef((({className:e,inset:s,children:t,...r},l)=>(0,a.jsxs)(i.fF,{ref:l,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...r,children:[t,a.jsx(n.Z,{className:"ml-auto h-4 w-4"})]}))).displayName=i.fF.displayName;r.forwardRef((({className:e,...s},t)=>a.jsx(i.tu,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}))).displayName=i.tu.displayName;const u=r.forwardRef((({className:e,sideOffset:s=4,...t},r)=>a.jsx(i.Uv,{children:a.jsx(i.VY,{ref:r,sideOffset:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})})));u.displayName=i.VY.displayName;const x=r.forwardRef((({className:e,inset:s,...t},r)=>a.jsx(i.ck,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...t})));x.displayName=i.ck.displayName;r.forwardRef((({className:e,children:s,checked:t,...r},n)=>(0,a.jsxs)(i.oC,{ref:n,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(l.Z,{className:"h-4 w-4"})})}),s]}))).displayName=i.oC.displayName;r.forwardRef((({className:e,children:s,...t},r)=>(0,a.jsxs)(i.Rk,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(c.Z,{className:"h-2 w-2 fill-current"})})}),s]}))).displayName=i.Rk.displayName;const h=r.forwardRef((({className:e,inset:s,...t},r)=>a.jsx(i.__,{ref:r,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t})));h.displayName=i.__.displayName;const p=r.forwardRef((({className:e,...s},t)=>a.jsx(i.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})));p.displayName=i.Z0.displayName},57505:(e,s,t)=>{"use strict";t.d(s,{I:()=>n});var a=t(30784),r=t(9885),i=t(80467);const n=r.forwardRef((({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t})));n.displayName="Input"},86847:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(30784),r=t(9885),i=t(81915),n=t(80467);const l=r.forwardRef((({className:e,value:s,...t},r)=>a.jsx(i.fC,{ref:r,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:a.jsx(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})));l.displayName=i.fC.displayName},7950:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>u,Ph:()=>o,Ql:()=>x,i4:()=>m,ki:()=>d});var a=t(30784),r=t(9885),i=t(71806),n=t(19458),l=t(1264),c=t(80467);const o=i.fC,d=(i.ZA,i.B4),m=r.forwardRef((({className:e,children:s,...t},r)=>(0,a.jsxs)(i.xz,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:[s,a.jsx(i.JO,{asChild:!0,children:a.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]})));m.displayName=i.xz.displayName;const u=r.forwardRef((({className:e,children:s,position:t="popper",...r},n)=>a.jsx(i.h_,{children:a.jsx(i.VY,{ref:n,className:(0,c.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===t&&"translate-y-1",e),position:t,...r,children:a.jsx(i.l_,{className:(0,c.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})));u.displayName=i.VY.displayName;r.forwardRef((({className:e,...s},t)=>a.jsx(i.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}))).displayName=i.__.displayName;const x=r.forwardRef((({className:e,children:s,...t},r)=>(0,a.jsxs)(i.ck,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(l.Z,{className:"h-4 w-4"})})}),a.jsx(i.eT,{children:s})]})));x.displayName=i.ck.displayName;r.forwardRef((({className:e,...s},t)=>a.jsx(i.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s}))).displayName=i.Z0.displayName},64536:(e,s,t)=>{"use strict";t.d(s,{i:()=>l});var a=t(30784),r=t(9885),i=t(44408),n=t(80467);const l=r.forwardRef((({className:e,...s},t)=>(0,a.jsxs)(i.fC,{ref:t,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[a.jsx(i.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(i.e6,{className:"absolute h-full bg-primary"})}),a.jsx(i.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})));l.displayName=i.fC.displayName},58013:(e,s,t)=>{"use strict";t.d(s,{r:()=>l});var a=t(30784),r=t(9885),i=t(73195),n=t(80467);const l=r.forwardRef((({className:e,...s},t)=>a.jsx(i.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:a.jsx(i.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})));l.displayName=i.fC.displayName},96589:(e,s,t)=>{"use strict";t.d(s,{RM:()=>c,Rn:()=>u,SC:()=>o,iA:()=>n,pj:()=>m,ss:()=>d,xD:()=>l});var a=t(30784),r=t(9885),i=t(80467);const n=r.forwardRef((({className:e,...s},t)=>a.jsx("div",{className:"w-full overflow-auto",children:a.jsx("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...s})})));n.displayName="Table";const l=r.forwardRef((({className:e,...s},t)=>a.jsx("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...s})));l.displayName="TableHeader";const c=r.forwardRef((({className:e,...s},t)=>a.jsx("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...s})));c.displayName="TableBody";r.forwardRef((({className:e,...s},t)=>a.jsx("tfoot",{ref:t,className:(0,i.cn)("bg-primary font-medium text-primary-foreground",e),...s}))).displayName="TableFooter";const o=r.forwardRef((({className:e,...s},t)=>a.jsx("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s})));o.displayName="TableRow";const d=r.forwardRef((({className:e,...s},t)=>a.jsx("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s})));d.displayName="TableHead";const m=r.forwardRef((({className:e,...s},t)=>a.jsx("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s})));m.displayName="TableCell";const u=r.forwardRef((({className:e,...s},t)=>a.jsx("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...s})));u.displayName="TableCaption"},57550:(e,s,t)=>{"use strict";t.d(s,{g:()=>n});var a=t(30784),r=t(9885),i=t(80467);const n=r.forwardRef((({className:e,...s},t)=>a.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s})));n.displayName="Textarea"},99748:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(30784),r=t(10345);function i(){return{toast:e=>{const{title:s,description:t,variant:i="default",duration:n=4e3}=e,l=(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&a.jsx("div",{className:"text-sm font-semibold",children:s}),t&&a.jsx("div",{className:"text-sm opacity-90",children:t})]});"destructive"===i?r.toast.error(l,{duration:n}):r.toast.success(l,{duration:n})}}}},22813:(e,s,t)=>{"use strict";t.r(s),t.d(s,{RBACProvider:()=>c,useRBAC:()=>o});var a=t(30784),r=t(9885),i=t(43560);const n=(0,r.createContext)(void 0),l=[{id:"super-admin",name:"Super Administrator",description:"Full system access with all permissions",isSystemRole:!0,permissions:[{resource:"*",actions:["*"]}]},{id:"admin",name:"Administrator",description:"System administration with most permissions",isSystemRole:!0,permissions:[{resource:"users",actions:["create","read","update","delete"]},{resource:"vms",actions:["create","read","update","delete","migrate"]},{resource:"monitoring",actions:["read","configure"]},{resource:"security",actions:["read","configure"]},{resource:"backups",actions:["create","read","restore"]},{resource:"settings",actions:["read","update"]}]},{id:"operator",name:"Operator",description:"VM operations and monitoring access",isSystemRole:!0,permissions:[{resource:"vms",actions:["read","update","migrate"]},{resource:"monitoring",actions:["read"]},{resource:"backups",actions:["create","read"]}]},{id:"viewer",name:"Viewer",description:"Read-only access to system resources",isSystemRole:!0,permissions:[{resource:"vms",actions:["read"]},{resource:"monitoring",actions:["read"]},{resource:"backups",actions:["read"]}]}];function c({children:e}){const{user:s}=(0,i.a)(),t=(()=>{if(!s)return[];const e=s.roles||["viewer"];return l.filter((s=>e.includes(s.id)))})(),r=t.flatMap((e=>e.permissions)),c=(e,t)=>{if(!s)return!1;return!!r.some((e=>"*"===e.resource&&e.actions.includes("*")))||r.some((s=>{const a=s.resource===e||"*"===s.resource,r=s.actions.includes(t)||s.actions.includes("*");return a&&r}))},o=e=>t.some((s=>s.id===e||s.name===e));return a.jsx(n.Provider,{value:{userRoles:t,permissions:r,hasPermission:c,hasRole:o,canAccess:(e,t)=>{if(!s)return!1;if(e&&e.length>0){if(!e.some((e=>o(e))))return!1}if(t&&t.length>0){if(!t.every((e=>c(e.resource,e.action))))return!1}return!0}},children:e})}function o(){const e=(0,r.useContext)(n);if(void 0===e)throw new Error("useRBAC must be used within an RBACProvider");return e}},43560:(e,s,t)=>{"use strict";t.d(s,{a:()=>i});t(30784);var a=t(9885);t(57114),t(7803);const r=(0,a.createContext)(void 0);function i(){const e=(0,a.useContext)(r);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}},63712:(e,s,t)=>{"use strict";t.d(s,{LV:()=>o,bc:()=>l,lt:()=>n,sO:()=>r,wD:()=>c,zm:()=>i});var a=t(9885);function r(e,s={}){const{reconnect:t=!0,reconnectInterval:r=5e3,reconnectAttempts:i=5,heartbeat:n=!0,heartbeatInterval:l=3e4,queue:c=!1}=s,[o,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),g=(0,a.useRef)(null),f=(0,a.useRef)(0),j=(0,a.useRef)(null),y=(0,a.useRef)(null),v=(0,a.useRef)(null),b=(0,a.useCallback)((()=>{j.current&&(clearInterval(j.current),j.current=null),y.current&&(clearTimeout(y.current),y.current=null)}),[]),N=(0,a.useCallback)((()=>{n&&g.current&&(j.current=setInterval((()=>{g.current?.readyState===WebSocket.OPEN&&g.current.send(JSON.stringify({type:"ping"}))}),l))}),[n,l]),w=(0,a.useCallback)((()=>{try{const a="https:"===window.location.protocol?"wss:":"ws:",n=window.location.host,l=e.startsWith("/")?`${a}//${n}${e}`:e;g.current=new WebSocket(l),g.current.onopen=()=>{x(!0),p(null),f.current=0,N()},g.current.onmessage=e=>{try{const t=JSON.parse(e.data);"pong"!==t.type&&(s.queue?d.enqueue(t):m(t))}catch(t){const a=e.data;s.queue?d.enqueue(a):m(a)}},g.current.onerror=e=>{p(new Error("WebSocket error"))},g.current.onclose=()=>{x(!1),b(),t&&f.current<i&&(f.current++,y.current=setTimeout((()=>{w()}),r))}}catch(a){p(a)}}),[e,t,r,i,N,b]),k=(0,a.useCallback)((e=>{g.current?.readyState===WebSocket.OPEN&&g.current.send("string"===typeof e?e:JSON.stringify(e))}),[]),S=(0,a.useCallback)((()=>{b(),f.current=i,g.current?.close()}),[i,b]),C=(0,a.useCallback)((()=>{f.current=0,S(),setTimeout(w,100)}),[S,w]);return(0,a.useEffect)((()=>(w(),c&&(v.current=d.subscribe((e=>{m(e)}))),()=>{b(),g.current?.close(),v.current&&(v.current(),v.current=null)})),[w,b,c]),{data:o,isConnected:u,error:h,send:k,close:S,reconnect:C}}function i(){return r("/api/ws/monitoring",{heartbeatInterval:2e4})}function n(){return r("/api/ws/network/topology",{heartbeatInterval:15e3,reconnectAttempts:8})}function l(){return r("/api/ws/network/bandwidth",{heartbeatInterval:5e3,reconnectAttempts:12})}function c(){return r("/api/ws/ai/predictions",{heartbeatInterval:3e4,reconnectAttempts:6})}function o(){return r("/api/ws/fabric/global",{heartbeatInterval:2e4,reconnectAttempts:10})}new class{getConnection(e){if(this.connections.has(e))return this.connections.get(e)||null;if(this.connections.size>=this.maxConnections){const e=this.connections.keys().next().value,s=this.connections.get(e);s&&(s.close(),this.connections.delete(e))}try{const s=new WebSocket(e);return this.connections.set(e,s),s}catch{return null}}closeConnection(e){const s=this.connections.get(e);s&&(s.close(),this.connections.delete(e))}closeAllConnections(){this.connections.forEach((e=>e.close())),this.connections.clear()}constructor(){this.connections=new Map,this.maxConnections=10}};const d=new class{start(){this.processor||(this.processor=setInterval((()=>{this.processQueue()}),this.processingInterval))}stop(){this.processor&&(clearInterval(this.processor),this.processor=null)}enqueue(e){0!==this.subscribers.length&&(this.queue.push({timestamp:Date.now(),data:e}),this.queue.length>this.maxSize&&this.queue.shift())}processQueue(){if(0===this.queue.length||0===this.subscribers.length)return;this.queue.splice(0,Math.min(10,this.queue.length)).forEach((({data:e})=>{this.subscribers.forEach((s=>s(e)))}))}subscribe(e){return this.subscribers.push(e),1!==this.subscribers.length||this.processor||this.start(),()=>{const s=this.subscribers.indexOf(e);s>-1&&this.subscribers.splice(s,1),0===this.subscribers.length&&this.stop()}}constructor(){this.queue=[],this.maxSize=1e3,this.processingInterval=100,this.processor=null,this.subscribers=[]}}},5171:(e,s,t)=>{"use strict";t.d(s,{Uo:()=>n,f:()=>l});var a=t(30784),r=t(9885),i=t(94571);function n({children:e,delay:s=0,duration:t=.5,className:r=""}){return a.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s,duration:t},className:r,children:e})}function l({value:e,duration:s=1e3,suffix:t=""}){const[i,n]=(0,r.useState)(0);return(0,r.useEffect)((()=>{if("number"!==typeof e||isNaN(e))return void n(0);const t=e,a=t/(s/16);let r=0;const i=setInterval((()=>{r+=a,r>=t?(n(t),clearInterval(i)):n(Math.floor(r))}),16);return()=>clearInterval(i)}),[e,s]),(0,a.jsxs)("span",{children:[i,t]})}},91904:(e,s,t)=>{"use strict";t.d(s,{R1:()=>n,sg:()=>l,x1:()=>a});const a=new class{constructor(){this.token=null,this.baseURL=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8090",this.wsURL=process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8091"}setToken(e){this.token=e}clearToken(){this.token=null}async request(e,s={}){const t=`${this.baseURL}${e}`,a={"Content-Type":"application/json",...s.headers||{}};this.token&&(a.Authorization=`Bearer ${this.token}`);const r=await fetch(t,{...s,headers:a});if(!r.ok){const e=await r.text();throw new Error(`API Error: ${r.status} - ${e}`)}return 204===r.status?{}:r.json()}async get(e){return this.request(e,{method:"GET"})}async post(e,s){return this.request(e,{method:"POST",body:s?JSON.stringify(s):null})}async put(e,s){return this.request(e,{method:"PUT",body:s?JSON.stringify(s):null})}async delete(e){return this.request(e,{method:"DELETE"})}connectWebSocket(e){try{const s=`${this.wsURL}${e}`,t=new WebSocket(s);return this.token&&t.addEventListener("open",(()=>{t.send(JSON.stringify({type:"auth",token:this.token}))})),t}catch(s){return null}}},r=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8090/api/v1";class i extends Error{constructor(e,s,t,a){super(t),this.status=e,this.code=s,this.url=a}}async function n(e,s,t){try{const a=function(e,s){const t=new URL(e,r),a=new URLSearchParams;if(s)for(const[r,i]of Object.entries(s))void 0!==i&&null!==i&&""!==i&&a.set(r,String(i));return t.search=a.toString(),t.toString()}(e,s),n=t?.role??"viewer",l=await fetch(a,{method:"GET",headers:{Accept:"application/json","X-Role":n},credentials:"include"});if(!l.ok)return{data:null,error:{code:`HTTP_${l.status}`,message:l.statusText}};const c=await l.json(),o=function(e){const s=e.headers.get("X-Pagination");if(s)try{return JSON.parse(s)}catch{return}}(l);if(o&&(c.pagination=o),c.error)throw new i(l.status,c.error.code,c.error.message,a);return c}catch(a){return{data:null,error:{code:"FETCH_ERROR",message:a instanceof Error?a.message:"Unknown error"}}}}async function l(e,s,t){const a=new URL(e,r).toString(),n=t?.role??"viewer",l=await fetch(a,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Role":n},body:void 0!==s?JSON.stringify(s):void 0,credentials:"include"}),c=await l.json();if(c.error)throw new i(l.status,c.error.code,c.error.message,a);return c}},74676:(e,s,t)=>{"use strict";t.d(s,{D0:()=>C,FC:()=>w,GB:()=>S,Io:()=>j,LL:()=>A,O2:()=>f,Pr:()=>k,UV:()=>g,Yy:()=>_,aB:()=>N,hT:()=>y,k7:()=>v,oi:()=>Z,rS:()=>p,zR:()=>b});var a=t(53993),r=t(212),i=t(30012),n=t(91904);const l="/admin/users",c="/admin/audit-logs",o="/admin/system/metrics",d="/admin/security/alerts",m="/admin/system/config",u="/admin/resource-quotas",x="/admin/vm-templates",h="/admin/reports/performance",p={USERS:["admin","users"],USER_SESSIONS:e=>["admin","user-sessions",e],AUDIT_LOGS:["admin","audit-logs"],SYSTEM_METRICS:["admin","system-metrics"],SECURITY_ALERTS:["admin","security-alerts"],SYSTEM_CONFIG:["admin","system-config"],RESOURCE_QUOTAS:["admin","resource-quotas"],VM_TEMPLATES:["admin","vm-templates"],PERFORMANCE_REPORTS:["admin","performance-reports"]},g=e=>(0,a.a)({queryKey:[...p.USERS,e],queryFn:async()=>{const s=new URLSearchParams;e?.status&&s.append("status",e.status),e?.role&&s.append("role",e.role),e?.search&&s.append("search",e.search),e?.page&&s.append("page",e.page.toString()),e?.pageSize&&s.append("pageSize",e.pageSize.toString());return await n.x1.get(`${l}?${s.toString()}`)},staleTime:3e4,refetchInterval:6e4}),f=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>n.x1.post(l,e),onSuccess:()=>{e.invalidateQueries({queryKey:p.USERS})}})},j=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async({id:e,...s})=>n.x1.put(`${l}/${e}`,s),onSuccess:()=>{e.invalidateQueries({queryKey:p.USERS})}})},y=e=>(0,a.a)({queryKey:[...p.AUDIT_LOGS,e],queryFn:async()=>{const s=new URLSearchParams;return e?.userId&&s.append("userId",e.userId),e?.action&&s.append("action",e.action),e?.resourceType&&s.append("resourceType",e.resourceType),e?.startDate&&s.append("startDate",e.startDate),e?.endDate&&s.append("endDate",e.endDate),e?.page&&s.append("page",e.page.toString()),e?.pageSize&&s.append("pageSize",e.pageSize.toString()),n.x1.get(`${c}?${s.toString()}`)},staleTime:6e4}),v=e=>(0,a.a)({queryKey:[...p.SYSTEM_METRICS,e],queryFn:async()=>{const s=e?`?range=${e}`:"";return n.x1.get(`${o}${s}`)},staleTime:3e4,refetchInterval:3e4}),b=e=>(0,a.a)({queryKey:[...p.SECURITY_ALERTS,e],queryFn:async()=>{const s=new URLSearchParams;return e?.status&&s.append("status",e.status),e?.severity&&s.append("severity",e.severity),e?.type&&s.append("type",e.type),e?.page&&s.append("page",e.page.toString()),e?.pageSize&&s.append("pageSize",e.pageSize.toString()),n.x1.get(`${d}?${s.toString()}`)},staleTime:3e4,refetchInterval:6e4}),N=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async({id:e,...s})=>n.x1.put(`${d}/${e}`,s),onSuccess:()=>{e.invalidateQueries({queryKey:p.SECURITY_ALERTS})}})},w=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async({key:e,value:s,category:t})=>n.x1.put(`${m}/${e}`,{value:s,category:t}),onSuccess:()=>{e.invalidateQueries({queryKey:p.SYSTEM_CONFIG})}})},k=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async({id:e,...s})=>n.x1.put(`${u}/${e}`,s),onSuccess:()=>{e.invalidateQueries({queryKey:p.RESOURCE_QUOTAS})}})},S=()=>(0,a.a)({queryKey:p.VM_TEMPLATES,queryFn:async()=>n.x1.get(x),staleTime:3e5}),C=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>n.x1.post(x,e),onSuccess:()=>{e.invalidateQueries({queryKey:p.VM_TEMPLATES})}})},_=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>n.x1.delete(`${x}/${e}`),onSuccess:()=>{e.invalidateQueries({queryKey:p.VM_TEMPLATES})}})},Z=e=>(0,a.a)({queryKey:[...p.PERFORMANCE_REPORTS,e],queryFn:async()=>{const s=e?`?type=${e}`:"";return n.x1.get(`${h}${s}`)},staleTime:6e5}),A=()=>{const e=(0,r.NL)();return(0,i.D)({mutationFn:async({userIds:e,operation:s,data:t})=>n.x1.post(`${l}/bulk`,{userIds:e,operation:s,data:t}),onSuccess:()=>{e.invalidateQueries({queryKey:p.USERS}),e.invalidateQueries({queryKey:p.AUDIT_LOGS})}})}},7803:(e,s,t)=>{"use strict";t.d(s,{O:()=>r});const a=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8090";const r=new class{async request(e,s={}){const t=`${a}${e}`,r={headers:{"Content-Type":"application/json",...s.headers},...s};try{const e=await fetch(t,r);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(i){throw i}}async login(e){return this.request("/api/auth/login",{method:"POST",body:JSON.stringify(e)})}async register(e){return this.request("/api/auth/register",{method:"POST",body:JSON.stringify(e)})}async forgotPassword(e){return this.request("/api/auth/forgot-password",{method:"POST",body:JSON.stringify(e)})}async resetPassword(e){return this.request("/api/auth/reset-password",{method:"POST",body:JSON.stringify(e)})}getCurrentUser(){if(!this.getToken())return null;try{return{id:"user-123",email:"user@example.com",firstName:"Demo",lastName:"User",status:"active"}}catch(e){return null}}isAuthenticated(){return!!this.getToken()}getToken(){return null}setToken(e,s){0}removeToken(){0}logout(){this.removeToken()}async setup2FA(){const e=this.getToken(),s=this.getCurrentUser();if(!s)throw new Error("User not authenticated");return this.request("/api/auth/2fa/setup",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:JSON.stringify({user_id:s.id,account_name:s.email})})}async verify2FASetup(e){const s=this.getToken(),t=this.getCurrentUser();if(!t&&!e.user_id)throw new Error("User ID required for 2FA verification");return this.request("/api/auth/2fa/verify",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:JSON.stringify({user_id:e.user_id||t?.id,code:e.code,is_backup_code:e.is_backup_code||!1})})}async verify2FALogin(e){return this.request("/api/auth/2fa/verify-login",{method:"POST",body:JSON.stringify({user_id:e.user_id,code:e.code,is_backup_code:e.is_backup_code||!1,temp_token:e.temp_token})})}async enable2FA(e){const s=this.getCurrentUser();if(!s)throw new Error("User not authenticated");const t=this.getToken();return this.request("/api/auth/2fa/enable",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify({user_id:s.id,code:e})})}async disable2FA(){const e=this.getCurrentUser();if(!e)throw new Error("User not authenticated");const s=this.getToken();return this.request("/api/auth/2fa/disable",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:JSON.stringify({user_id:e.id})})}async get2FAStatus(){const e=this.getCurrentUser();if(!e)throw new Error("User not authenticated");const s=this.getToken(),t=await this.request("/api/auth/2fa/status?user_id="+e.id,{method:"GET",headers:{Authorization:`Bearer ${s}`}});return{enabled:t.enabled,backup_codes_remaining:0,setup:t.setup,setup_at:t.setup_at,last_used:t.last_used}}async generateBackupCodes(){const e=this.getCurrentUser();if(!e)throw new Error("User not authenticated");const s=this.getToken();return this.request("/api/auth/2fa/backup-codes",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:JSON.stringify({user_id:e.id})})}setTempToken(e){0}getTempToken(){return null}removeTempToken(){0}}},80467:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(80391),r=t(59610);function i(...e){return(0,r.m)((0,a.clsx)(e))}},81362:(e,s,t)=>{"use strict";t.r(s),t.d(s,{QueryProvider:()=>c});var a=t(30784),r=t(85167),i=t(212),n=t(5570),l=t(9885);function c({children:e}){const[s]=(0,l.useState)((()=>new r.S({defaultOptions:{queries:{staleTime:6e4,retry:1,refetchOnWindowFocus:!1}}})));return(0,a.jsxs)(i.aH,{client:s,children:[e,a.jsx(n.t,{initialIsOpen:!1})]})}},39862:(e,s,t)=>{"use strict";function a({children:e}){return e}t.r(s),t.d(s,{default:()=>a})},90881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>c,dynamic:()=>l});const a=(0,t(95153).createProxy)(String.raw`/home/kp/novacron/frontend/src/app/admin/page.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default,l=a.dynamic,c=n},35519:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z,metadata:()=>U});var a=t(4656),r=(t(5023),t(95153));const i=(0,r.createProxy)(String.raw`/home/kp/novacron/frontend/src/components/theme-provider.tsx`),{__esModule:n,$$typeof:l}=i,c=(i.default,i.ThemeProvider);var o=t(3542),d=t(98139),m=t(98858),u=t(87662),x=t(92822),h=t(30882);function p(...e){return(0,h.m)((0,x.clsx)(e))}const g=d.zt,f=o.forwardRef((({className:e,...s},t)=>a.jsx(d.l_,{ref:t,className:p("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s})));f.displayName=d.l_.displayName;const j=(0,m.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),y=o.forwardRef((({className:e,variant:s,...t},r)=>a.jsx(d.fC,{ref:r,className:p(j({variant:s}),e),...t})));y.displayName=d.fC.displayName;o.forwardRef((({className:e,...s},t)=>a.jsx(d.aU,{ref:t,className:p("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...s}))).displayName=d.aU.displayName;const v=o.forwardRef((({className:e,...s},t)=>a.jsx(d.x8,{ref:t,className:p("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...s,children:a.jsx(u.Z,{className:"h-4 w-4"})})));v.displayName=d.x8.displayName;const b=o.forwardRef((({className:e,...s},t)=>a.jsx(d.Dx,{ref:t,className:p("text-sm font-semibold",e),...s})));b.displayName=d.Dx.displayName;const N=o.forwardRef((({className:e,...s},t)=>a.jsx(d.dk,{ref:t,className:p("text-sm opacity-90",e),...s})));N.displayName=d.dk.displayName;var w=t(98204);function k(){const{toasts:e}={toast:e=>{const{title:s,description:t,variant:r="default",duration:i=4e3}=e,n=(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&a.jsx("div",{className:"text-sm font-semibold",children:s}),t&&a.jsx("div",{className:"text-sm opacity-90",children:t})]});"destructive"===r?w.Am.error(n,{duration:i}):w.Am.success(n,{duration:i})}};return(0,a.jsxs)(g,{children:[e.map((function({id:e,title:s,description:t,action:r,...i}){return(0,a.jsxs)(y,{...i,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&a.jsx(b,{children:s}),t&&a.jsx(N,{children:t})]}),r,a.jsx(v,{})]},e)})),a.jsx(f,{})]})}const S=(0,r.createProxy)(String.raw`/home/kp/novacron/frontend/src/providers/query-provider.tsx`),{__esModule:C,$$typeof:_}=S,Z=(S.default,S.QueryProvider);var A=t(2247);const E=(0,r.createProxy)(String.raw`/home/kp/novacron/frontend/src/contexts/RBACContext.tsx`),{__esModule:T,$$typeof:R}=E,M=(E.default,E.RBACProvider),U=(E.useRBAC,{title:"NovaCron - Distributed Cloud Hypervisor",description:"Next-generation distributed cloud hypervisor with advanced monitoring and management"});function z({children:e}){return a.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:a.jsx("body",{className:"font-sans antialiased",children:a.jsx(A.AuthProvider,{children:a.jsx(M,{children:a.jsx(Z,{children:(0,a.jsxs)(c,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:[e,a.jsx(k,{})]})})})})})})}},2247:()=>{throw new Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError: \n  \x1b[31mx\x1b[0m NEXT_RSC_ERR_REACT_API: useState\n   ,-[\x1b[36;1;4m/home/kp/novacron/frontend/src/hooks/useAuth.tsx\x1b[0m:1:1]\n \x1b[2m1\x1b[0m | import { useState, useEffect, useContext, createContext, ReactNode } from 'react';\n   : \x1b[31;1m         ^^^^^^^^\x1b[0m\n \x1b[2m2\x1b[0m | import { useRouter } from 'next/navigation';\n \x1b[2m3\x1b[0m | import { authService, UserResponse } from '@/lib/auth';\n   `----\n\n  \x1b[31mx\x1b[0m NEXT_RSC_ERR_REACT_API: useEffect\n   ,-[\x1b[36;1;4m/home/kp/novacron/frontend/src/hooks/useAuth.tsx\x1b[0m:1:1]\n \x1b[2m1\x1b[0m | import { useState, useEffect, useContext, createContext, ReactNode } from 'react';\n   : \x1b[31;1m                   ^^^^^^^^^\x1b[0m\n \x1b[2m2\x1b[0m | import { useRouter } from 'next/navigation';\n \x1b[2m3\x1b[0m | import { authService, UserResponse } from '@/lib/auth';\n   `----\n\n  \x1b[31mx\x1b[0m NEXT_RSC_ERR_REACT_API: createContext\n   ,-[\x1b[36;1;4m/home/kp/novacron/frontend/src/hooks/useAuth.tsx\x1b[0m:1:1]\n \x1b[2m1\x1b[0m | import { useState, useEffect, useContext, createContext, ReactNode } from 'react';\n   : \x1b[31;1m                                          ^^^^^^^^^^^^^\x1b[0m\n \x1b[2m2\x1b[0m | import { useRouter } from 'next/navigation';\n \x1b[2m3\x1b[0m | import { authService, UserResponse } from '@/lib/auth';\n   `----\n")},5023:()=>{},30569:(e,s,t)=>{"use strict";t.d(s,{M:()=>g});var a=t(9885),r=t(60381);function i(){const e=(0,a.useRef)(!1);return(0,r.L)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var n=t(89195);var l=t(19386),c=t(34349);class o extends a.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=s.offsetHeight||0,e.width=s.offsetWidth||0,e.top=s.offsetTop,e.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:s}){const t=(0,a.useId)(),r=(0,a.useRef)(null),i=(0,a.useRef)({width:0,height:0,top:0,left:0});return(0,a.useInsertionEffect)((()=>{const{width:e,height:a,top:n,left:l}=i.current;if(s||!r.current||!e||!a)return;r.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${t}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${a}px !important;\n            top: ${n}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}}),[s]),a.createElement(o,{isPresent:s,childRef:r,sizeRef:i},a.cloneElement(e,{ref:r}))}const m=({children:e,initial:s,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:n,mode:o})=>{const m=(0,c.h)(u),x=(0,a.useId)(),h=(0,a.useMemo)((()=>({id:x,initial:s,isPresent:t,custom:i,onExitComplete:e=>{m.set(e,!0);for(const s of m.values())if(!s)return;r&&r()},register:e=>(m.set(e,!1),()=>m.delete(e))})),n?void 0:[t]);return(0,a.useMemo)((()=>{m.forEach(((e,s)=>m.set(s,!1)))}),[t]),a.useEffect((()=>{!t&&!m.size&&r&&r()}),[t]),"popLayout"===o&&(e=a.createElement(d,{isPresent:t},e)),a.createElement(l.O.Provider,{value:h},e)};function u(){return new Map}var x=t(78549);var h=t(47279);const p=e=>e.key||"";const g=({children:e,custom:s,initial:t=!0,onExitComplete:l,exitBeforeEnter:c,presenceAffectsLayout:o=!0,mode:d="sync"})=>{(0,h.k)(!c,"Replace exitBeforeEnter with mode='wait'");const u=(0,a.useContext)(x.p).forceRender||function(){const e=i(),[s,t]=(0,a.useState)(0),r=(0,a.useCallback)((()=>{e.current&&t(s+1)}),[s]);return[(0,a.useCallback)((()=>n.Wi.postRender(r)),[r]),s]}()[0],g=i(),f=function(e){const s=[];return a.Children.forEach(e,(e=>{(0,a.isValidElement)(e)&&s.push(e)})),s}(e);let j=f;const y=(0,a.useRef)(new Map).current,v=(0,a.useRef)(j),b=(0,a.useRef)(new Map).current,N=(0,a.useRef)(!0);var w;if((0,r.L)((()=>{N.current=!1,function(e,s){e.forEach((e=>{const t=p(e);s.set(t,e)}))}(f,b),v.current=j})),w=()=>{N.current=!0,b.clear(),y.clear()},(0,a.useEffect)((()=>()=>w()),[]),N.current)return a.createElement(a.Fragment,null,j.map((e=>a.createElement(m,{key:p(e),isPresent:!0,initial:!!t&&void 0,presenceAffectsLayout:o,mode:d},e))));j=[...j];const k=v.current.map(p),S=f.map(p),C=k.length;for(let a=0;a<C;a++){const e=k[a];-1!==S.indexOf(e)||y.has(e)||y.set(e,void 0)}return"wait"===d&&y.size&&(j=[]),y.forEach(((e,t)=>{if(-1!==S.indexOf(t))return;const r=b.get(t);if(!r)return;const i=k.indexOf(t);let n=e;if(!n){const e=()=>{y.delete(t);const e=Array.from(b.keys()).filter((e=>!S.includes(e)));if(e.forEach((e=>b.delete(e))),v.current=f.filter((s=>{const a=p(s);return a===t||e.includes(a)})),!y.size){if(!1===g.current)return;u(),l&&l()}};n=a.createElement(m,{key:p(r),isPresent:!1,onExitComplete:e,custom:s,presenceAffectsLayout:o,mode:d},r),y.set(t,n)}j.splice(i,0,n)})),j=j.map((e=>{const s=e.key;return y.has(s)?e:a.createElement(m,{key:p(e),isPresent:!0,presenceAffectsLayout:o,mode:d},e)})),a.createElement(a.Fragment,null,y.size?j:j.map((e=>(0,a.cloneElement)(e))))}}};var s=require("../../webpack-runtime.js");s.C(e);var t=s.X(0,[5560,5876,433,1425,3528,1928,1915,8028,1578,3993,9989,5254,3195,12,1719,4918,5688,1440,2473,8443,4590,4408,1285,4062,7730,8856,2658,5112],(()=>{return e=54102,s(s.s=e);var e}));module.exports=t})();